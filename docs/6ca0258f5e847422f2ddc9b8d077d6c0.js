require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({14:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=c,exports.__awaiter=i,exports.__generator=u,exports.__exportStar=f,exports.__values=l,exports.__read=s,exports.__spread=p,exports.__await=y,exports.__asyncGenerator=_,exports.__asyncDelegator=h,exports.__asyncValues=b,exports.__makeTemplateObject=v,exports.__importStar=d,exports.__importDefault=w;var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=exports.__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,c=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,n);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(a<3?o(c):a>3?o(e,r,c):o(e,r))||c);return a>3&&c&&Object.defineProperty(e,r,c),c}function a(t,e){return function(r,n){e(r,n,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function i(t,e,r,n){return new(r||(r=Promise))(function(o,a){function c(t){try{u(n.next(t))}catch(t){a(t)}}function i(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(c,i)}u((n=n.apply(t,e||[])).next())})}function u(t,e){var r,n,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,n=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=e.call(t,c)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}function f(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function l(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function s(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)c.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return c}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function _(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},c("next"),c("throw"),c("return"),n[Symbol.asyncIterator]=function(){return this},n;function c(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||i(t,e)})})}function i(t,e){try{(r=o[t](e)).value instanceof y?Promise.resolve(r.value.v).then(u,f):l(a[0][2],r)}catch(t){l(a[0][3],t)}var r}function u(t){i("next",t)}function f(t){i("throw",t)}function l(t,e){t(e),a.shift(),a.length&&i(a[0][0],a[0][1])}}function h(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){t[n]&&(e[n]=function(e){return(r=!r)?{value:y(t[n](e)),done:"return"===n}:o?o(e):e})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"==typeof l?l(t):t[Symbol.iterator]()}function v(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function w(t){return t&&t.__esModule?t:{default:t}}
},{}],28:[function(require,module,exports) {
"use strict";function r(r){for(var e=new Array(r),t=0;t<r;++t)e[t]=t;return e}module.exports=r;
},{}],27:[function(require,module,exports) {
function t(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function n(n){return"function"==typeof n.readFloatLE&&"function"==typeof n.slice&&t(n.slice(0,0))}module.exports=function(o){return null!=o&&(t(o)||n(o)||!!o._isBuffer)};
},{}],17:[function(require,module,exports) {
var t=require("iota-array"),r=require("is-buffer"),n="undefined"!=typeof Float64Array;function e(t,r){return t[0]-r[0]}function o(){var t,r=this.stride,n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(r[t]),t];n.sort(e);var o=new Array(n.length);for(t=0;t<o.length;++t)o[t]=n[t][1];return o}function i(r,n){var e=["View",n,"d",r].join("");n<0&&(e="View_Nil"+r);var i="generic"===r;if(-1===n){var s="function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+r+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+e+"(a){return new "+e+"(a);}";return new Function(s)()}if(0===n){s="function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+r+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+e+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}";return new Function("TrivialArray",s)(a[r][0])}s=["'use strict'"];var u=t(n),p=u.map(function(t){return"i"+t}),f="this.offset+"+u.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),h=u.map(function(t){return"b"+t}).join(","),c=u.map(function(t){return"c"+t}).join(",");s.push("function "+e+"(a,"+h+","+c+",d){this.data=a","this.shape=["+h+"]","this.stride=["+c+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+r+"'","proto.dimension="+n),s.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+u.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===n?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),n<4?(s.push("function "+e+"_order(){"),2===n?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===n&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+e+"_set("+p.join(",")+",v){"),i?s.push("return this.data.set("+f+",v)}"):s.push("return this.data["+f+"]=v}"),s.push("proto.get=function "+e+"_get("+p.join(",")+"){"),i?s.push("return this.data.get("+f+")}"):s.push("return this.data["+f+"]}"),s.push("proto.index=function "+e+"_index(",p.join(),"){return "+f+"}"),s.push("proto.hi=function "+e+"_hi("+p.join(",")+"){return new "+e+"(this.data,"+u.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+u.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var d=u.map(function(t){return"a"+t+"=this.shape["+t+"]"}),l=u.map(function(t){return"c"+t+"=this.stride["+t+"]"});s.push("proto.lo=function "+e+"_lo("+p.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+l.join(","));for(var b=0;b<n;++b)s.push("if(typeof i"+b+"==='number'&&i"+b+">=0){d=i"+b+"|0;b+=c"+b+"*d;a"+b+"-=d}");s.push("return new "+e+"(this.data,"+u.map(function(t){return"a"+t}).join(",")+","+u.map(function(t){return"c"+t}).join(",")+",b)}"),s.push("proto.step=function "+e+"_step("+p.join(",")+"){var "+u.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+u.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(b=0;b<n;++b)s.push("if(typeof i"+b+"==='number'){d=i"+b+"|0;if(d<0){c+=b"+b+"*(a"+b+"-1);a"+b+"=ceil(-a"+b+"/d)}else{a"+b+"=ceil(a"+b+"/d)}b"+b+"*=d}");s.push("return new "+e+"(this.data,"+u.map(function(t){return"a"+t}).join(",")+","+u.map(function(t){return"b"+t}).join(",")+",c)}");var j=new Array(n),y=new Array(n);for(b=0;b<n;++b)j[b]="a[i"+b+"]",y[b]="b[i"+b+"]";s.push("proto.transpose=function "+e+"_transpose("+p+"){"+p.map(function(t,r){return t+"=("+t+"===undefined?"+r+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+j.join(",")+","+y.join(",")+",this.offset)}"),s.push("proto.pick=function "+e+"_pick("+p+"){var a=[],b=[],c=this.offset");for(b=0;b<n;++b)s.push("if(typeof i"+b+"==='number'&&i"+b+">=0){c=(c+this.stride["+b+"]*i"+b+")|0}else{a.push(this.shape["+b+"]);b.push(this.stride["+b+"])}");return s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+u.map(function(t){return"shape["+t+"]"}).join(",")+","+u.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",s.join("\n"))(a[r],o)}function s(t){if(r(t))return"buffer";if(n)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}var a={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};function u(t,r,n,e){if(void 0===t)return(0,a.array[0])([]);"number"==typeof t&&(t=[t]),void 0===r&&(r=[t.length]);var o=r.length;if(void 0===n){n=new Array(o);for(var u=o-1,p=1;u>=0;--u)n[u]=p,p*=r[u]}if(void 0===e){e=0;for(u=0;u<o;++u)n[u]<0&&(e-=(r[u]-1)*n[u])}for(var f=s(t),h=a[f];h.length<=o+1;)h.push(i(f,h.length-1));return(0,h[o+1])(t,r,n,e)}module.exports=u;
},{"iota-array":28,"is-buffer":27}],336:[function(require,module,exports) {
"use strict";function n(n,t){for(var r=1,e=n.length,o=n[0],i=n[0],u=1;u<e;++u)if(i=o,t(o=n[u],i)){if(u===r){r++;continue}n[r++]=o}return n.length=r,n}function t(n){for(var t=1,r=n.length,e=n[0],o=n[0],i=1;i<r;++i,o=e)if(o=e,(e=n[i])!==o){if(i===t){t++;continue}n[t++]=e}return n.length=t,n}function r(r,e,o){return 0===r.length?r:e?(o||r.sort(e),n(r,e)):(o||r.sort(),t(r))}module.exports=r;
},{}],62:[function(require,module,exports) {
"use strict";var r=require("uniq");function n(r,n,e){var s,o,a=r.length,i=n.arrayArgs.length,t=n.indexArgs.length>0,h=[],p=[],u=0,c=0;for(s=0;s<a;++s)p.push(["i",s,"=0"].join(""));for(o=0;o<i;++o)for(s=0;s<a;++s)c=u,u=r[s],0===s?p.push(["d",o,"s",s,"=t",o,"p",u].join("")):p.push(["d",o,"s",s,"=(t",o,"p",u,"-s",c,"*t",o,"p",c,")"].join(""));for(p.length>0&&h.push("var "+p.join(",")),s=a-1;s>=0;--s)u=r[s],h.push(["for(i",s,"=0;i",s,"<s",u,";++i",s,"){"].join(""));for(h.push(e),s=0;s<a;++s){for(c=u,u=r[s],o=0;o<i;++o)h.push(["p",o,"+=d",o,"s",s].join(""));t&&(s>0&&h.push(["index[",c,"]-=s",c].join("")),h.push(["++index[",u,"]"].join(""))),h.push("}")}return h.join("\n")}function e(r,e,s,o){for(var a=e.length,i=s.arrayArgs.length,t=s.blockSize,h=s.indexArgs.length>0,p=[],u=0;u<i;++u)p.push(["var offset",u,"=p",u].join(""));for(u=r;u<a;++u)p.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),p.push(["if(j",u,"<",t,"){"].join("")),p.push(["s",e[u],"=j",u].join("")),p.push(["j",u,"=0"].join("")),p.push(["}else{s",e[u],"=",t].join("")),p.push(["j",u,"-=",t,"}"].join("")),h&&p.push(["index[",e[u],"]=j",u].join(""));for(u=0;u<i;++u){for(var c=["offset"+u],f=r;f<a;++f)c.push(["j",f,"*t",u,"p",e[f]].join(""));p.push(["p",u,"=(",c.join("+"),")"].join(""))}p.push(n(e,s,o));for(u=r;u<a;++u)p.push("}");return p.join("\n")}function s(r){for(var n=0,e=r[0].length;n<e;){for(var s=1;s<r.length;++s)if(r[s][n]!==r[0][n])return n;++n}return n}function o(r,n,e){for(var s=r.body,o=[],a=[],i=0;i<r.args.length;++i){var t=r.args[i];if(!(t.count<=0)){var h=new RegExp(t.name,"g"),p="",u=n.arrayArgs.indexOf(i);switch(n.argTypes[i]){case"offset":var c=n.offsetArgIndex.indexOf(i);u=n.offsetArgs[c].array,p="+q"+c;case"array":p="p"+u+p;var f="l"+i,l="a"+u;if(0===n.arrayBlockIndices[u])1===t.count?"generic"===e[u]?t.lvalue?(o.push(["var ",f,"=",l,".get(",p,")"].join("")),s=s.replace(h,f),a.push([l,".set(",p,",",f,")"].join(""))):s=s.replace(h,[l,".get(",p,")"].join("")):s=s.replace(h,[l,"[",p,"]"].join("")):"generic"===e[u]?(o.push(["var ",f,"=",l,".get(",p,")"].join("")),s=s.replace(h,f),t.lvalue&&a.push([l,".set(",p,",",f,")"].join(""))):(o.push(["var ",f,"=",l,"[",p,"]"].join("")),s=s.replace(h,f),t.lvalue&&a.push([l,"[",p,"]=",f].join("")));else{for(var g=[t.name],j=[p],d=0;d<Math.abs(n.arrayBlockIndices[u]);d++)g.push("\\s*\\[([^\\]]+)\\]"),j.push("$"+(d+1)+"*t"+u+"b"+d);if(h=new RegExp(g.join(""),"g"),p=j.join("+"),"generic"===e[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");s=s.replace(h,[l,"[",p,"]"].join(""))}break;case"scalar":s=s.replace(h,"Y"+n.scalarArgs.indexOf(i));break;case"index":s=s.replace(h,"index");break;case"shape":s=s.replace(h,"shape")}}}return[o.join("\n"),s,a.join("\n")].join("\n").trim()}function a(r){for(var n=new Array(r.length),e=!0,s=0;s<r.length;++s){var o=r[s],a=o.match(/\d+/);a=a?a[0]:"",0===o.charAt(0)?n[s]="u"+o.charAt(1)+a:n[s]=o.charAt(0)+a,s>0&&(e=e&&n[s]===n[s-1])}return e?n[0]:n.join("")}function i(i,t){for(var h=t[1].length-Math.abs(i.arrayBlockIndices[0])|0,p=new Array(i.arrayArgs.length),u=new Array(i.arrayArgs.length),c=0;c<i.arrayArgs.length;++c)u[c]=t[2*c],p[c]=t[2*c+1];var f=[],l=[],g=[],j=[],d=[];for(c=0;c<i.arrayArgs.length;++c){i.arrayBlockIndices[c]<0?(g.push(0),j.push(h),f.push(h),l.push(h+i.arrayBlockIndices[c])):(g.push(i.arrayBlockIndices[c]),j.push(i.arrayBlockIndices[c]+h),f.push(0),l.push(i.arrayBlockIndices[c]));for(var v=[],y=0;y<p[c].length;y++)g[c]<=p[c][y]&&p[c][y]<j[c]&&v.push(p[c][y]-g[c]);d.push(v)}var A=["SS"],b=["'use strict'"],x=[];for(y=0;y<h;++y)x.push(["s",y,"=SS[",y,"]"].join(""));for(c=0;c<i.arrayArgs.length;++c){A.push("a"+c),A.push("t"+c),A.push("p"+c);for(y=0;y<h;++y)x.push(["t",c,"p",y,"=t",c,"[",g[c]+y,"]"].join(""));for(y=0;y<Math.abs(i.arrayBlockIndices[c]);++y)x.push(["t",c,"b",y,"=t",c,"[",f[c]+y,"]"].join(""))}for(c=0;c<i.scalarArgs.length;++c)A.push("Y"+c);if(i.shapeArgs.length>0&&x.push("shape=SS.slice(0)"),i.indexArgs.length>0){var k=new Array(h);for(c=0;c<h;++c)k[c]="0";x.push(["index=[",k.join(","),"]"].join(""))}for(c=0;c<i.offsetArgs.length;++c){var w=i.offsetArgs[c],I=[];for(y=0;y<w.offset.length;++y)0!==w.offset[y]&&(1===w.offset[y]?I.push(["t",w.array,"p",y].join("")):I.push([w.offset[y],"*t",w.array,"p",y].join("")));0===I.length?x.push("q"+c+"=0"):x.push(["q",c,"=",I.join("+")].join(""))}var m=r([].concat(i.pre.thisVars).concat(i.body.thisVars).concat(i.post.thisVars));(x=x.concat(m)).length>0&&b.push("var "+x.join(","));for(c=0;c<i.arrayArgs.length;++c)b.push("p"+c+"|=0");i.pre.body.length>3&&b.push(o(i.pre,i,u));var B=o(i.body,i,u),S=s(d);S<h?b.push(e(S,d[0],i,B)):b.push(n(d[0],i,B)),i.post.body.length>3&&b.push(o(i.post,i,u)),i.debug&&console.log("-----Generated cwise routine for ",t,":\n"+b.join("\n")+"\n----------");var q=[i.funcName||"unnamed","_cwise_loop_",p[0].join("s"),"m",S,a(u)].join("");return new Function(["function ",q,"(",A.join(","),"){",b.join("\n"),"} return ",q].join(""))()}module.exports=i;
},{"uniq":336}],45:[function(require,module,exports) {
"use strict";var r=require("./compile.js");function a(a){var s=["'use strict'","var CACHED={}"],e=[],n=a.funcName+"_cwise_thunk";s.push(["return function ",n,"(",a.shimArgs.join(","),"){"].join(""));for(var o=[],h=[],i=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),a.arrayBlockIndices[0]<0?","+a.arrayBlockIndices[0]+")":")"].join("")],p=[],t=[],c=0;c<a.arrayArgs.length;++c){var u=a.arrayArgs[c];e.push(["t",u,"=array",u,".dtype,","r",u,"=array",u,".order"].join("")),o.push("t"+u),o.push("r"+u),h.push("t"+u),h.push("r"+u+".join()"),i.push("array"+u+".data"),i.push("array"+u+".stride"),i.push("array"+u+".offset|0"),c>0&&(p.push("array"+a.arrayArgs[0]+".shape.length===array"+u+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[c]))),t.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+u+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[c])+"]"))}a.arrayArgs.length>1&&(s.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),s.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),s.push("if (!("+t.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),s.push("}"));for(c=0;c<a.scalarArgs.length;++c)i.push("scalar"+a.scalarArgs[c]);return e.push(["type=[",h.join(","),"].join()"].join("")),e.push("proc=CACHED[type]"),s.push("var "+e.join(",")),s.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",i.join(","),")}"].join("")),a.debug&&console.log("-----Generated thunk:\n"+s.join("\n")+"\n----------"),new Function("compile",s.join("\n"))(r.bind(void 0,a))}module.exports=a;
},{"./compile.js":62}],26:[function(require,module,exports) {
"use strict";var r=require("./lib/thunk.js");function e(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function s(s){var o=new e;o.pre=s.pre,o.body=s.body,o.post=s.post;var a=s.args.slice(0);o.argTypes=a;for(var t=0;t<a.length;++t){var n=a[t];if("array"===n||"object"==typeof n&&n.blockIndices){if(o.argTypes[t]="array",o.arrayArgs.push(t),o.arrayBlockIndices.push(n.blockIndices?n.blockIndices:0),o.shimArgs.push("array"+t),t<o.pre.args.length&&o.pre.args[t].count>0)throw new Error("cwise: pre() block may not reference array args");if(t<o.post.args.length&&o.post.args[t].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===n)o.scalarArgs.push(t),o.shimArgs.push("scalar"+t);else if("index"===n){if(o.indexArgs.push(t),t<o.pre.args.length&&o.pre.args[t].count>0)throw new Error("cwise: pre() block may not reference array index");if(t<o.body.args.length&&o.body.args[t].lvalue)throw new Error("cwise: body() block may not write to array index");if(t<o.post.args.length&&o.post.args[t].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===n){if(o.shapeArgs.push(t),t<o.pre.args.length&&o.pre.args[t].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(t<o.body.args.length&&o.body.args[t].lvalue)throw new Error("cwise: body() block may not write to array shape");if(t<o.post.args.length&&o.post.args[t].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof n||!n.offset)throw new Error("cwise: Unknown argument type "+a[t]);o.argTypes[t]="offset",o.offsetArgs.push({array:n.array,offset:n.offset}),o.offsetArgIndex.push(t)}}if(o.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(o.pre.args.length>a.length)throw new Error("cwise: Too many arguments in pre() block");if(o.body.args.length>a.length)throw new Error("cwise: Too many arguments in body() block");if(o.post.args.length>a.length)throw new Error("cwise: Too many arguments in post() block");return o.debug=!!s.printCode||!!s.debug,o.funcName=s.funcName||"cwise",o.blockSize=s.blockSize||64,r(o)}module.exports=s;
},{"./lib/thunk.js":45}],18:[function(require,module,exports) {
"use strict";var a=require("cwise-compiler"),r={body:"",args:[],thisVars:[],localVars:[]};function s(a){if(!a)return r;for(var s=0;s<a.args.length;++s){var t=a.args[s];a.args[s]=0===s?{name:t,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:{name:t,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function t(r){return a({args:r.args,pre:s(r.pre),body:s(r.body),post:s(r.proc),funcName:r.funcName})}function i(a){for(var r=[],s=0;s<a.args.length;++s)r.push("a"+s);return new Function("P",["return function ",a.funcName,"_ndarrayops(",r.join(","),") {P(",r.join(","),");return a0}"].join(""))(t(a))}var e={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in e){var r=e[a];exports[a]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:a}),exports[a+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:a+"eq"}),exports[a+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:a+"s"}),exports[a+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:a+"seq"})}}();var o={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in o){var r=o[a];exports[a]=i({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:a}),exports[a+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var n={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in n){var r=n[a];exports[a]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:a}),exports[a+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:a+"s"}),exports[a+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:a+"eq"}),exports[a+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var _=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<_.length;++a){var r=_[a];exports[r]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),exports[r+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var l=["max","min","atan2","pow"];!function(){for(var a=0;a<l.length;++a){var r=l[a];exports[r]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),exports[r+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),exports[r+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),exports[r+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var h=["atan2","pow"];!function(){for(var a=0;a<h.length;++a){var r=h[a];exports[r+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),exports[r+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),exports[r+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),exports[r+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),exports.any=a({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),exports.all=a({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),exports.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),exports.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),exports.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),exports.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),exports.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),exports.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),exports.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),exports.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),exports.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),exports.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),exports.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),exports.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),exports.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),exports.equals=a({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"});
},{"cwise-compiler":26}],9:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),r=e.__importDefault(require("ndarray")),n=e.__importDefault(require("ndarray-ops"));function t(e){var t=e.data,i=e.width,u=e.height,a=r.default(new Float32Array(t),[i,u,4]),l=r.default(new Float32Array(i*u*3),[i,u,3]);return n.default.divseq(a,255),n.default.assign(l.pick(null,null,0),a.pick(null,null,0)),n.default.assign(l.pick(null,null,1),a.pick(null,null,1)),n.default.assign(l.pick(null,null,2),a.pick(null,null,2)),l.data}exports.preprocess=t;var i=function(){function e(e){this.kerasModel=e,this._running=!1}return Object.defineProperty(e.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),e.prototype.ready=function(){return this.kerasModel.ready()},e.prototype.predict=function(e){var r,n=this;return this._running?Promise.reject(new Error("already predicting")):(this._running=!0,this.kerasModel.predict((r={},r[this.kerasModel.inputLayerNames[0]]=new Float32Array(e),r)).then(function(e){return n._running=!1,e[n.kerasModel.outputLayerNames[0]][1]},function(e){return n._running=!1,Promise.reject(e)}))},e}();exports.KerasModelWrapper=i;
},{"tslib":14,"ndarray":17,"ndarray-ops":18}],10:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=299;function e(t){var e=new FaceDetector,a=5*Math.PI/180,r=Math.pow(Math.pow(t.width,2)+Math.pow(t.height,2),.5);return Promise.all(Array.from(Array(19)).map(function(n,o){var c=Math.round(o/2)*(o%2==0?1:-1)*a,i=document.createElement("canvas");i.width=r,i.height=r;var u=i.getContext("2d");return u.translate(r/2,r/2),u.rotate(c),u.drawImage(t,-t.width/2,-t.height/2),e.detect(i).then(function(t){return{rotationCanvas:i,faces:t.filter(function(t){return 2===t.landmarks.filter(function(t){return"eye"===t.type}).length})}})})).then(function(t){return t.reduce(function(t,e){return e.faces.length>t.faces.length?e:t},{faces:[]})}).then(function(t){var e=t.rotationCanvas,a=t.faces;return e?Promise.all(a.map(function(t){return n(e,t).canvas.toDataURL()})):[]})}function a(e){return(new FaceDetector).detect(e).then(function(a){return a.map(function(a){var r=n(e,a).ctx;return{boundingBox:a.boundingBox,landmarks:a.landmarks,imageData:r.getImageData(0,0,t,t)}})})}function n(e,a){var n=a.boundingBox,r=a.landmarks,o=n.x,c=n.y,i=n.width,u=n.height;if(i!==u)throw new Error("FaceDetector unexpectedly detected a rectangle which is not a square");var h=r.filter(function(t){return"eye"===t.type}),s=h[0],d=h[1],l=Math.atan((s.location.y-d.location.y)/(s.location.x-d.location.x)),f=Math.abs(Math.cos(l))+Math.abs(Math.sin(l)),g=i*f,m=t*f,v=document.createElement("canvas"),w=v.getContext("2d");return v.width=t,v.height=t,w.translate(t/2,t/2),w.rotate(-l),w.drawImage(e,o-(g-i)/2,c-(g-u)/2,g,g,-m/2,-m/2,m,m),{canvas:v,ctx:w}}exports.detectFacesDataURL=e,exports.detectFacesImageData=a;
},{}],397:[function(require,module,exports) {

var e=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e);
},{}],368:[function(require,module,exports) {
var r={}.hasOwnProperty;module.exports=function(e,n){return r.call(e,n)};
},{}],396:[function(require,module,exports) {
module.exports=function(r){try{return!!r()}catch(r){return!0}};
},{}],369:[function(require,module,exports) {
module.exports=!require("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a});
},{"./_fails":396}],334:[function(require,module,exports) {
var e=module.exports={version:"2.5.3"};"number"==typeof __e&&(__e=e);
},{}],382:[function(require,module,exports) {
module.exports=function(o){return"object"==typeof o?null!==o:"function"==typeof o};
},{}],381:[function(require,module,exports) {
var r=require("./_is-object");module.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e};
},{"./_is-object":382}],552:[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_global").document,t=e(r)&&e(r.createElement);module.exports=function(e){return t?r.createElement(e):{}};
},{"./_is-object":382,"./_global":397}],553:[function(require,module,exports) {
module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a});
},{"./_descriptors":369,"./_fails":396,"./_dom-create":552}],384:[function(require,module,exports) {
var t=require("./_is-object");module.exports=function(r,e){if(!t(r))return r;var o,n;if(e&&"function"==typeof(o=r.toString)&&!t(n=o.call(r)))return n;if("function"==typeof(o=r.valueOf)&&!t(n=o.call(r)))return n;if(!e&&"function"==typeof(o=r.toString)&&!t(n=o.call(r)))return n;throw TypeError("Can't convert object to primitive value")};
},{"./_is-object":382}],389:[function(require,module,exports) {
var e=require("./_an-object"),r=require("./_ie8-dom-define"),t=require("./_to-primitive"),i=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(o,n,u){if(e(o),n=t(n,!0),e(u),r)try{return i(o,n,u)}catch(e){}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");return"value"in u&&(o[n]=u.value),o};
},{"./_an-object":381,"./_ie8-dom-define":553,"./_to-primitive":384,"./_descriptors":369}],385:[function(require,module,exports) {
module.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}};
},{}],395:[function(require,module,exports) {
var r=require("./_object-dp"),e=require("./_property-desc");module.exports=require("./_descriptors")?function(t,u,o){return r.f(t,u,e(1,o))}:function(r,e,t){return r[e]=t,r};
},{"./_object-dp":389,"./_property-desc":385,"./_descriptors":369}],375:[function(require,module,exports) {
var o=0,t=Math.random();module.exports=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++o+t).toString(36))};
},{}],371:[function(require,module,exports) {

var e=require("./_global"),r=require("./_hide"),t=require("./_has"),i=require("./_uid")("src"),n="toString",o=Function[n],u=(""+o).split(n);require("./_core").inspectSource=function(e){return o.call(e)},(module.exports=function(n,o,c,l){var a="function"==typeof c;a&&(t(c,"name")||r(c,"name",o)),n[o]!==c&&(a&&(t(c,i)||r(c,i,n[o]?""+n[o]:u.join(String(o)))),n===e?n[o]=c:l?n[o]?n[o]=c:r(n,o,c):(delete n[o],r(n,o,c)))})(Function.prototype,n,function(){return"function"==typeof this&&this[i]||o.call(this)});
},{"./_global":397,"./_hide":395,"./_has":368,"./_uid":375,"./_core":334}],443:[function(require,module,exports) {
module.exports=function(o){if("function"!=typeof o)throw TypeError(o+" is not a function!");return o};
},{}],436:[function(require,module,exports) {
var r=require("./_a-function");module.exports=function(n,t,u){if(r(n),void 0===t)return n;switch(u){case 1:return function(r){return n.call(t,r)};case 2:return function(r,u){return n.call(t,r,u)};case 3:return function(r,u,e){return n.call(t,r,u,e)}}return function(){return n.apply(t,arguments)}};
},{"./_a-function":443}],370:[function(require,module,exports) {

var e=require("./_global"),r=require("./_core"),o=require("./_hide"),i=require("./_redefine"),u=require("./_ctx"),n="prototype",t=function(c,f,l){var q,_,a,d,p=c&t.F,v=c&t.G,F=c&t.S,x=c&t.P,y=c&t.B,B=v?e:F?e[f]||(e[f]={}):(e[f]||{})[n],G=v?r:r[f]||(r[f]={}),P=G[n]||(G[n]={});for(q in v&&(l=f),l)a=((_=!p&&B&&void 0!==B[q])?B:l)[q],d=y&&_?u(a,e):x&&"function"==typeof a?u(Function.call,a):a,B&&i(B,q,a,c&t.U),G[q]!=a&&o(G,q,d),x&&P[q]!=a&&(P[q]=a)};e.core=r,t.F=1,t.G=2,t.S=4,t.P=8,t.B=16,t.W=32,t.U=64,t.R=128,module.exports=t;
},{"./_global":397,"./_core":334,"./_hide":395,"./_redefine":371,"./_ctx":436}],372:[function(require,module,exports) {
var e=require("./_uid")("meta"),r=require("./_is-object"),t=require("./_has"),n=require("./_object-dp").f,i=0,u=Object.isExtensible||function(){return!0},f=!require("./_fails")(function(){return u(Object.preventExtensions({}))}),o=function(r){n(r,e,{value:{i:"O"+ ++i,w:{}}})},s=function(n,i){if(!r(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!t(n,e)){if(!u(n))return"F";if(!i)return"E";o(n)}return n[e].i},c=function(r,n){if(!t(r,e)){if(!u(r))return!0;if(!n)return!1;o(r)}return r[e].w},E=function(r){return f&&a.NEED&&u(r)&&!t(r,e)&&o(r),r},a=module.exports={KEY:e,NEED:!1,fastKey:s,getWeak:c,onFreeze:E};
},{"./_uid":375,"./_is-object":382,"./_has":368,"./_object-dp":389,"./_fails":396}],373:[function(require,module,exports) {

var r=require("./_global"),e="__core-js_shared__",_=r[e]||(r[e]={});module.exports=function(r){return _[r]||(_[r]={})};
},{"./_global":397}],376:[function(require,module,exports) {
var e=require("./_shared")("wks"),r=require("./_uid"),o=require("./_global").Symbol,u="function"==typeof o,i=module.exports=function(i){return e[i]||(e[i]=u&&o[i]||(u?o:r)("Symbol."+i))};i.store=e;
},{"./_shared":373,"./_uid":375,"./_global":397}],374:[function(require,module,exports) {
var e=require("./_object-dp").f,r=require("./_has"),o=require("./_wks")("toStringTag");module.exports=function(t,u,i){t&&!r(t=i?t:t.prototype,o)&&e(t,o,{configurable:!0,value:u})};
},{"./_object-dp":389,"./_has":368,"./_wks":376}],377:[function(require,module,exports) {
exports.f=require("./_wks");
},{"./_wks":376}],394:[function(require,module,exports) {
module.exports=!1;
},{}],378:[function(require,module,exports) {

var r=require("./_global"),e=require("./_core"),o=require("./_library"),i=require("./_wks-ext"),l=require("./_object-dp").f;module.exports=function(u){var a=e.Symbol||(e.Symbol=o?{}:r.Symbol||{});"_"==u.charAt(0)||u in a||l(a,u,{value:i.f(u)})};
},{"./_global":397,"./_core":334,"./_library":394,"./_wks-ext":377,"./_object-dp":389}],409:[function(require,module,exports) {
var r={}.toString;module.exports=function(t){return r.call(t).slice(8,-1)};
},{}],446:[function(require,module,exports) {
var e=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(r){return"String"==e(r)?r.split(""):Object(r)};
},{"./_cof":409}],485:[function(require,module,exports) {
module.exports=function(o){if(void 0==o)throw TypeError("Can't call method on  "+o);return o};
},{}],383:[function(require,module,exports) {
var e=require("./_iobject"),r=require("./_defined");module.exports=function(i){return e(r(i))};
},{"./_iobject":446,"./_defined":485}],412:[function(require,module,exports) {
var o=Math.ceil,r=Math.floor;module.exports=function(t){return isNaN(t=+t)?0:(t>0?r:o)(t)};
},{}],421:[function(require,module,exports) {
var e=require("./_to-integer"),r=Math.min;module.exports=function(t){return t>0?r(e(t),9007199254740991):0};
},{"./_to-integer":412}],420:[function(require,module,exports) {
var e=require("./_to-integer"),r=Math.max,t=Math.min;module.exports=function(n,a){return(n=e(n))<0?r(n+a,0):t(n,a)};
},{"./_to-integer":412}],449:[function(require,module,exports) {
var e=require("./_to-iobject"),r=require("./_to-length"),t=require("./_to-absolute-index");module.exports=function(n){return function(i,o,u){var f,l=e(i),a=r(l.length),c=t(u,a);if(n&&o!=o){for(;a>c;)if((f=l[c++])!=f)return!0}else for(;a>c;c++)if((n||c in l)&&l[c]===o)return n||c||0;return!n&&-1}};
},{"./_to-iobject":383,"./_to-length":421,"./_to-absolute-index":420}],551:[function(require,module,exports) {
var e=require("./_shared")("keys"),r=require("./_uid");module.exports=function(u){return e[u]||(e[u]=r(u))};
},{"./_shared":373,"./_uid":375}],554:[function(require,module,exports) {
var r=require("./_has"),e=require("./_to-iobject"),u=require("./_array-includes")(!1),i=require("./_shared-key")("IE_PROTO");module.exports=function(o,a){var n,s=e(o),t=0,h=[];for(n in s)n!=i&&r(s,n)&&h.push(n);for(;a.length>t;)r(s,n=a[t++])&&(~u(h,n)||h.push(n));return h};
},{"./_has":368,"./_to-iobject":383,"./_array-includes":449,"./_shared-key":551}],550:[function(require,module,exports) {
module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
},{}],390:[function(require,module,exports) {
var e=require("./_object-keys-internal"),r=require("./_enum-bug-keys");module.exports=Object.keys||function(u){return e(u,r)};
},{"./_object-keys-internal":554,"./_enum-bug-keys":550}],393:[function(require,module,exports) {
exports.f=Object.getOwnPropertySymbols;
},{}],392:[function(require,module,exports) {
exports.f={}.propertyIsEnumerable;
},{}],379:[function(require,module,exports) {
var e=require("./_object-keys"),r=require("./_object-gops"),o=require("./_object-pie");module.exports=function(t){var u=e(t),i=r.f;if(i)for(var c,f=i(t),a=o.f,l=0;f.length>l;)a.call(t,c=f[l++])&&u.push(c);return u};
},{"./_object-keys":390,"./_object-gops":393,"./_object-pie":392}],380:[function(require,module,exports) {
var r=require("./_cof");module.exports=Array.isArray||function(e){return"Array"==r(e)};
},{"./_cof":409}],398:[function(require,module,exports) {
var e=require("./_object-dp"),r=require("./_an-object"),t=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function(o,i){r(o);for(var u,c=t(i),n=c.length,s=0;n>s;)e.f(o,u=c[s++],i[u]);return o};
},{"./_object-dp":389,"./_an-object":381,"./_object-keys":390,"./_descriptors":369}],442:[function(require,module,exports) {
var e=require("./_global").document;module.exports=e&&e.documentElement;
},{"./_global":397}],386:[function(require,module,exports) {
var e=require("./_an-object"),r=require("./_object-dps"),t=require("./_enum-bug-keys"),n=require("./_shared-key")("IE_PROTO"),o=function(){},i="prototype",u=function(){var e,r=require("./_dom-create")("iframe"),n=t.length;for(r.style.display="none",require("./_html").appendChild(r),r.src="javascript:",(e=r.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u[i][t[n]];return u()};module.exports=Object.create||function(t,c){var a;return null!==t?(o[i]=e(t),a=new o,o[i]=null,a[n]=t):a=u(),void 0===c?a:r(a,c)};
},{"./_an-object":381,"./_object-dps":398,"./_enum-bug-keys":550,"./_shared-key":551,"./_dom-create":552,"./_html":442}],391:[function(require,module,exports) {
var e=require("./_object-keys-internal"),r=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(t){return e(t,r)};
},{"./_object-keys-internal":554,"./_enum-bug-keys":550}],387:[function(require,module,exports) {
var e=require("./_to-iobject"),t=require("./_object-gopn").f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],n=function(e){try{return t(e)}catch(e){return r.slice()}};module.exports.f=function(c){return r&&"[object Window]"==o.call(c)?n(c):t(e(c))};
},{"./_to-iobject":383,"./_object-gopn":391}],388:[function(require,module,exports) {
var e=require("./_object-pie"),r=require("./_property-desc"),i=require("./_to-iobject"),t=require("./_to-primitive"),o=require("./_has"),c=require("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?u:function(p,q){if(p=i(p),q=t(q,!0),c)try{return u(p,q)}catch(e){}if(o(p,q))return r(!e.f.call(p,q),p[q])};
},{"./_object-pie":392,"./_property-desc":385,"./_to-iobject":383,"./_to-primitive":384,"./_has":368,"./_ie8-dom-define":553,"./_descriptors":369}],138:[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_has"),t=require("./_descriptors"),i=require("./_export"),n=require("./_redefine"),o=require("./_meta").KEY,u=require("./_fails"),s=require("./_shared"),f=require("./_set-to-string-tag"),a=require("./_uid"),c=require("./_wks"),l=require("./_wks-ext"),p=require("./_wks-define"),b=require("./_enum-keys"),h=require("./_is-array"),y=require("./_an-object"),_=require("./_is-object"),q=require("./_to-iobject"),g=require("./_to-primitive"),m=require("./_property-desc"),v=require("./_object-create"),d=require("./_object-gopn-ext"),S=require("./_object-gopd"),j=require("./_object-dp"),O=require("./_object-keys"),k=S.f,w=j.f,P=d.f,E=e.Symbol,F=e.JSON,N=F&&F.stringify,J="prototype",x=c("_hidden"),I=c("toPrimitive"),T={}.propertyIsEnumerable,C=s("symbol-registry"),M=s("symbols"),D=s("op-symbols"),G=Object[J],K="function"==typeof E,Q=e.QObject,W=!Q||!Q[J]||!Q[J].findChild,Y=t&&u(function(){return 7!=v(w({},"a",{get:function(){return w(this,"a",{value:7}).a}})).a})?function(e,r,t){var i=k(G,r);i&&delete G[r],w(e,r,t),i&&e!==G&&w(G,r,i)}:w,z=function(e){var r=M[e]=v(E[J]);return r._k=e,r},A=K&&"symbol"==typeof E.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof E},B=function(e,t,i){return e===G&&B(D,t,i),y(e),t=g(t,!0),y(i),r(M,t)?(i.enumerable?(r(e,x)&&e[x][t]&&(e[x][t]=!1),i=v(i,{enumerable:m(0,!1)})):(r(e,x)||w(e,x,m(1,{})),e[x][t]=!0),Y(e,t,i)):w(e,t,i)},H=function(e,r){y(e);for(var t,i=b(r=q(r)),n=0,o=i.length;o>n;)B(e,t=i[n++],r[t]);return e},L=function(e,r){return void 0===r?v(e):H(v(e),r)},R=function(e){var t=T.call(this,e=g(e,!0));return!(this===G&&r(M,e)&&!r(D,e))&&(!(t||!r(this,e)||!r(M,e)||r(this,x)&&this[x][e])||t)},U=function(e,t){if(e=q(e),t=g(t,!0),e!==G||!r(M,t)||r(D,t)){var i=k(e,t);return!i||!r(M,t)||r(e,x)&&e[x][t]||(i.enumerable=!0),i}},V=function(e){for(var t,i=P(q(e)),n=[],u=0;i.length>u;)r(M,t=i[u++])||t==x||t==o||n.push(t);return n},X=function(e){for(var t,i=e===G,n=P(i?D:q(e)),o=[],u=0;n.length>u;)!r(M,t=n[u++])||i&&!r(G,t)||o.push(M[t]);return o};K||(n((E=function(){if(this instanceof E)throw TypeError("Symbol is not a constructor!");var e=a(arguments.length>0?arguments[0]:void 0),i=function(t){this===G&&i.call(D,t),r(this,x)&&r(this[x],e)&&(this[x][e]=!1),Y(this,e,m(1,t))};return t&&W&&Y(G,e,{configurable:!0,set:i}),z(e)})[J],"toString",function(){return this._k}),S.f=U,j.f=B,require("./_object-gopn").f=d.f=V,require("./_object-pie").f=R,require("./_object-gops").f=X,t&&!require("./_library")&&n(G,"propertyIsEnumerable",R,!0),l.f=function(e){return z(c(e))}),i(i.G+i.W+i.F*!K,{Symbol:E});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),$=0;Z.length>$;)c(Z[$++]);for(var ee=O(c.store),re=0;ee.length>re;)p(ee[re++]);i(i.S+i.F*!K,"Symbol",{for:function(e){return r(C,e+="")?C[e]:C[e]=E(e)},keyFor:function(e){if(!A(e))throw TypeError(e+" is not a symbol!");for(var r in C)if(C[r]===e)return r},useSetter:function(){W=!0},useSimple:function(){W=!1}}),i(i.S+i.F*!K,"Object",{create:L,defineProperty:B,defineProperties:H,getOwnPropertyDescriptor:U,getOwnPropertyNames:V,getOwnPropertySymbols:X}),F&&i(i.S+i.F*(!K||u(function(){var e=E();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){for(var r,t,i=[e],n=1;arguments.length>n;)i.push(arguments[n++]);if(t=r=i[1],(_(r)||void 0!==e)&&!A(e))return h(r)||(r=function(e,r){if("function"==typeof t&&(r=t.call(this,e,r)),!A(r))return r}),i[1]=r,N.apply(F,i)}}),E[J][I]||require("./_hide")(E[J],I,E[J].valueOf),f(E,"Symbol"),f(Math,"Math",!0),f(e.JSON,"JSON",!0);
},{"./_global":397,"./_has":368,"./_descriptors":369,"./_export":370,"./_redefine":371,"./_meta":372,"./_fails":396,"./_shared":373,"./_set-to-string-tag":374,"./_uid":375,"./_wks":376,"./_wks-ext":377,"./_wks-define":378,"./_enum-keys":379,"./_is-array":380,"./_an-object":381,"./_is-object":382,"./_to-iobject":383,"./_to-primitive":384,"./_property-desc":385,"./_object-create":386,"./_object-gopn-ext":387,"./_object-gopd":388,"./_object-dp":389,"./_object-keys":390,"./_object-gopn":391,"./_object-pie":392,"./_object-gops":393,"./_library":394,"./_hide":395}],139:[function(require,module,exports) {
var e=require("./_export");e(e.S,"Object",{create:require("./_object-create")});
},{"./_export":370,"./_object-create":386}],140:[function(require,module,exports) {
var e=require("./_export");e(e.S+e.F*!require("./_descriptors"),"Object",{defineProperty:require("./_object-dp").f});
},{"./_export":370,"./_descriptors":369,"./_object-dp":389}],141:[function(require,module,exports) {
var e=require("./_export");e(e.S+e.F*!require("./_descriptors"),"Object",{defineProperties:require("./_object-dps")});
},{"./_export":370,"./_descriptors":369,"./_object-dps":398}],399:[function(require,module,exports) {
var e=require("./_export"),r=require("./_core"),t=require("./_fails");module.exports=function(c,i){var o=(r.Object||{})[c]||Object[c],u={};u[c]=i(o),e(e.S+e.F*t(function(){o(1)}),"Object",u)};
},{"./_export":370,"./_core":334,"./_fails":396}],142:[function(require,module,exports) {
var r=require("./_to-iobject"),e=require("./_object-gopd").f;require("./_object-sap")("getOwnPropertyDescriptor",function(){return function(t,o){return e(r(t),o)}});
},{"./_to-iobject":383,"./_object-gopd":388,"./_object-sap":399}],400:[function(require,module,exports) {
var e=require("./_defined");module.exports=function(r){return Object(e(r))};
},{"./_defined":485}],401:[function(require,module,exports) {
var t=require("./_has"),e=require("./_to-object"),o=require("./_shared-key")("IE_PROTO"),r=Object.prototype;module.exports=Object.getPrototypeOf||function(c){return c=e(c),t(c,o)?c[o]:"function"==typeof c.constructor&&c instanceof c.constructor?c.constructor.prototype:c instanceof Object?r:null};
},{"./_has":368,"./_to-object":400,"./_shared-key":551}],143:[function(require,module,exports) {
var e=require("./_to-object"),r=require("./_object-gpo");require("./_object-sap")("getPrototypeOf",function(){return function(t){return r(e(t))}});
},{"./_to-object":400,"./_object-gpo":401,"./_object-sap":399}],144:[function(require,module,exports) {
var e=require("./_to-object"),r=require("./_object-keys");require("./_object-sap")("keys",function(){return function(t){return r(e(t))}});
},{"./_to-object":400,"./_object-keys":390,"./_object-sap":399}],151:[function(require,module,exports) {
require("./_object-sap")("getOwnPropertyNames",function(){return require("./_object-gopn-ext").f});
},{"./_object-sap":399,"./_object-gopn-ext":387}],145:[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_meta").onFreeze;require("./_object-sap")("freeze",function(n){return function(t){return n&&e(t)?n(r(t)):t}});
},{"./_is-object":382,"./_meta":372,"./_object-sap":399}],146:[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_meta").onFreeze;require("./_object-sap")("seal",function(n){return function(t){return n&&e(t)?n(r(t)):t}});
},{"./_is-object":382,"./_meta":372,"./_object-sap":399}],147:[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_meta").onFreeze;require("./_object-sap")("preventExtensions",function(n){return function(t){return n&&e(t)?n(r(t)):t}});
},{"./_is-object":382,"./_meta":372,"./_object-sap":399}],148:[function(require,module,exports) {
var r=require("./_is-object");require("./_object-sap")("isFrozen",function(e){return function(n){return!r(n)||!!e&&e(n)}});
},{"./_is-object":382,"./_object-sap":399}],149:[function(require,module,exports) {
var e=require("./_is-object");require("./_object-sap")("isSealed",function(r){return function(i){return!e(i)||!!r&&r(i)}});
},{"./_is-object":382,"./_object-sap":399}],150:[function(require,module,exports) {
var e=require("./_is-object");require("./_object-sap")("isExtensible",function(r){return function(i){return!!e(i)&&(!r||r(i))}});
},{"./_is-object":382,"./_object-sap":399}],402:[function(require,module,exports) {
"use strict";var e=require("./_object-keys"),r=require("./_object-gops"),t=require("./_object-pie"),o=require("./_to-object"),i=require("./_iobject"),c=Object.assign;module.exports=!c||require("./_fails")(function(){var e={},r={},t=Symbol(),o="abcdefghijklmnopqrst";return e[t]=7,o.split("").forEach(function(e){r[e]=e}),7!=c({},e)[t]||Object.keys(c({},r)).join("")!=o})?function(c,n){for(var u=o(c),s=arguments.length,a=1,f=r.f,b=t.f;s>a;)for(var j,l=i(arguments[a++]),q=f?e(l).concat(f(l)):e(l),_=q.length,g=0;_>g;)b.call(l,j=q[g++])&&(u[j]=l[j]);return u}:c;
},{"./_object-keys":390,"./_object-gops":393,"./_object-pie":392,"./_to-object":400,"./_iobject":446,"./_fails":396}],152:[function(require,module,exports) {
var e=require("./_export");e(e.S+e.F,"Object",{assign:require("./_object-assign")});
},{"./_export":370,"./_object-assign":402}],403:[function(require,module,exports) {
module.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};
},{}],153:[function(require,module,exports) {
var e=require("./_export");e(e.S,"Object",{is:require("./_same-value")});
},{"./_export":370,"./_same-value":403}],404:[function(require,module,exports) {
var t=require("./_is-object"),e=require("./_an-object"),r=function(r,o){if(e(r),!t(o)&&null!==o)throw TypeError(o+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{(o=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,c){return r(t,c),e?t.__proto__=c:o(t,c),t}}({},!1):void 0),check:r};
},{"./_is-object":382,"./_an-object":381,"./_ctx":436,"./_object-gopd":388}],154:[function(require,module,exports) {
var e=require("./_export");e(e.S,"Object",{setPrototypeOf:require("./_set-proto").set});
},{"./_export":370,"./_set-proto":404}],405:[function(require,module,exports) {
var e=require("./_cof"),t=require("./_wks")("toStringTag"),n="Arguments"==e(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(e){}};module.exports=function(u){var o,c,i;return void 0===u?"Undefined":null===u?"Null":"string"==typeof(c=r(o=Object(u),t))?c:n?e(o):"Object"==(i=e(o))&&"function"==typeof o.callee?"Arguments":i};
},{"./_cof":409,"./_wks":376}],155:[function(require,module,exports) {
"use strict";var e=require("./_classof"),r={};r[require("./_wks")("toStringTag")]="z",r+""!="[object z]"&&require("./_redefine")(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0);
},{"./_classof":405,"./_wks":376,"./_redefine":371}],555:[function(require,module,exports) {
module.exports=function(e,r,l){var a=void 0===l;switch(r.length){case 0:return a?e():e.call(l);case 1:return a?e(r[0]):e.call(l,r[0]);case 2:return a?e(r[0],r[1]):e.call(l,r[0],r[1]);case 3:return a?e(r[0],r[1],r[2]):e.call(l,r[0],r[1],r[2]);case 4:return a?e(r[0],r[1],r[2],r[3]):e.call(l,r[0],r[1],r[2],r[3])}return e.apply(l,r)};
},{}],406:[function(require,module,exports) {
"use strict";var n=require("./_a-function"),t=require("./_is-object"),r=require("./_invoke"),e=[].slice,i={},o=function(n,t,r){if(!(t in i)){for(var e=[],o=0;o<t;o++)e[o]="a["+o+"]";i[t]=Function("F,a","return new F("+e.join(",")+")")}return i[t](n,r)};module.exports=Function.bind||function(i){var u=n(this),c=e.call(arguments,1),a=function(){var n=c.concat(e.call(arguments));return this instanceof a?o(u,n.length,n):r(u,n,i)};return t(u.prototype)&&(a.prototype=u.prototype),a};
},{"./_a-function":443,"./_is-object":382,"./_invoke":555}],156:[function(require,module,exports) {
var r=require("./_export");r(r.P,"Function",{bind:require("./_bind")});
},{"./_export":370,"./_bind":406}],157:[function(require,module,exports) {
var r=require("./_object-dp").f,t=Function.prototype,e=/^\s*function ([^ (]*)/,n="name";n in t||require("./_descriptors")&&r(t,n,{configurable:!0,get:function(){try{return(""+this).match(e)[1]}catch(r){return""}}});
},{"./_object-dp":389,"./_descriptors":369}],158:[function(require,module,exports) {
"use strict";var t=require("./_is-object"),e=require("./_object-gpo"),r=require("./_wks")("hasInstance"),i=Function.prototype;r in i||require("./_object-dp").f(i,r,{value:function(r){if("function"!=typeof this||!t(r))return!1;if(!t(this.prototype))return r instanceof this;for(;r=e(r);)if(this.prototype===r)return!0;return!1}});
},{"./_is-object":382,"./_object-gpo":401,"./_wks":376,"./_object-dp":389}],556:[function(require,module,exports) {
module.exports="\t\n\v\f\r \u2028\u2029\ufeff";
},{}],411:[function(require,module,exports) {
var r=require("./_export"),e=require("./_defined"),i=require("./_fails"),n=require("./_string-ws"),t="["+n+"]",u="",o=RegExp("^"+t+t+"*"),p=RegExp(t+t+"*$"),a=function(e,t,o){var p={},a=i(function(){return!!n[e]()||u[e]()!=u}),f=p[e]=a?t(c):n[e];o&&(p[o]=f),r(r.P+r.F*a,"String",p)},c=a.trim=function(r,i){return r=String(e(r)),1&i&&(r=r.replace(o,"")),2&i&&(r=r.replace(p,"")),r};module.exports=a;
},{"./_export":370,"./_defined":485,"./_fails":396,"./_string-ws":556}],407:[function(require,module,exports) {
var r=require("./_global").parseInt,e=require("./_string-trim").trim,t=require("./_string-ws"),i=/^[-+]?0[xX]/;module.exports=8!==r(t+"08")||22!==r(t+"0x16")?function(t,n){var s=e(String(t),3);return r(s,n>>>0||(i.test(s)?16:10))}:r;
},{"./_global":397,"./_string-trim":411,"./_string-ws":556}],159:[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-int");r(r.G+r.F*(parseInt!=e),{parseInt:e});
},{"./_export":370,"./_parse-int":407}],408:[function(require,module,exports) {
var r=require("./_global").parseFloat,e=require("./_string-trim").trim;module.exports=1/r(require("./_string-ws")+"-0")!=-1/0?function(t){var i=e(String(t),3),a=r(i);return 0===a&&"-"==i.charAt(0)?-0:a}:r;
},{"./_global":397,"./_string-trim":411,"./_string-ws":556}],160:[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-float");r(r.G+r.F*(parseFloat!=e),{parseFloat:e});
},{"./_export":370,"./_parse-float":408}],410:[function(require,module,exports) {
var t=require("./_is-object"),o=require("./_set-proto").set;module.exports=function(r,e,p){var u,n=e.constructor;return n!==p&&"function"==typeof n&&(u=n.prototype)!==p.prototype&&t(u)&&o&&o(r,u),r};
},{"./_is-object":382,"./_set-proto":404}],161:[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_has"),t=require("./_cof"),i=require("./_inherit-if-required"),a=require("./_to-primitive"),n=require("./_fails"),o=require("./_object-gopn").f,u=require("./_object-gopd").f,s=require("./_object-dp").f,c=require("./_string-trim").trim,f="Number",_=e[f],I=_,N=_.prototype,p=t(require("./_object-create")(N))==f,l="trim"in String.prototype,q=function(e){var r=a(e,!1);if("string"==typeof r&&r.length>2){var t,i,n,o=(r=l?r.trim():c(r,3)).charCodeAt(0);if(43===o||45===o){if(88===(t=r.charCodeAt(2))||120===t)return NaN}else if(48===o){switch(r.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+r}for(var u,s=r.slice(2),f=0,_=s.length;f<_;f++)if((u=s.charCodeAt(f))<48||u>n)return NaN;return parseInt(s,i)}}return+r};if(!_(" 0o1")||!_("0b1")||_("+0x1")){_=function(e){var r=arguments.length<1?0:e,a=this;return a instanceof _&&(p?n(function(){N.valueOf.call(a)}):t(a)!=f)?i(new I(q(r)),a,_):q(r)};for(var g,h=require("./_descriptors")?o(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;h.length>E;E++)r(I,g=h[E])&&!r(_,g)&&s(_,g,u(I,g));_.prototype=N,N.constructor=_,require("./_redefine")(e,f,_)}
},{"./_global":397,"./_has":368,"./_cof":409,"./_inherit-if-required":410,"./_to-primitive":384,"./_fails":396,"./_object-gopn":391,"./_object-gopd":388,"./_object-dp":389,"./_string-trim":411,"./_object-create":386,"./_descriptors":369,"./_redefine":371}],413:[function(require,module,exports) {
var r=require("./_cof");module.exports=function(e,o){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(o);return+e};
},{"./_cof":409}],414:[function(require,module,exports) {
"use strict";var r=require("./_to-integer"),e=require("./_defined");module.exports=function(t){var i=String(e(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(i+=i))1&o&&(n+=i);return n};
},{"./_to-integer":412,"./_defined":485}],162:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_to-integer"),i=require("./_a-number-value"),t=require("./_string-repeat"),n=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",a="0",c=function(r,e){for(var i=-1,t=e;++i<6;)t+=r*u[i],u[i]=t%1e7,t=o(t/1e7)},l=function(r){for(var e=6,i=0;--e>=0;)i+=u[e],u[e]=o(i/r),i=i%r*1e7},v=function(){for(var r=6,e="";--r>=0;)if(""!==e||0===r||0!==u[r]){var i=String(u[r]);e=""===e?i:e+t.call(a,7-i.length)+i}return e},x=function(r,e,i){return 0===e?i:e%2==1?x(r,e-1,i*r):x(r*r,e/2,i)},d=function(r){for(var e=0,i=r;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e};r(r.P+r.F*(!!n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!require("./_fails")(function(){n.call({})})),"Number",{toFixed:function(r){var n,o,u,s,F=i(this,f),g=e(r),b="",h=a;if(g<0||g>20)throw RangeError(f);if(F!=F)return"NaN";if(F<=-1e21||F>=1e21)return String(F);if(F<0&&(b="-",F=-F),F>1e-21)if(o=(n=d(F*x(2,69,1))-69)<0?F*x(2,-n,1):F/x(2,n,1),o*=4503599627370496,(n=52-n)>0){for(c(0,o),u=g;u>=7;)c(1e7,0),u-=7;for(c(x(10,u,1),0),u=n-1;u>=23;)l(1<<23),u-=23;l(1<<u),c(1,1),l(2),h=v()}else c(0,o),c(1<<-n,0),h=v()+t.call(a,g);return h=g>0?b+((s=h.length)<=g?"0."+t.call(a,g-s)+h:h.slice(0,s-g)+"."+h.slice(s-g)):b+h}});
},{"./_export":370,"./_to-integer":412,"./_a-number-value":413,"./_string-repeat":414,"./_fails":396}],163:[function(require,module,exports) {
"use strict";var r=require("./_export"),i=require("./_fails"),e=require("./_a-number-value"),n=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==n.call(1,void 0)})||!i(function(){n.call({})})),"Number",{toPrecision:function(r){var i=e(this,"Number#toPrecision: incorrect invocation!");return void 0===r?n.call(i):n.call(i,r)}});
},{"./_export":370,"./_fails":396,"./_a-number-value":413}],164:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{EPSILON:Math.pow(2,-52)});
},{"./_export":370}],165:[function(require,module,exports) {
var e=require("./_export"),r=require("./_global").isFinite;e(e.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}});
},{"./_export":370,"./_global":397}],415:[function(require,module,exports) {
var e=require("./_is-object"),r=Math.floor;module.exports=function(i){return!e(i)&&isFinite(i)&&r(i)===i};
},{"./_is-object":382}],166:[function(require,module,exports) {
var e=require("./_export");e(e.S,"Number",{isInteger:require("./_is-integer")});
},{"./_export":370,"./_is-integer":415}],167:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{isNaN:function(r){return r!=r}});
},{"./_export":370}],168:[function(require,module,exports) {
var e=require("./_export"),r=require("./_is-integer"),i=Math.abs;e(e.S,"Number",{isSafeInteger:function(e){return r(e)&&i(e)<=9007199254740991}});
},{"./_export":370,"./_is-integer":415}],169:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});
},{"./_export":370}],170:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});
},{"./_export":370}],171:[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-float");r(r.S+r.F*(Number.parseFloat!=e),"Number",{parseFloat:e});
},{"./_export":370,"./_parse-float":408}],172:[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-int");r(r.S+r.F*(Number.parseInt!=e),"Number",{parseInt:e});
},{"./_export":370,"./_parse-int":407}],416:[function(require,module,exports) {
module.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)};
},{}],173:[function(require,module,exports) {
var a=require("./_export"),r=require("./_math-log1p"),t=Math.sqrt,h=Math.acosh;a(a.S+a.F*!(h&&710==Math.floor(h(Number.MAX_VALUE))&&h(1/0)==1/0),"Math",{acosh:function(a){return(a=+a)<1?NaN:a>94906265.62425156?Math.log(a)+Math.LN2:r(a-1+t(a-1)*t(a+1))}});
},{"./_export":370,"./_math-log1p":416}],174:[function(require,module,exports) {
var t=require("./_export"),a=Math.asinh;function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}t(t.S+t.F*!(a&&1/a(0)>0),"Math",{asinh:i});
},{"./_export":370}],175:[function(require,module,exports) {
var a=require("./_export"),t=Math.atanh;a(a.S+a.F*!(t&&1/t(-0)<0),"Math",{atanh:function(a){return 0==(a=+a)?a:Math.log((1+a)/(1-a))/2}});
},{"./_export":370}],417:[function(require,module,exports) {
module.exports=Math.sign||function(n){return 0==(n=+n)||n!=n?n:n<0?-1:1};
},{}],176:[function(require,module,exports) {
var r=require("./_export"),t=require("./_math-sign");r(r.S,"Math",{cbrt:function(r){return t(r=+r)*Math.pow(Math.abs(r),1/3)}});
},{"./_export":370,"./_math-sign":417}],177:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{clz32:function(r){return(r>>>=0)?31-Math.floor(Math.log(r+.5)*Math.LOG2E):32}});
},{"./_export":370}],178:[function(require,module,exports) {
var r=require("./_export"),e=Math.exp;r(r.S,"Math",{cosh:function(r){return(e(r=+r)+e(-r))/2}});
},{"./_export":370}],418:[function(require,module,exports) {
var e=Math.expm1;module.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:e;
},{}],179:[function(require,module,exports) {
var e=require("./_export"),r=require("./_math-expm1");e(e.S+e.F*(r!=Math.expm1),"Math",{expm1:r});
},{"./_export":370,"./_math-expm1":418}],419:[function(require,module,exports) {
var r=require("./_math-sign"),t=Math.pow,n=t(2,-52),a=t(2,-23),u=t(2,127)*(2-a),e=t(2,-126),o=function(r){return r+1/n-1/n};module.exports=Math.fround||function(t){var h,i,f=Math.abs(t),s=r(t);return f<e?s*o(f/e/a)*e*a:(i=(h=(1+a/n)*f)-(h-f))>u||i!=i?s*(1/0):s*i};
},{"./_math-sign":417}],180:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{fround:require("./_math-fround")});
},{"./_export":370,"./_math-fround":419}],181:[function(require,module,exports) {
var r=require("./_export"),t=Math.abs;r(r.S,"Math",{hypot:function(r,a){for(var e,h,n=0,o=0,u=arguments.length,M=0;o<u;)M<(e=t(arguments[o++]))?(n=n*(h=M/e)*h+1,M=e):n+=e>0?(h=e/M)*h:e;return M===1/0?1/0:M*Math.sqrt(n)}});
},{"./_export":370}],182:[function(require,module,exports) {
var r=require("./_export"),e=Math.imul;r(r.S+r.F*require("./_fails")(function(){return-5!=e(4294967295,5)||2!=e.length}),"Math",{imul:function(r,e){var t=+r,u=+e,i=65535&t,n=65535&u;return 0|i*n+((65535&t>>>16)*n+i*(65535&u>>>16)<<16>>>0)}});
},{"./_export":370,"./_fails":396}],183:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log10:function(r){return Math.log(r)*Math.LOG10E}});
},{"./_export":370}],184:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log1p:require("./_math-log1p")});
},{"./_export":370,"./_math-log1p":416}],185:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log2:function(r){return Math.log(r)/Math.LN2}});
},{"./_export":370}],186:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{sign:require("./_math-sign")});
},{"./_export":370,"./_math-sign":417}],187:[function(require,module,exports) {
var e=require("./_export"),r=require("./_math-expm1"),t=Math.exp;e(e.S+e.F*require("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(t(e-1)-t(-e-1))*(Math.E/2)}});
},{"./_export":370,"./_math-expm1":418,"./_fails":396}],188:[function(require,module,exports) {
var r=require("./_export"),e=require("./_math-expm1"),t=Math.exp;r(r.S,"Math",{tanh:function(r){var a=e(r=+r),h=e(-r);return a==1/0?1:h==1/0?-1:(a-h)/(t(r)+t(-r))}});
},{"./_export":370,"./_math-expm1":418}],189:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{trunc:function(r){return(r>0?Math.floor:Math.ceil)(r)}});
},{"./_export":370}],190:[function(require,module,exports) {
var r=require("./_export"),o=require("./_to-absolute-index"),e=String.fromCharCode,n=String.fromCodePoint;r(r.S+r.F*(!!n&&1!=n.length),"String",{fromCodePoint:function(r){for(var n,t=[],i=arguments.length,a=0;i>a;){if(n=+arguments[a++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");t.push(n<65536?e(n):e(55296+((n-=65536)>>10),n%1024+56320))}return t.join("")}});
},{"./_export":370,"./_to-absolute-index":420}],191:[function(require,module,exports) {
var r=require("./_export"),e=require("./_to-iobject"),t=require("./_to-length");r(r.S,"String",{raw:function(r){for(var n=e(r.raw),i=t(n.length),o=arguments.length,u=[],g=0;i>g;)u.push(String(n[g++])),g<o&&u.push(String(arguments[g]));return u.join("")}});
},{"./_export":370,"./_to-iobject":383,"./_to-length":421}],192:[function(require,module,exports) {
"use strict";require("./_string-trim")("trim",function(r){return function(){return r(this,3)}});
},{"./_string-trim":411}],422:[function(require,module,exports) {
var e=require("./_to-integer"),r=require("./_defined");module.exports=function(t){return function(n,i){var o,u,c=String(r(n)),d=e(i),a=c.length;return d<0||d>=a?t?"":void 0:(o=c.charCodeAt(d))<55296||o>56319||d+1===a||(u=c.charCodeAt(d+1))<56320||u>57343?t?c.charAt(d):o:t?c.slice(d,d+2):u-56320+(o-55296<<10)+65536}};
},{"./_to-integer":412,"./_defined":485}],457:[function(require,module,exports) {
module.exports={};
},{}],475:[function(require,module,exports) {
"use strict";var e=require("./_object-create"),r=require("./_property-desc"),t=require("./_set-to-string-tag"),i={};require("./_hide")(i,require("./_wks")("iterator"),function(){return this}),module.exports=function(o,u,s){o.prototype=e(i,{next:r(1,s)}),t(o,u+" Iterator")};
},{"./_object-create":386,"./_property-desc":385,"./_set-to-string-tag":374,"./_hide":395,"./_wks":376}],423:[function(require,module,exports) {
"use strict";var e=require("./_library"),r=require("./_export"),t=require("./_redefine"),i=require("./_hide"),n=require("./_has"),u=require("./_iterators"),s=require("./_iter-create"),o=require("./_set-to-string-tag"),a=require("./_object-gpo"),c=require("./_wks")("iterator"),f=!([].keys&&"next"in[].keys()),q="@@iterator",_="keys",l="values",y=function(){return this};module.exports=function(h,p,k,v,w,d,x){s(k,p,v);var b,g,j,m=function(e){if(!f&&e in O)return O[e];switch(e){case _:case l:return function(){return new k(this,e)}}return function(){return new k(this,e)}},A=p+" Iterator",F=w==l,I=!1,O=h.prototype,P=O[c]||O[q]||w&&O[w],z=!f&&P||m(w),B=w?F?m("entries"):z:void 0,C="Array"==p&&O.entries||P;if(C&&(j=a(C.call(new h)))!==Object.prototype&&j.next&&(o(j,A,!0),e||n(j,c)||i(j,c,y)),F&&P&&P.name!==l&&(I=!0,z=function(){return P.call(this)}),e&&!x||!f&&!I&&O[c]||i(O,c,z),u[p]=z,u[A]=y,w)if(b={values:F?z:m(l),keys:d?z:m(_),entries:B},x)for(g in b)g in O||t(O,g,b[g]);else r(r.P+r.F*(f||I),p,b);return b};
},{"./_library":394,"./_export":370,"./_redefine":371,"./_hide":395,"./_has":368,"./_iterators":457,"./_iter-create":475,"./_set-to-string-tag":374,"./_object-gpo":401,"./_wks":376}],193:[function(require,module,exports) {
"use strict";var i=require("./_string-at")(!0);require("./_iter-define")(String,"String",function(i){this._t=String(i),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})});
},{"./_string-at":422,"./_iter-define":423}],194:[function(require,module,exports) {
"use strict";var r=require("./_export"),t=require("./_string-at")(!1);r(r.P,"String",{codePointAt:function(r){return t(this,r)}});
},{"./_export":370,"./_string-at":422}],454:[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_cof"),i=require("./_wks")("match");module.exports=function(o){var u;return e(o)&&(void 0!==(u=o[i])?!!u:"RegExp"==r(o))};
},{"./_is-object":382,"./_cof":409,"./_wks":376}],424:[function(require,module,exports) {
var e=require("./_is-regexp"),r=require("./_defined");module.exports=function(i,t,n){if(e(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(i))};
},{"./_is-regexp":454,"./_defined":485}],425:[function(require,module,exports) {
var r=require("./_wks")("match");module.exports=function(t){var c=/./;try{"/./"[t](c)}catch(e){try{return c[r]=!1,!"/./"[t](c)}catch(r){}}return!0};
},{"./_wks":376}],195:[function(require,module,exports) {
"use strict";var e=require("./_export"),t=require("./_to-length"),i=require("./_string-context"),r="endsWith",n=""[r];e(e.P+e.F*require("./_fails-is-regexp")(r),"String",{endsWith:function(e){var s=i(this,e,r),g=arguments.length>1?arguments[1]:void 0,h=t(s.length),l=void 0===g?h:Math.min(t(g),h),u=String(e);return n?n.call(s,u,l):s.slice(l-u.length,l)===u}});
},{"./_export":370,"./_to-length":421,"./_string-context":424,"./_fails-is-regexp":425}],196:[function(require,module,exports) {
"use strict";var e=require("./_export"),i=require("./_string-context"),r="includes";e(e.P+e.F*require("./_fails-is-regexp")(r),"String",{includes:function(e){return!!~i(this,e,r).indexOf(e,arguments.length>1?arguments[1]:void 0)}});
},{"./_export":370,"./_string-context":424,"./_fails-is-regexp":425}],197:[function(require,module,exports) {
var r=require("./_export");r(r.P,"String",{repeat:require("./_string-repeat")});
},{"./_export":370,"./_string-repeat":414}],198:[function(require,module,exports) {
"use strict";var t=require("./_export"),r=require("./_to-length"),e=require("./_string-context"),i="startsWith",n=""[i];t(t.P+t.F*require("./_fails-is-regexp")(i),"String",{startsWith:function(t){var s=e(this,t,i),g=r(Math.min(arguments.length>1?arguments[1]:void 0,s.length)),h=String(t);return n?n.call(s,h,g):s.slice(g,g+h.length)===h}});
},{"./_export":370,"./_to-length":421,"./_string-context":424,"./_fails-is-regexp":425}],426:[function(require,module,exports) {
var r=require("./_export"),e=require("./_fails"),t=require("./_defined"),n=/"/g,i=function(r,e,i,u){var o=String(t(r)),a="<"+e;return""!==i&&(a+=" "+i+'="'+String(u).replace(n,"&quot;")+'"'),a+">"+o+"</"+e+">"};module.exports=function(t,n){var u={};u[t]=n(i),r(r.P+r.F*e(function(){var r=""[t]('"');return r!==r.toLowerCase()||r.split('"').length>3}),"String",u)};
},{"./_export":370,"./_fails":396,"./_defined":485}],199:[function(require,module,exports) {
"use strict";require("./_string-html")("anchor",function(n){return function(r){return n(this,"a","name",r)}});
},{"./_string-html":426}],200:[function(require,module,exports) {
"use strict";require("./_string-html")("big",function(t){return function(){return t(this,"big","","")}});
},{"./_string-html":426}],201:[function(require,module,exports) {
"use strict";require("./_string-html")("blink",function(n){return function(){return n(this,"blink","","")}});
},{"./_string-html":426}],202:[function(require,module,exports) {
"use strict";require("./_string-html")("bold",function(t){return function(){return t(this,"b","","")}});
},{"./_string-html":426}],203:[function(require,module,exports) {
"use strict";require("./_string-html")("fixed",function(t){return function(){return t(this,"tt","","")}});
},{"./_string-html":426}],204:[function(require,module,exports) {
"use strict";require("./_string-html")("fontcolor",function(t){return function(r){return t(this,"font","color",r)}});
},{"./_string-html":426}],205:[function(require,module,exports) {
"use strict";require("./_string-html")("fontsize",function(t){return function(n){return t(this,"font","size",n)}});
},{"./_string-html":426}],206:[function(require,module,exports) {
"use strict";require("./_string-html")("italics",function(t){return function(){return t(this,"i","","")}});
},{"./_string-html":426}],207:[function(require,module,exports) {
"use strict";require("./_string-html")("link",function(r){return function(t){return r(this,"a","href",t)}});
},{"./_string-html":426}],208:[function(require,module,exports) {
"use strict";require("./_string-html")("small",function(t){return function(){return t(this,"small","","")}});
},{"./_string-html":426}],209:[function(require,module,exports) {
"use strict";require("./_string-html")("strike",function(t){return function(){return t(this,"strike","","")}});
},{"./_string-html":426}],210:[function(require,module,exports) {
"use strict";require("./_string-html")("sub",function(t){return function(){return t(this,"sub","","")}});
},{"./_string-html":426}],211:[function(require,module,exports) {
"use strict";require("./_string-html")("sup",function(t){return function(){return t(this,"sup","","")}});
},{"./_string-html":426}],212:[function(require,module,exports) {
var e=require("./_export");e(e.S,"Date",{now:function(){return(new Date).getTime()}});
},{"./_export":370}],213:[function(require,module,exports) {
"use strict";var t=require("./_export"),e=require("./_to-object"),r=require("./_to-primitive");t(t.P+t.F*require("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var i=e(this),n=r(i);return"number"!=typeof n||isFinite(n)?i.toISOString():null}});
},{"./_export":370,"./_to-object":400,"./_to-primitive":384,"./_fails":396}],432:[function(require,module,exports) {
"use strict";var t=require("./_fails"),e=Date.prototype.getTime,i=Date.prototype.toISOString,n=function(t){return t>9?t:"0"+t};module.exports=t(function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))})||!t(function(){i.call(new Date(NaN))})?function(){if(!isFinite(e.call(this)))throw RangeError("Invalid time value");var t=this,i=t.getUTCFullYear(),r=t.getUTCMilliseconds(),a=i<0?"-":i>9999?"+":"";return a+("00000"+Math.abs(i)).slice(a?-6:-4)+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+(r>99?r:"0"+n(r))+"Z"}:i;
},{"./_fails":396}],214:[function(require,module,exports) {
var t=require("./_export"),r=require("./_date-to-iso-string");t(t.P+t.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r});
},{"./_export":370,"./_date-to-iso-string":432}],215:[function(require,module,exports) {
var e=Date.prototype,t="Invalid Date",a="toString",r=e[a],i=e.getTime;new Date(NaN)+""!=t&&require("./_redefine")(e,a,function(){var e=i.call(this);return e==e?r.call(this):t});
},{"./_redefine":371}],435:[function(require,module,exports) {
"use strict";var r=require("./_an-object"),e=require("./_to-primitive"),t="number";module.exports=function(i){if("string"!==i&&i!==t&&"default"!==i)throw TypeError("Incorrect hint");return e(r(this),i!=t)};
},{"./_an-object":381,"./_to-primitive":384}],216:[function(require,module,exports) {
var e=require("./_wks")("toPrimitive"),i=Date.prototype;e in i||require("./_hide")(i,e,require("./_date-to-primitive"));
},{"./_wks":376,"./_hide":395,"./_date-to-primitive":435}],217:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Array",{isArray:require("./_is-array")});
},{"./_export":370,"./_is-array":380}],437:[function(require,module,exports) {
var r=require("./_an-object");module.exports=function(t,e,o,a){try{return a?e(r(o)[0],o[1]):e(o)}catch(e){var c=t.return;throw void 0!==c&&r(c.call(t)),e}};
},{"./_an-object":381}],438:[function(require,module,exports) {
var r=require("./_iterators"),e=require("./_wks")("iterator"),t=Array.prototype;module.exports=function(o){return void 0!==o&&(r.Array===o||t[e]===o)};
},{"./_iterators":457,"./_wks":376}],439:[function(require,module,exports) {
"use strict";var e=require("./_object-dp"),r=require("./_property-desc");module.exports=function(t,i,o){i in t?e.f(t,i,r(0,o)):t[i]=o};
},{"./_object-dp":389,"./_property-desc":385}],440:[function(require,module,exports) {
var r=require("./_classof"),e=require("./_wks")("iterator"),t=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(o){if(void 0!=o)return o[e]||o["@@iterator"]||t[r(o)]};
},{"./_classof":405,"./_wks":376,"./_iterators":457,"./_core":334}],441:[function(require,module,exports) {
var r=require("./_wks")("iterator"),t=!1;try{var n=[7][r]();n.return=function(){t=!0},Array.from(n,function(){throw 2})}catch(r){}module.exports=function(n,e){if(!e&&!t)return!1;var u=!1;try{var o=[7],c=o[r]();c.next=function(){return{done:u=!0}},o[r]=function(){return c},n(o)}catch(r){}return u};
},{"./_wks":376}],218:[function(require,module,exports) {
"use strict";var e=require("./_ctx"),r=require("./_export"),t=require("./_to-object"),i=require("./_iter-call"),o=require("./_is-array-iter"),u=require("./_to-length"),n=require("./_create-property"),a=require("./core.get-iterator-method");r(r.S+r.F*!require("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(r){var c,l,f,q,v=t(r),_="function"==typeof this?this:Array,d=arguments.length,h=d>1?arguments[1]:void 0,y=void 0!==h,s=0,g=a(v);if(y&&(h=e(h,d>2?arguments[2]:void 0,2)),void 0==g||_==Array&&o(g))for(l=new _(c=u(v.length));c>s;s++)n(l,s,y?h(v[s],s):v[s]);else for(q=g.call(v),l=new _;!(f=q.next()).done;s++)n(l,s,y?i(q,h,[f.value,s],!0):f.value);return l.length=s,l}});
},{"./_ctx":436,"./_export":370,"./_to-object":400,"./_iter-call":437,"./_is-array-iter":438,"./_to-length":421,"./_create-property":439,"./core.get-iterator-method":440,"./_iter-detect":441}],219:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_create-property");r(r.S+r.F*require("./_fails")(function(){function r(){}return!(Array.of.call(r)instanceof r)}),"Array",{of:function(){for(var r=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>r;)e(n,r,arguments[r++]);return n.length=t,n}});
},{"./_export":370,"./_create-property":439,"./_fails":396}],444:[function(require,module,exports) {
"use strict";var l=require("./_fails");module.exports=function(n,u){return!!n&&l(function(){u?n.call(null,function(){},1):n.call(null)})};
},{"./_fails":396}],220:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_to-iobject"),i=[].join;r(r.P+r.F*(require("./_iobject")!=Object||!require("./_strict-method")(i)),"Array",{join:function(r){return i.call(e(this),void 0===r?",":r)}});
},{"./_export":370,"./_to-iobject":383,"./_iobject":446,"./_strict-method":444}],221:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_html"),i=require("./_cof"),t=require("./_to-absolute-index"),u=require("./_to-length"),a=[].slice;r(r.P+r.F*require("./_fails")(function(){e&&a.call(e)}),"Array",{slice:function(r,e){var l=u(this.length),n=i(this);if(e=void 0===e?l:e,"Array"==n)return a.call(this,r,e);for(var s=t(r,l),c=t(e,l),h=u(c-s),o=new Array(h),f=0;f<h;f++)o[f]="String"==n?this.charAt(s+f):this[s+f];return o}});
},{"./_export":370,"./_html":442,"./_cof":409,"./_to-absolute-index":420,"./_to-length":421,"./_fails":396}],222:[function(require,module,exports) {
"use strict";var r=require("./_export"),t=require("./_a-function"),i=require("./_to-object"),e=require("./_fails"),o=[].sort,u=[1,2,3];r(r.P+r.F*(e(function(){u.sort(void 0)})||!e(function(){u.sort(null)})||!require("./_strict-method")(o)),"Array",{sort:function(r){return void 0===r?o.call(i(this)):o.call(i(this),t(r))}});
},{"./_export":370,"./_a-function":443,"./_to-object":400,"./_fails":396,"./_strict-method":444}],567:[function(require,module,exports) {
var r=require("./_is-object"),e=require("./_is-array"),o=require("./_wks")("species");module.exports=function(i){var t;return e(i)&&("function"!=typeof(t=i.constructor)||t!==Array&&!e(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t};
},{"./_is-object":382,"./_is-array":380,"./_wks":376}],478:[function(require,module,exports) {
var r=require("./_array-species-constructor");module.exports=function(e,n){return new(r(e))(n)};
},{"./_array-species-constructor":567}],447:[function(require,module,exports) {
var e=require("./_ctx"),r=require("./_iobject"),t=require("./_to-object"),i=require("./_to-length"),u=require("./_array-species-create");module.exports=function(n,c){var s=1==n,a=2==n,o=3==n,f=4==n,l=6==n,q=5==n||l,_=c||u;return function(u,c,h){for(var v,p,b=t(u),d=r(b),g=e(c,h,3),j=i(d.length),x=0,m=s?_(u,j):a?_(u,0):void 0;j>x;x++)if((q||x in d)&&(p=g(v=d[x],x,b),n))if(s)m[x]=p;else if(p)switch(n){case 3:return!0;case 5:return v;case 6:return x;case 2:m.push(v)}else if(f)return!1;return l?-1:o||f?f:m}};
},{"./_ctx":436,"./_iobject":446,"./_to-object":400,"./_to-length":421,"./_array-species-create":478}],223:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(0),t=require("./_strict-method")([].forEach,!0);r(r.P+r.F*!t,"Array",{forEach:function(r){return e(this,r,arguments[1])}});
},{"./_export":370,"./_array-methods":447,"./_strict-method":444}],224:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(1);r(r.P+r.F*!require("./_strict-method")([].map,!0),"Array",{map:function(r){return e(this,r,arguments[1])}});
},{"./_export":370,"./_array-methods":447,"./_strict-method":444}],225:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(2);r(r.P+r.F*!require("./_strict-method")([].filter,!0),"Array",{filter:function(r){return e(this,r,arguments[1])}});
},{"./_export":370,"./_array-methods":447,"./_strict-method":444}],226:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(3);r(r.P+r.F*!require("./_strict-method")([].some,!0),"Array",{some:function(r){return e(this,r,arguments[1])}});
},{"./_export":370,"./_array-methods":447,"./_strict-method":444}],227:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(4);r(r.P+r.F*!require("./_strict-method")([].every,!0),"Array",{every:function(r){return e(this,r,arguments[1])}});
},{"./_export":370,"./_array-methods":447,"./_strict-method":444}],448:[function(require,module,exports) {
var r=require("./_a-function"),e=require("./_to-object"),i=require("./_iobject"),o=require("./_to-length");module.exports=function(t,n,u,a,f){r(n);var c=e(t),l=i(c),h=o(c.length),q=f?h-1:0,_=f?-1:1;if(u<2)for(;;){if(q in l){a=l[q],q+=_;break}if(q+=_,f?q<0:h<=q)throw TypeError("Reduce of empty array with no initial value")}for(;f?q>=0:h>q;q+=_)q in l&&(a=n(a,l[q],q,c));return a};
},{"./_a-function":443,"./_to-object":400,"./_iobject":446,"./_to-length":421}],228:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-reduce");r(r.P+r.F*!require("./_strict-method")([].reduce,!0),"Array",{reduce:function(r){return e(this,r,arguments.length,arguments[1],!1)}});
},{"./_export":370,"./_array-reduce":448,"./_strict-method":444}],229:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-reduce");r(r.P+r.F*!require("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(r){return e(this,r,arguments.length,arguments[1],!0)}});
},{"./_export":370,"./_array-reduce":448,"./_strict-method":444}],230:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-includes")(!1),i=[].indexOf,t=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(t||!require("./_strict-method")(i)),"Array",{indexOf:function(r){return t?i.apply(this,arguments)||0:e(this,r,arguments[1])}});
},{"./_export":370,"./_array-includes":449,"./_strict-method":444}],231:[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-iobject"),t=require("./_to-integer"),i=require("./_to-length"),n=[].lastIndexOf,u=!!n&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(u||!require("./_strict-method")(n)),"Array",{lastIndexOf:function(e){if(u)return n.apply(this,arguments)||0;var a=r(this),o=i(a.length),s=o-1;for(arguments.length>1&&(s=Math.min(s,t(arguments[1]))),s<0&&(s=o+s);s>=0;s--)if(s in a&&a[s]===e)return s||0;return-1}});
},{"./_export":370,"./_to-iobject":383,"./_to-integer":412,"./_to-length":421,"./_strict-method":444}],450:[function(require,module,exports) {
"use strict";var e=require("./_to-object"),t=require("./_to-absolute-index"),i=require("./_to-length");module.exports=[].copyWithin||function(r,o){var n=e(this),u=i(n.length),h=t(r,u),l=t(o,u),d=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===d?u:t(d,u))-l,u-h),a=1;for(l<h&&h<l+s&&(a=-1,l+=s-1,h+=s-1);s-- >0;)l in n?n[h]=n[l]:delete n[h],h+=a,l+=a;return n};
},{"./_to-object":400,"./_to-absolute-index":420,"./_to-length":421}],451:[function(require,module,exports) {
var e=require("./_wks")("unscopables"),r=Array.prototype;void 0==r[e]&&require("./_hide")(r,e,{}),module.exports=function(o){r[e][o]=!0};
},{"./_wks":376,"./_hide":395}],232:[function(require,module,exports) {
var r=require("./_export");r(r.P,"Array",{copyWithin:require("./_array-copy-within")}),require("./_add-to-unscopables")("copyWithin");
},{"./_export":370,"./_array-copy-within":450,"./_add-to-unscopables":451}],452:[function(require,module,exports) {
"use strict";var e=require("./_to-object"),t=require("./_to-absolute-index"),r=require("./_to-length");module.exports=function(o){for(var i=e(this),u=r(i.length),n=arguments.length,d=t(n>1?arguments[1]:void 0,u),l=n>2?arguments[2]:void 0,s=void 0===l?u:t(l,u);s>d;)i[d++]=o;return i};
},{"./_to-object":400,"./_to-absolute-index":420,"./_to-length":421}],233:[function(require,module,exports) {
var r=require("./_export");r(r.P,"Array",{fill:require("./_array-fill")}),require("./_add-to-unscopables")("fill");
},{"./_export":370,"./_array-fill":452,"./_add-to-unscopables":451}],234:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(5),i="find",n=!0;i in[]&&Array(1)[i](function(){n=!1}),r(r.P+r.F*n,"Array",{find:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")(i);
},{"./_export":370,"./_array-methods":447,"./_add-to-unscopables":451}],235:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(6),n="findIndex",i=!0;n in[]&&Array(1)[n](function(){i=!1}),r(r.P+r.F*i,"Array",{findIndex:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")(n);
},{"./_export":370,"./_array-methods":447,"./_add-to-unscopables":451}],453:[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_object-dp"),i=require("./_descriptors"),t=require("./_wks")("species");module.exports=function(u){var s=e[u];i&&s&&!s[t]&&r.f(s,t,{configurable:!0,get:function(){return this}})};
},{"./_global":397,"./_object-dp":389,"./_descriptors":369,"./_wks":376}],236:[function(require,module,exports) {
require("./_set-species")("Array");
},{"./_set-species":453}],456:[function(require,module,exports) {
module.exports=function(e,n){return{value:n,done:!!e}};
},{}],237:[function(require,module,exports) {
"use strict";var e=require("./_add-to-unscopables"),r=require("./_iter-step"),t=require("./_iterators"),i=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(e,r){this._t=i(e),this._i=0,this._k=r},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values"),t.Arguments=t.Array,e("keys"),e("values"),e("entries");
},{"./_add-to-unscopables":451,"./_iter-step":456,"./_iterators":457,"./_to-iobject":383,"./_iter-define":423}],455:[function(require,module,exports) {
"use strict";var e=require("./_an-object");module.exports=function(){var i=e(this),r="";return i.global&&(r+="g"),i.ignoreCase&&(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),i.sticky&&(r+="y"),r};
},{"./_an-object":381}],238:[function(require,module,exports) {

var e=require("./_global"),r=require("./_inherit-if-required"),i=require("./_object-dp").f,t=require("./_object-gopn").f,n=require("./_is-regexp"),o=require("./_flags"),u=e.RegExp,c=u,s=u.prototype,f=/a/g,a=/a/g,g=new u(f)!==f;if(require("./_descriptors")&&(!g||require("./_fails")(function(){return a[require("./_wks")("match")]=!1,u(f)!=f||u(a)==a||"/a/i"!=u(f,"i")}))){u=function(e,i){var t=this instanceof u,f=n(e),a=void 0===i;return!t&&f&&e.constructor===u&&a?e:r(g?new c(f&&!a?e.source:e,i):c((f=e instanceof u)?e.source:e,f&&a?o.call(e):i),t?this:s,u)};for(var p=function(e){e in u||i(u,e,{configurable:!0,get:function(){return c[e]},set:function(r){c[e]=r}})},q=t(c),_=0;q.length>_;)p(q[_++]);s.constructor=u,u.prototype=s,require("./_redefine")(e,"RegExp",u)}require("./_set-species")("RegExp");
},{"./_global":397,"./_inherit-if-required":410,"./_object-dp":389,"./_object-gopn":391,"./_is-regexp":454,"./_flags":455,"./_descriptors":369,"./_fails":396,"./_wks":376,"./_redefine":371,"./_set-species":453}],240:[function(require,module,exports) {
require("./_descriptors")&&"g"!=/./g.flags&&require("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:require("./_flags")});
},{"./_descriptors":369,"./_object-dp":389,"./_flags":455}],239:[function(require,module,exports) {
"use strict";require("./es6.regexp.flags");var e=require("./_an-object"),r=require("./_flags"),i=require("./_descriptors"),n="toString",t=/./[n],a=function(e){require("./_redefine")(RegExp.prototype,n,e,!0)};require("./_fails")(function(){return"/a/b"!=t.call({source:"a",flags:"b"})})?a(function(){var n=e(this);return"/".concat(n.source,"/","flags"in n?n.flags:!i&&n instanceof RegExp?r.call(n):void 0)}):t.name!=n&&a(function(){return t.call(this)});
},{"./es6.regexp.flags":240,"./_an-object":381,"./_flags":455,"./_descriptors":369,"./_redefine":371,"./_fails":396}],458:[function(require,module,exports) {
"use strict";var r=require("./_hide"),e=require("./_redefine"),t=require("./_fails"),i=require("./_defined"),n=require("./_wks");module.exports=function(u,o,c){var f=n(u),s=c(i,f,""[u]),a=s[0],l=s[1];t(function(){var r={};return r[f]=function(){return 7},7!=""[u](r)})&&(e(String.prototype,u,a),r(RegExp.prototype,f,2==o?function(r,e){return l.call(r,this,e)}:function(r){return l.call(r,this)}))};
},{"./_hide":395,"./_redefine":371,"./_fails":396,"./_defined":485,"./_wks":376}],241:[function(require,module,exports) {
require("./_fix-re-wks")("match",1,function(i,r,t){return[function(t){"use strict";var e=i(this),n=void 0==t?void 0:t[r];return void 0!==n?n.call(t,e):new RegExp(t)[r](String(e))},t]});
},{"./_fix-re-wks":458}],242:[function(require,module,exports) {
require("./_fix-re-wks")("replace",2,function(r,i,e){return[function(t,n){"use strict";var c=r(this),u=void 0==t?void 0:t[i];return void 0!==u?u.call(t,c,n):e.call(String(c),t,n)},e]});
},{"./_fix-re-wks":458}],243:[function(require,module,exports) {
require("./_fix-re-wks")("search",1,function(r,i,e){return[function(e){"use strict";var n=r(this),t=void 0==e?void 0:e[i];return void 0!==t?t.call(e,n):new RegExp(e)[i](String(n))},e]});
},{"./_fix-re-wks":458}],244:[function(require,module,exports) {
require("./_fix-re-wks")("split",2,function(e,i,t){"use strict";var n=require("./_is-regexp"),l=t,s=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var r=void 0===/()??/.exec("")[1];t=function(e,i){var t=String(this);if(void 0===e&&0===i)return[];if(!n(e))return l.call(t,e,i);var c,u,g,h,o,p=[],a=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,v=void 0===i?4294967295:i>>>0,x=new RegExp(e.source,a+"g");for(r||(c=new RegExp("^"+x.source+"$(?!\\s)",a));(u=x.exec(t))&&!((g=u.index+u[0].length)>d&&(p.push(t.slice(d,u.index)),!r&&u.length>1&&u[0].replace(c,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(u[o]=void 0)}),u.length>1&&u.index<t.length&&s.apply(p,u.slice(1)),h=u[0].length,d=g,p.length>=v));)x.lastIndex===u.index&&x.lastIndex++;return d===t.length?!h&&x.test("")||p.push(""):p.push(t.slice(d)),p.length>v?p.slice(0,v):p}}else"0".split(void 0,0).length&&(t=function(e,i){return void 0===e&&0===i?[]:l.call(this,e,i)});return[function(n,l){var s=e(this),r=void 0==n?void 0:n[i];return void 0!==r?r.call(n,s,l):t.call(String(s),n,l)},t]});
},{"./_fix-re-wks":458,"./_is-regexp":454}],463:[function(require,module,exports) {
module.exports=function(o,n,r,i){if(!(o instanceof n)||void 0!==i&&i in o)throw TypeError(r+": incorrect invocation!");return o};
},{}],464:[function(require,module,exports) {
var e=require("./_ctx"),r=require("./_iter-call"),t=require("./_is-array-iter"),i=require("./_an-object"),o=require("./_to-length"),n=require("./core.get-iterator-method"),u={},a={},f=module.exports=function(f,l,c,q,_){var h,s,d,g,p=_?function(){return f}:n(f),v=e(c,q,l?2:1),x=0;if("function"!=typeof p)throw TypeError(f+" is not iterable!");if(t(p)){for(h=o(f.length);h>x;x++)if((g=l?v(i(s=f[x])[0],s[1]):v(f[x]))===u||g===a)return g}else for(d=p.call(f);!(s=d.next()).done;)if((g=r(d,v,s.value,l))===u||g===a)return g};f.BREAK=u,f.RETURN=a;
},{"./_ctx":436,"./_iter-call":437,"./_is-array-iter":438,"./_an-object":381,"./_to-length":421,"./core.get-iterator-method":440}],465:[function(require,module,exports) {
var r=require("./_an-object"),e=require("./_a-function"),o=require("./_wks")("species");module.exports=function(i,u){var n,t=r(i).constructor;return void 0===t||void 0==(n=r(t)[o])?u:e(n)};
},{"./_an-object":381,"./_a-function":443,"./_wks":376}],466:[function(require,module,exports) {


var e,t,n,i=require("./_ctx"),o=require("./_invoke"),r=require("./_html"),s=require("./_dom-create"),a=require("./_global"),c=a.process,u=a.setImmediate,p=a.clearImmediate,f=a.MessageChannel,l=a.Dispatch,d=0,m={},h="onreadystatechange",g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},v=function(e){g.call(e.data)};u&&p||(u=function(t){for(var n=[],i=1;arguments.length>i;)n.push(arguments[i++]);return m[++d]=function(){o("function"==typeof t?t:Function(t),n)},e(d),d},p=function(e){delete m[e]},"process"==require("./_cof")(c)?e=function(e){c.nextTick(i(g,e,1))}:l&&l.now?e=function(e){l.now(i(g,e,1))}:f?(n=(t=new f).port2,t.port1.onmessage=v,e=i(n.postMessage,n,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts?(e=function(e){a.postMessage(e+"","*")},a.addEventListener("message",v,!1)):e=h in s("script")?function(e){r.appendChild(s("script"))[h]=function(){r.removeChild(this),g.call(e)}}:function(e){setTimeout(i(g,e,1),0)}),module.exports={set:u,clear:p};
},{"./_ctx":436,"./_invoke":555,"./_html":442,"./_dom-create":552,"./_global":397,"./_cof":409}],467:[function(require,module,exports) {


var e=require("./_global"),t=require("./_task").set,r=e.MutationObserver||e.WebKitMutationObserver,n=e.process,o=e.Promise,a="process"==require("./_cof")(n);module.exports=function(){var i,c,s,v=function(){var e,t;for(a&&(e=n.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?s():c=void 0,e}}c=void 0,e&&e.enter()};if(a)s=function(){n.nextTick(v)};else if(!r||e.navigator&&e.navigator.standalone)if(o&&o.resolve){var u=o.resolve();s=function(){u.then(v)}}else s=function(){t.call(e,v)};else{var f=!0,l=document.createTextNode("");new r(v).observe(l,{characterData:!0}),s=function(){l.data=f=!f}}return function(e){var t={fn:e,next:void 0};c&&(c.next=t),i||(i=t,s()),c=t}};
},{"./_global":397,"./_task":466,"./_cof":409}],468:[function(require,module,exports) {
"use strict";var r=require("./_a-function");function e(e){var o,t;this.promise=new e(function(r,e){if(void 0!==o||void 0!==t)throw TypeError("Bad Promise constructor");o=r,t=e}),this.resolve=r(o),this.reject=r(t)}module.exports.f=function(r){return new e(r)};
},{"./_a-function":443}],469:[function(require,module,exports) {
module.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}};
},{}],470:[function(require,module,exports) {
var r=require("./_an-object"),e=require("./_is-object"),i=require("./_new-promise-capability");module.exports=function(o,t){if(r(o),e(t)&&t.constructor===o)return t;var u=i.f(o);return(0,u.resolve)(t),u.promise};
},{"./_an-object":381,"./_is-object":382,"./_new-promise-capability":468}],471:[function(require,module,exports) {
var r=require("./_redefine");module.exports=function(e,n,i){for(var o in n)r(e,o,n[o],i);return e};
},{"./_redefine":371}],245:[function(require,module,exports) {


"use strict";var e,r,t,i,n=require("./_library"),o=require("./_global"),c=require("./_ctx"),s=require("./_classof"),u=require("./_export"),a=require("./_is-object"),_=require("./_a-function"),h=require("./_an-instance"),f=require("./_for-of"),l=require("./_species-constructor"),v=require("./_task").set,p=require("./_microtask")(),d=require("./_new-promise-capability"),m=require("./_perform"),q=require("./_promise-resolve"),y="Promise",j=o.TypeError,w=o.process,b=o[y],g="process"==s(w),k=function(){},P=r=d.f,F=!!function(){try{var e=b.resolve(1),r=(e.constructor={})[require("./_wks")("species")]=function(e){e(k,k)};return(g||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof r}catch(e){}}(),x=function(e){var r;return!(!a(e)||"function"!=typeof(r=e.then))&&r},S=function(e,r){if(!e._n){e._n=!0;var t=e._c;p(function(){for(var i=e._v,n=1==e._s,o=0,c=function(r){var t,o,c=n?r.ok:r.fail,s=r.resolve,u=r.reject,a=r.domain;try{c?(n||(2==e._h&&G(e),e._h=1),!0===c?t=i:(a&&a.enter(),t=c(i),a&&a.exit()),t===r.promise?u(j("Promise-chain cycle")):(o=x(t))?o.call(t,s,u):s(t)):u(i)}catch(e){u(e)}};t.length>o;)c(t[o++]);e._c=[],e._n=!1,r&&!e._h&&E(e)})}},E=function(e){v.call(o,function(){var r,t,i,n=e._v,c=R(e);if(c&&(r=m(function(){g?w.emit("unhandledRejection",n,e):(t=o.onunhandledrejection)?t({promise:e,reason:n}):(i=o.console)&&i.error&&i.error("Unhandled promise rejection",n)}),e._h=g||R(e)?2:1),e._a=void 0,c&&r.e)throw r.v})},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},G=function(e){v.call(o,function(){var r;g?w.emit("rejectionHandled",e):(r=o.onrejectionhandled)&&r({promise:e,reason:e._v})})},H=function(e){var r=this;r._d||(r._d=!0,(r=r._w||r)._v=e,r._s=2,r._a||(r._a=r._c.slice()),S(r,!0))},T=function(e){var r,t=this;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw j("Promise can't be resolved itself");(r=x(e))?p(function(){var i={_w:t,_d:!1};try{r.call(e,c(T,i,1),c(H,i,1))}catch(e){H.call(i,e)}}):(t._v=e,t._s=1,S(t,!1))}catch(e){H.call({_w:t,_d:!1},e)}}};F||(b=function(r){h(this,b,y,"_h"),_(r),e.call(this);try{r(c(T,this,1),c(H,this,1))}catch(e){H.call(this,e)}},(e=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=require("./_redefine-all")(b.prototype,{then:function(e,r){var t=P(l(this,b));return t.ok="function"!=typeof e||e,t.fail="function"==typeof r&&r,t.domain=g?w.domain:void 0,this._c.push(t),this._a&&this._a.push(t),this._s&&S(this,!1),t.promise},catch:function(e){return this.then(void 0,e)}}),t=function(){var r=new e;this.promise=r,this.resolve=c(T,r,1),this.reject=c(H,r,1)},d.f=P=function(e){return e===b||e===i?new t(e):r(e)}),u(u.G+u.W+u.F*!F,{Promise:b}),require("./_set-to-string-tag")(b,y),require("./_set-species")(y),i=require("./_core")[y],u(u.S+u.F*!F,y,{reject:function(e){var r=P(this);return(0,r.reject)(e),r.promise}}),u(u.S+u.F*(n||!F),y,{resolve:function(e){return q(n&&this===i?b:this,e)}}),u(u.S+u.F*!(F&&require("./_iter-detect")(function(e){b.all(e).catch(k)})),y,{all:function(e){var r=this,t=P(r),i=t.resolve,n=t.reject,o=m(function(){var t=[],o=0,c=1;f(e,!1,function(e){var s=o++,u=!1;t.push(void 0),c++,r.resolve(e).then(function(e){u||(u=!0,t[s]=e,--c||i(t))},n)}),--c||i(t)});return o.e&&n(o.v),t.promise},race:function(e){var r=this,t=P(r),i=t.reject,n=m(function(){f(e,!1,function(e){r.resolve(e).then(t.resolve,i)})});return n.e&&i(n.v),t.promise}});
},{"./_library":394,"./_global":397,"./_ctx":436,"./_classof":405,"./_export":370,"./_is-object":382,"./_a-function":443,"./_an-instance":463,"./_for-of":464,"./_species-constructor":465,"./_task":466,"./_microtask":467,"./_new-promise-capability":468,"./_perform":469,"./_promise-resolve":470,"./_wks":376,"./_redefine-all":471,"./_set-to-string-tag":374,"./_set-species":453,"./_core":334,"./_iter-detect":441}],460:[function(require,module,exports) {
var r=require("./_is-object");module.exports=function(e,i){if(!r(e)||e._t!==i)throw TypeError("Incompatible receiver, "+i+" required!");return e};
},{"./_is-object":382}],459:[function(require,module,exports) {
"use strict";var e=require("./_object-dp").f,r=require("./_object-create"),t=require("./_redefine-all"),i=require("./_ctx"),n=require("./_an-instance"),_=require("./_for-of"),o=require("./_iter-define"),f=require("./_iter-step"),u=require("./_set-species"),s=require("./_descriptors"),v=require("./_meta").fastKey,c=require("./_validate-collection"),l=s?"_s":"size",a=function(e,r){var t,i=v(r);if("F"!==i)return e._i[i];for(t=e._f;t;t=t.n)if(t.k==r)return t};module.exports={getConstructor:function(o,f,u,v){var d=o(function(e,t){n(e,d,f,"_i"),e._t=f,e._i=r(null),e._f=void 0,e._l=void 0,e[l]=0,void 0!=t&&_(t,u,e[v],e)});return t(d.prototype,{clear:function(){for(var e=c(this,f),r=e._i,t=e._f;t;t=t.n)t.r=!0,t.p&&(t.p=t.p.n=void 0),delete r[t.i];e._f=e._l=void 0,e[l]=0},delete:function(e){var r=c(this,f),t=a(r,e);if(t){var i=t.n,n=t.p;delete r._i[t.i],t.r=!0,n&&(n.n=i),i&&(i.p=n),r._f==t&&(r._f=i),r._l==t&&(r._l=n),r[l]--}return!!t},forEach:function(e){c(this,f);for(var r,t=i(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(t(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!a(c(this,f),e)}}),s&&e(d.prototype,"size",{get:function(){return c(this,f)[l]}}),d},def:function(e,r,t){var i,n,_=a(e,r);return _?_.v=t:(e._l=_={i:n=v(r,!0),k:r,v:t,p:i=e._l,n:void 0,r:!1},e._f||(e._f=_),i&&(i.n=_),e[l]++,"F"!==n&&(e._i[n]=_)),e},getEntry:a,setStrong:function(e,r,t){o(e,r,function(e,t){this._t=c(e,r),this._k=t,this._l=void 0},function(){for(var e=this._k,r=this._l;r&&r.r;)r=r.p;return this._t&&(this._l=r=r?r.n:this._t._f)?f(0,"keys"==e?r.k:"values"==e?r.v:[r.k,r.v]):(this._t=void 0,f(1))},t?"entries":"values",!t,!0),u(r)}};
},{"./_object-dp":389,"./_object-create":386,"./_redefine-all":471,"./_ctx":436,"./_an-instance":463,"./_for-of":464,"./_iter-define":423,"./_iter-step":456,"./_set-species":453,"./_descriptors":369,"./_meta":372,"./_validate-collection":460}],461:[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_export"),t=require("./_redefine"),n=require("./_redefine-all"),i=require("./_meta"),u=require("./_for-of"),o=require("./_an-instance"),c=require("./_is-object"),a=require("./_fails"),s=require("./_iter-detect"),f=require("./_set-to-string-tag"),l=require("./_inherit-if-required");module.exports=function(d,h,q,_,p,v){var g=e[d],w=g,y=p?"set":"add",x=w&&w.prototype,E={},b=function(e){var r=x[e];t(x,e,"delete"==e?function(e){return!(v&&!c(e))&&r.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!c(e))&&r.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!c(e)?void 0:r.call(this,0===e?0:e)}:"add"==e?function(e){return r.call(this,0===e?0:e),this}:function(e,t){return r.call(this,0===e?0:e,t),this})};if("function"==typeof w&&(v||x.forEach&&!a(function(){(new w).entries().next()}))){var m=new w,j=m[y](v?{}:-0,1)!=m,C=a(function(){m.has(1)}),D=s(function(e){new w(e)}),F=!v&&a(function(){for(var e=new w,r=5;r--;)e[y](r,r);return!e.has(-0)});D||((w=h(function(e,r){o(e,w,d);var t=l(new g,e,w);return void 0!=r&&u(r,p,t[y],t),t})).prototype=x,x.constructor=w),(C||F)&&(b("delete"),b("has"),p&&b("get")),(F||j)&&b(y),v&&x.clear&&delete x.clear}else w=_.getConstructor(h,d,p,y),n(w.prototype,q),i.NEED=!0;return f(w,d),E[d]=w,r(r.G+r.W+r.F*(w!=g),E),v||_.setStrong(w,d,p),w};
},{"./_global":397,"./_export":370,"./_redefine":371,"./_redefine-all":471,"./_meta":372,"./_for-of":464,"./_an-instance":463,"./_is-object":382,"./_fails":396,"./_iter-detect":441,"./_set-to-string-tag":374,"./_inherit-if-required":410}],246:[function(require,module,exports) {
"use strict";var t=require("./_collection-strong"),e=require("./_validate-collection"),r="Map";module.exports=require("./_collection")(r,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(n){var i=t.getEntry(e(this,r),n);return i&&i.v},set:function(n,i){return t.def(e(this,r),0===n?0:n,i)}},t,!0);
},{"./_collection-strong":459,"./_validate-collection":460,"./_collection":461}],247:[function(require,module,exports) {
"use strict";var e=require("./_collection-strong"),t=require("./_validate-collection"),r="Set";module.exports=require("./_collection")(r,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i=0===i?0:i,i)}},e);
},{"./_collection-strong":459,"./_validate-collection":460,"./_collection":461}],462:[function(require,module,exports) {
"use strict";var e=require("./_redefine-all"),t=require("./_meta").getWeak,r=require("./_an-object"),i=require("./_is-object"),n=require("./_an-instance"),u=require("./_for-of"),o=require("./_array-methods"),s=require("./_has"),a=require("./_validate-collection"),c=o(5),f=o(6),_=0,h=function(e){return e._l||(e._l=new l)},l=function(){this.a=[]},d=function(e,t){return c(e.a,function(e){return e[0]===t})};l.prototype={get:function(e){var t=d(this,e);if(t)return t[1]},has:function(e){return!!d(this,e)},set:function(e,t){var r=d(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=f(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},module.exports={getConstructor:function(r,o,c,f){var l=r(function(e,t){n(e,l,o,"_i"),e._t=o,e._i=_++,e._l=void 0,void 0!=t&&u(t,c,e[f],e)});return e(l.prototype,{delete:function(e){if(!i(e))return!1;var r=t(e);return!0===r?h(a(this,o)).delete(e):r&&s(r,this._i)&&delete r[this._i]},has:function(e){if(!i(e))return!1;var r=t(e);return!0===r?h(a(this,o)).has(e):r&&s(r,this._i)}}),l},def:function(e,i,n){var u=t(r(i),!0);return!0===u?h(e).set(i,n):u[e._i]=n,e},ufstore:h};
},{"./_redefine-all":471,"./_meta":372,"./_an-object":381,"./_is-object":382,"./_an-instance":463,"./_for-of":464,"./_array-methods":447,"./_has":368,"./_validate-collection":460}],248:[function(require,module,exports) {
"use strict";var e,t=require("./_array-methods")(0),r=require("./_redefine"),i=require("./_meta"),n=require("./_object-assign"),o=require("./_collection-weak"),u=require("./_is-object"),s=require("./_fails"),c=require("./_validate-collection"),a="WeakMap",f=i.getWeak,l=Object.isExtensible,_=o.ufstore,h={},q=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(e){if(u(e)){var t=f(e);return!0===t?_(c(this,a)).get(e):t?t[this._i]:void 0}},set:function(e,t){return o.def(c(this,a),e,t)}},g=module.exports=require("./_collection")(a,q,d,o,!0,!0);s(function(){return 7!=(new g).set((Object.freeze||Object)(h),7).get(h)})&&(n((e=o.getConstructor(q,a)).prototype,d),i.NEED=!0,t(["delete","has","get","set"],function(t){var i=g.prototype,n=i[t];r(i,t,function(r,i){if(u(r)&&!l(r)){this._f||(this._f=new e);var o=this._f[t](r,i);return"set"==t?this:o}return n.call(this,r,i)})}));
},{"./_array-methods":447,"./_redefine":371,"./_meta":372,"./_object-assign":402,"./_collection-weak":462,"./_is-object":382,"./_fails":396,"./_validate-collection":460,"./_collection":461}],249:[function(require,module,exports) {
"use strict";var e=require("./_collection-weak"),t=require("./_validate-collection"),i="WeakSet";require("./_collection")(i,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(r){return e.def(t(this,i),r,!0)}},e,!1,!0);
},{"./_collection-weak":462,"./_validate-collection":460,"./_collection":461}],472:[function(require,module,exports) {

for(var r,a=require("./_global"),t=require("./_hide"),e=require("./_uid"),y=e("typed_array"),i=e("view"),A=!(!a.ArrayBuffer||!a.DataView),o=A,p=0,l=9,n="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");p<l;)(r=a[n[p++]])?(t(r.prototype,y,!0),t(r.prototype,i,!0)):o=!1;module.exports={ABV:A,CONSTR:o,TYPED:y,VIEW:i};
},{"./_global":397,"./_hide":395,"./_uid":375}],566:[function(require,module,exports) {
var r=require("./_to-integer"),e=require("./_to-length");module.exports=function(t){if(void 0===t)return 0;var n=r(t),o=e(n);if(n!==o)throw RangeError("Wrong length!");return o};
},{"./_to-integer":412,"./_to-length":421}],473:[function(require,module,exports) {

"use strict";var t=require("./_global"),n=require("./_descriptors"),r=require("./_library"),e=require("./_typed"),i=require("./_hide"),o=require("./_redefine-all"),u=require("./_fails"),f=require("./_an-instance"),s=require("./_to-integer"),c=require("./_to-length"),a=require("./_to-index"),h=require("./_object-gopn").f,l=require("./_object-dp").f,g=require("./_array-fill"),_=require("./_set-to-string-tag"),q="ArrayBuffer",v="DataView",w="prototype",I="Wrong length!",b="Wrong index!",y=t[q],p=t[v],d=t.Math,U=t.RangeError,N=t.Infinity,x=y,A=d.abs,F=d.pow,W=d.floor,V=d.log,j=d.LN2,B="buffer",E="byteLength",L="byteOffset",m=n?"_b":B,D=n?"_l":E,M=n?"_o":L;function O(t,n,r){var e,i,o,u=new Array(r),f=8*r-n-1,s=(1<<f)-1,c=s>>1,a=23===n?F(2,-24)-F(2,-77):0,h=0,l=t<0||0===t&&1/t<0?1:0;for((t=A(t))!=t||t===N?(i=t!=t?1:0,e=s):(e=W(V(t)/j),t*(o=F(2,-e))<1&&(e--,o*=2),(t+=e+c>=1?a/o:a*F(2,1-c))*o>=2&&(e++,o/=2),e+c>=s?(i=0,e=s):e+c>=1?(i=(t*o-1)*F(2,n),e+=c):(i=t*F(2,c-1)*F(2,n),e=0));n>=8;u[h++]=255&i,i/=256,n-=8);for(e=e<<n|i,f+=n;f>0;u[h++]=255&e,e/=256,f-=8);return u[--h]|=128*l,u}function R(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,f=i-7,s=r-1,c=t[s--],a=127&c;for(c>>=7;f>0;a=256*a+t[s],s--,f-=8);for(e=a&(1<<-f)-1,a>>=-f,f+=n;f>0;e=256*e+t[s],s--,f-=8);if(0===a)a=1-u;else{if(a===o)return e?NaN:c?-N:N;e+=F(2,n),a-=u}return(c?-1:1)*e*F(2,a-n)}function k(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function z(t){return[255&t]}function C(t){return[255&t,t>>8&255]}function G(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function H(t){return O(t,52,8)}function J(t){return O(t,23,4)}function K(t,n,r){l(t[w],n,{get:function(){return this[r]}})}function P(t,n,r,e){var i=a(+r);if(i+n>t[D])throw U(b);var o=t[m]._b,u=i+t[M],f=o.slice(u,u+n);return e?f:f.reverse()}function Q(t,n,r,e,i,o){var u=a(+r);if(u+n>t[D])throw U(b);for(var f=t[m]._b,s=u+t[M],c=e(+i),h=0;h<n;h++)f[s+h]=c[o?h:n-h-1]}if(e.ABV){if(!u(function(){y(1)})||!u(function(){new y(-1)})||u(function(){return new y,new y(1.5),new y(NaN),y.name!=q})){for(var S,T=(y=function(t){return f(this,y),new x(a(t))})[w]=x[w],X=h(x),Y=0;X.length>Y;)(S=X[Y++])in y||i(y,S,x[S]);r||(T.constructor=y)}var Z=new p(new y(2)),$=p[w].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||o(p[w],{setInt8:function(t,n){$.call(this,t,n<<24>>24)},setUint8:function(t,n){$.call(this,t,n<<24>>24)}},!0)}else y=function(t){f(this,y,q);var n=a(t);this._b=g.call(new Array(n),0),this[D]=n},p=function(t,n,r){f(this,p,v),f(t,y,v);var e=t[D],i=s(n);if(i<0||i>e)throw U("Wrong offset!");if(i+(r=void 0===r?e-i:c(r))>e)throw U(I);this[m]=t,this[M]=i,this[D]=r},n&&(K(y,E,"_l"),K(p,B,"_b"),K(p,E,"_l"),K(p,L,"_o")),o(p[w],{getInt8:function(t){return P(this,1,t)[0]<<24>>24},getUint8:function(t){return P(this,1,t)[0]},getInt16:function(t){var n=P(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=P(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return k(P(this,4,t,arguments[1]))},getUint32:function(t){return k(P(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return R(P(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return R(P(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){Q(this,1,t,z,n)},setUint8:function(t,n){Q(this,1,t,z,n)},setInt16:function(t,n){Q(this,2,t,C,n,arguments[2])},setUint16:function(t,n){Q(this,2,t,C,n,arguments[2])},setInt32:function(t,n){Q(this,4,t,G,n,arguments[2])},setUint32:function(t,n){Q(this,4,t,G,n,arguments[2])},setFloat32:function(t,n){Q(this,4,t,J,n,arguments[2])},setFloat64:function(t,n){Q(this,8,t,H,n,arguments[2])}});_(y,q),_(p,v),i(p[w],e.VIEW,!0),exports[q]=y,exports[v]=p;
},{"./_global":397,"./_descriptors":369,"./_library":394,"./_typed":472,"./_hide":395,"./_redefine-all":471,"./_fails":396,"./_an-instance":463,"./_to-integer":412,"./_to-length":421,"./_to-index":566,"./_object-gopn":391,"./_object-dp":389,"./_array-fill":452,"./_set-to-string-tag":374}],250:[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_typed"),i=require("./_typed-buffer"),t=require("./_an-object"),u=require("./_to-absolute-index"),n=require("./_to-length"),s=require("./_is-object"),o=require("./_global").ArrayBuffer,f=require("./_species-constructor"),c=i.ArrayBuffer,a=i.DataView,q=r.ABV&&o.isView,_=c.prototype.slice,l=r.VIEW,y="ArrayBuffer";e(e.G+e.W+e.F*(o!==c),{ArrayBuffer:c}),e(e.S+e.F*!r.CONSTR,y,{isView:function(e){return q&&q(e)||s(e)&&l in e}}),e(e.P+e.U+e.F*require("./_fails")(function(){return!new c(2).slice(1,void 0).byteLength}),y,{slice:function(e,r){if(void 0!==_&&void 0===r)return _.call(t(this),e);for(var i=t(this).byteLength,s=u(e,i),o=u(void 0===r?i:r,i),q=new(f(this,c))(n(o-s)),l=new a(this),y=new a(q),b=0;s<o;)y.setUint8(b++,l.getUint8(s++));return q}}),require("./_set-species")(y);
},{"./_export":370,"./_typed":472,"./_typed-buffer":473,"./_an-object":381,"./_to-absolute-index":420,"./_to-length":421,"./_is-object":382,"./_global":397,"./_species-constructor":465,"./_fails":396,"./_set-species":453}],251:[function(require,module,exports) {
var e=require("./_export");e(e.G+e.W+e.F*!require("./_typed").ABV,{DataView:require("./_typed-buffer").DataView});
},{"./_export":370,"./_typed":472,"./_typed-buffer":473}],474:[function(require,module,exports) {
var global = (1,eval)("this");
var e=(0,eval)("this");if(require("./_descriptors")){var r=require("./_library"),t=(e=require("./_global"),require("./_fails")),n=require("./_export"),i=require("./_typed"),o=require("./_typed-buffer"),u=require("./_ctx"),c=require("./_an-instance"),f=require("./_property-desc"),a=require("./_hide"),s=require("./_redefine-all"),l=require("./_to-integer"),h=require("./_to-length"),d=require("./_to-index"),g=require("./_to-absolute-index"),v=require("./_to-primitive"),_=require("./_has"),p=require("./_classof"),y=require("./_is-object"),q=require("./_to-object"),w=require("./_is-array-iter"),b=require("./_object-create"),S=require("./_object-gpo"),E=require("./_object-gopn").f,m=require("./core.get-iterator-method"),x=require("./_uid"),L=require("./_wks"),P=require("./_array-methods"),j=require("./_array-includes"),T=require("./_species-constructor"),F=require("./es6.array.iterator"),O=require("./_iterators"),A=require("./_iter-detect"),R=require("./_set-species"),B=require("./_array-fill"),I=require("./_array-copy-within"),M=require("./_object-dp"),W=require("./_object-gopd"),N=M.f,Y=W.f,k=e.RangeError,D=e.TypeError,V=e.Uint8Array,C="ArrayBuffer",U="Shared"+C,G="BYTES_PER_ELEMENT",z="prototype",H=Array[z],J=o.ArrayBuffer,K=o.DataView,Q=P(0),X=P(2),Z=P(3),$=P(4),ee=P(5),re=P(6),te=j(!0),ne=j(!1),ie=F.values,oe=F.keys,ue=F.entries,ce=H.lastIndexOf,fe=H.reduce,ae=H.reduceRight,se=H.join,le=H.sort,he=H.slice,de=H.toString,ge=H.toLocaleString,ve=L("iterator"),_e=L("toStringTag"),pe=x("typed_constructor"),ye=x("def_constructor"),qe=i.CONSTR,we=i.TYPED,be=i.VIEW,Se="Wrong length!",Ee=P(1,function(e,r){return je(T(e,e[ye]),r)}),me=t(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),xe=!!V&&!!V[z].set&&t(function(){new V(1).set({})}),Le=function(e,r){var t=l(e);if(t<0||t%r)throw k("Wrong offset!");return t},Pe=function(e){if(y(e)&&we in e)return e;throw D(e+" is not a typed array!")},je=function(e,r){if(!(y(e)&&pe in e))throw D("It is not a typed array constructor!");return new e(r)},Te=function(e,r){return Fe(T(e,e[ye]),r)},Fe=function(e,r){for(var t=0,n=r.length,i=je(e,n);n>t;)i[t]=r[t++];return i},Oe=function(e,r,t){N(e,r,{get:function(){return this._d[t]}})},Ae=function(e){var r,t,n,i,o,c,f=q(e),a=arguments.length,s=a>1?arguments[1]:void 0,l=void 0!==s,d=m(f);if(void 0!=d&&!w(d)){for(c=d.call(f),n=[],r=0;!(o=c.next()).done;r++)n.push(o.value);f=n}for(l&&a>2&&(s=u(s,arguments[2],2)),r=0,t=h(f.length),i=je(this,t);t>r;r++)i[r]=l?s(f[r],r):f[r];return i},Re=function(){for(var e=0,r=arguments.length,t=je(this,r);r>e;)t[e]=arguments[e++];return t},Be=!!V&&t(function(){ge.call(new V(1))}),Ie=function(){return ge.apply(Be?he.call(Pe(this)):Pe(this),arguments)},Me={copyWithin:function(e,r){return I.call(Pe(this),e,r,arguments.length>2?arguments[2]:void 0)},every:function(e){return $(Pe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return B.apply(Pe(this),arguments)},filter:function(e){return Te(this,X(Pe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ee(Pe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return re(Pe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Q(Pe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Pe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Pe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return se.apply(Pe(this),arguments)},lastIndexOf:function(e){return ce.apply(Pe(this),arguments)},map:function(e){return Ee(Pe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return fe.apply(Pe(this),arguments)},reduceRight:function(e){return ae.apply(Pe(this),arguments)},reverse:function(){for(var e,r=Pe(this).length,t=Math.floor(r/2),n=0;n<t;)e=this[n],this[n++]=this[--r],this[r]=e;return this},some:function(e){return Z(Pe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(Pe(this),e)},subarray:function(e,r){var t=Pe(this),n=t.length,i=g(e,n);return new(T(t,t[ye]))(t.buffer,t.byteOffset+i*t.BYTES_PER_ELEMENT,h((void 0===r?n:g(r,n))-i))}},We=function(e,r){return Te(this,he.call(Pe(this),e,r))},Ne=function(e){Pe(this);var r=Le(arguments[1],1),t=this.length,n=q(e),i=h(n.length),o=0;if(i+r>t)throw k(Se);for(;o<i;)this[r+o]=n[o++]},Ye={entries:function(){return ue.call(Pe(this))},keys:function(){return oe.call(Pe(this))},values:function(){return ie.call(Pe(this))}},ke=function(e,r){return y(e)&&e[we]&&"symbol"!=typeof r&&r in e&&String(+r)==String(r)},De=function(e,r){return ke(e,r=v(r,!0))?f(2,e[r]):Y(e,r)},Ve=function(e,r,t){return!(ke(e,r=v(r,!0))&&y(t)&&_(t,"value"))||_(t,"get")||_(t,"set")||t.configurable||_(t,"writable")&&!t.writable||_(t,"enumerable")&&!t.enumerable?N(e,r,t):(e[r]=t.value,e)};qe||(W.f=De,M.f=Ve),n(n.S+n.F*!qe,"Object",{getOwnPropertyDescriptor:De,defineProperty:Ve}),t(function(){de.call({})})&&(de=ge=function(){return se.call(this)});var Ce=s({},Me);s(Ce,Ye),a(Ce,ve,Ye.values),s(Ce,{slice:We,set:Ne,constructor:function(){},toString:de,toLocaleString:Ie}),Oe(Ce,"buffer","b"),Oe(Ce,"byteOffset","o"),Oe(Ce,"byteLength","l"),Oe(Ce,"length","e"),N(Ce,_e,{get:function(){return this[we]}}),module.exports=function(o,u,f,s){var l=o+((s=!!s)?"Clamped":"")+"Array",g="get"+o,v="set"+o,_=e[l],q=_||{},w=_&&S(_),m=!_||!i.ABV,x={},L=_&&_[z],P=function(e,r){N(e,r,{get:function(){return function(e,r){var t=e._d;return t.v[g](r*u+t.o,me)}(this,r)},set:function(e){return function(e,r,t){var n=e._d;s&&(t=(t=Math.round(t))<0?0:t>255?255:255&t),n.v[v](r*u+n.o,t,me)}(this,r,e)},enumerable:!0})};m?(_=f(function(e,r,t,n){c(e,_,l,"_d");var i,o,f,s,g=0,v=0;if(y(r)){if(!(r instanceof J||(s=p(r))==C||s==U))return we in r?Fe(_,r):Ae.call(_,r);i=r,v=Le(t,u);var q=r.byteLength;if(void 0===n){if(q%u)throw k(Se);if((o=q-v)<0)throw k(Se)}else if((o=h(n)*u)+v>q)throw k(Se);f=o/u}else f=d(r),i=new J(o=f*u);for(a(e,"_d",{b:i,o:v,l:o,e:f,v:new K(i)});g<f;)P(e,g++)}),L=_[z]=b(Ce),a(L,"constructor",_)):t(function(){_(1)})&&t(function(){new _(-1)})&&A(function(e){new _,new _(null),new _(1.5),new _(e)},!0)||(_=f(function(e,r,t,n){var i;return c(e,_,l),y(r)?r instanceof J||(i=p(r))==C||i==U?void 0!==n?new q(r,Le(t,u),n):void 0!==t?new q(r,Le(t,u)):new q(r):we in r?Fe(_,r):Ae.call(_,r):new q(d(r))}),Q(w!==Function.prototype?E(q).concat(E(w)):E(q),function(e){e in _||a(_,e,q[e])}),_[z]=L,r||(L.constructor=_));var j=L[ve],T=!!j&&("values"==j.name||void 0==j.name),F=Ye.values;a(_,pe,!0),a(L,we,l),a(L,be,!0),a(L,ye,_),(s?new _(1)[_e]==l:_e in L)||N(L,_e,{get:function(){return l}}),x[l]=_,n(n.G+n.W+n.F*(_!=q),x),n(n.S,l,{BYTES_PER_ELEMENT:u}),n(n.S+n.F*t(function(){q.of.call(_,1)}),l,{from:Ae,of:Re}),G in L||a(L,G,u),n(n.P,l,Me),R(l),n(n.P+n.F*xe,l,{set:Ne}),n(n.P+n.F*!T,l,Ye),r||L.toString==de||(L.toString=de),n(n.P+n.F*t(function(){new _(1).slice()}),l,{slice:We}),n(n.P+n.F*(t(function(){return[1,2].toLocaleString()!=new _([1,2]).toLocaleString()})||!t(function(){L.toLocaleString.call([1,2])})),l,{toLocaleString:Ie}),O[l]=T?j:F,r||T||a(L,ve,F)}}else module.exports=function(){};
},{"./_descriptors":369,"./_library":394,"./_global":397,"./_fails":396,"./_export":370,"./_typed":472,"./_typed-buffer":473,"./_ctx":436,"./_an-instance":463,"./_property-desc":385,"./_hide":395,"./_redefine-all":471,"./_to-integer":412,"./_to-length":421,"./_to-index":566,"./_to-absolute-index":420,"./_to-primitive":384,"./_has":368,"./_classof":405,"./_is-object":382,"./_to-object":400,"./_is-array-iter":438,"./_object-create":386,"./_object-gpo":401,"./_object-gopn":391,"./core.get-iterator-method":440,"./_uid":375,"./_wks":376,"./_array-methods":447,"./_array-includes":449,"./_species-constructor":465,"./es6.array.iterator":237,"./_iterators":457,"./_iter-detect":441,"./_set-species":453,"./_array-fill":452,"./_array-copy-within":450,"./_object-dp":389,"./_object-gopd":388}],252:[function(require,module,exports) {
require("./_typed-array")("Int8",1,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":474}],253:[function(require,module,exports) {
require("./_typed-array")("Uint8",1,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":474}],254:[function(require,module,exports) {
require("./_typed-array")("Uint8",1,function(r){return function(n,t,e){return r(this,n,t,e)}},!0);
},{"./_typed-array":474}],255:[function(require,module,exports) {
require("./_typed-array")("Int16",2,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":474}],256:[function(require,module,exports) {
require("./_typed-array")("Uint16",2,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":474}],257:[function(require,module,exports) {
require("./_typed-array")("Int32",4,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":474}],258:[function(require,module,exports) {
require("./_typed-array")("Uint32",4,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":474}],259:[function(require,module,exports) {
require("./_typed-array")("Float32",4,function(r){return function(t,n,e){return r(this,t,n,e)}});
},{"./_typed-array":474}],260:[function(require,module,exports) {
require("./_typed-array")("Float64",8,function(r){return function(t,n,e){return r(this,t,n,e)}});
},{"./_typed-array":474}],261:[function(require,module,exports) {
var e=require("./_export"),r=require("./_a-function"),n=require("./_an-object"),i=(require("./_global").Reflect||{}).apply,u=Function.apply;e(e.S+e.F*!require("./_fails")(function(){i(function(){})}),"Reflect",{apply:function(e,a,l){var t=r(e),c=n(l);return i?i(t,a,c):u.call(t,a,c)}});
},{"./_export":370,"./_a-function":443,"./_an-object":381,"./_global":397,"./_fails":396}],262:[function(require,module,exports) {
var e=require("./_export"),r=require("./_object-create"),n=require("./_a-function"),t=require("./_an-object"),u=require("./_is-object"),c=require("./_fails"),i=require("./_bind"),o=(require("./_global").Reflect||{}).construct,a=c(function(){function e(){}return!(o(function(){},[],e)instanceof e)}),l=!c(function(){o(function(){})});e(e.S+e.F*(a||l),"Reflect",{construct:function(e,c){n(e),t(c);var f=arguments.length<3?e:n(arguments[2]);if(l&&!a)return o(e,c,f);if(e==f){switch(c.length){case 0:return new e;case 1:return new e(c[0]);case 2:return new e(c[0],c[1]);case 3:return new e(c[0],c[1],c[2]);case 4:return new e(c[0],c[1],c[2],c[3])}var p=[null];return p.push.apply(p,c),new(i.apply(e,p))}var s=f.prototype,q=r(u(s)?s:Object.prototype),_=Function.apply.call(e,q,c);return u(_)?_:q}});
},{"./_export":370,"./_object-create":386,"./_a-function":443,"./_an-object":381,"./_is-object":382,"./_fails":396,"./_bind":406,"./_global":397}],263:[function(require,module,exports) {
var e=require("./_object-dp"),r=require("./_export"),t=require("./_an-object"),i=require("./_to-primitive");r(r.S+r.F*require("./_fails")(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(r,u,f){t(r),u=i(u,!0),t(f);try{return e.f(r,u,f),!0}catch(e){return!1}}});
},{"./_object-dp":389,"./_export":370,"./_an-object":381,"./_to-primitive":384,"./_fails":396}],264:[function(require,module,exports) {
var e=require("./_export"),r=require("./_object-gopd").f,t=require("./_an-object");e(e.S,"Reflect",{deleteProperty:function(e,o){var u=r(t(e),o);return!(u&&!u.configurable)&&delete e[o]}});
},{"./_export":370,"./_object-gopd":388,"./_an-object":381}],265:[function(require,module,exports) {
"use strict";var e=require("./_export"),t=require("./_an-object"),i=function(e){this._t=t(e),this._i=0;var i,r=this._k=[];for(i in e)r.push(i)};require("./_iter-create")(i,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),e(e.S,"Reflect",{enumerate:function(e){return new i(e)}});
},{"./_export":370,"./_an-object":381,"./_iter-create":475}],266:[function(require,module,exports) {
var e=require("./_object-gopd"),r=require("./_object-gpo"),t=require("./_has"),i=require("./_export"),o=require("./_is-object"),u=require("./_an-object");function a(i,c){var v,g,l=arguments.length<3?i:arguments[2];return u(i)===l?i[c]:(v=e.f(i,c))?t(v,"value")?v.value:void 0!==v.get?v.get.call(l):void 0:o(g=r(i))?a(g,c,l):void 0}i(i.S,"Reflect",{get:a});
},{"./_object-gopd":388,"./_object-gpo":401,"./_has":368,"./_export":370,"./_is-object":382,"./_an-object":381}],267:[function(require,module,exports) {
var e=require("./_object-gopd"),r=require("./_export"),t=require("./_an-object");r(r.S,"Reflect",{getOwnPropertyDescriptor:function(r,o){return e.f(t(r),o)}});
},{"./_object-gopd":388,"./_export":370,"./_an-object":381}],268:[function(require,module,exports) {
var e=require("./_export"),r=require("./_object-gpo"),t=require("./_an-object");e(e.S,"Reflect",{getPrototypeOf:function(e){return r(t(e))}});
},{"./_export":370,"./_object-gpo":401,"./_an-object":381}],269:[function(require,module,exports) {
var e=require("./_export");e(e.S,"Reflect",{has:function(e,r){return r in e}});
},{"./_export":370}],270:[function(require,module,exports) {
var e=require("./_export"),r=require("./_an-object"),t=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(e){return r(e),!t||t(e)}});
},{"./_export":370,"./_an-object":381}],476:[function(require,module,exports) {
var e=require("./_object-gopn"),r=require("./_object-gops"),o=require("./_an-object"),t=require("./_global").Reflect;module.exports=t&&t.ownKeys||function(t){var c=e.f(o(t)),n=r.f;return n?c.concat(n(t)):c};
},{"./_object-gopn":391,"./_object-gops":393,"./_an-object":381,"./_global":397}],271:[function(require,module,exports) {
var e=require("./_export");e(e.S,"Reflect",{ownKeys:require("./_own-keys")});
},{"./_export":370,"./_own-keys":476}],272:[function(require,module,exports) {
var e=require("./_export"),r=require("./_an-object"),t=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(e){r(e);try{return t&&t(e),!0}catch(e){return!1}}});
},{"./_export":370,"./_an-object":381}],273:[function(require,module,exports) {
var e=require("./_object-dp"),r=require("./_object-gopd"),t=require("./_object-gpo"),i=require("./_has"),u=require("./_export"),o=require("./_property-desc"),c=require("./_an-object"),a=require("./_is-object");function q(u,_,f){var l,b,n=arguments.length<4?u:arguments[3],p=r.f(c(u),_);if(!p){if(a(b=t(u)))return q(b,_,f,n);p=o(0)}return i(p,"value")?!(!1===p.writable||!a(n))&&((l=r.f(n,_)||o(0)).value=f,e.f(n,_,l),!0):void 0!==p.set&&(p.set.call(n,f),!0)}u(u.S,"Reflect",{set:q});
},{"./_object-dp":389,"./_object-gopd":388,"./_object-gpo":401,"./_has":368,"./_export":370,"./_property-desc":385,"./_an-object":381,"./_is-object":382}],274:[function(require,module,exports) {
var e=require("./_export"),r=require("./_set-proto");r&&e(e.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(e){return!1}}});
},{"./_export":370,"./_set-proto":404}],275:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-includes")(!0);r(r.P,"Array",{includes:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")("includes");
},{"./_export":370,"./_array-includes":449,"./_add-to-unscopables":451}],477:[function(require,module,exports) {
"use strict";var r=require("./_is-array"),e=require("./_is-object"),i=require("./_to-length"),t=require("./_ctx"),o=require("./_wks")("isConcatSpreadable");function u(s,a,n,c,f,l,q,_){for(var d,h,p=f,v=0,b=!!q&&t(q,_,3);v<c;){if(v in n){if(d=b?b(n[v],v,a):n[v],h=!1,e(d)&&(h=void 0!==(h=d[o])?!!h:r(d)),h&&l>0)p=u(s,a,d,i(d.length),p,l-1)-1;else{if(p>=9007199254740991)throw TypeError();s[p]=d}p++}v++}return p}module.exports=u;
},{"./_is-array":380,"./_is-object":382,"./_to-length":421,"./_ctx":436,"./_wks":376}],276:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_flatten-into-array"),t=require("./_to-object"),a=require("./_to-length"),i=require("./_a-function"),u=require("./_array-species-create");r(r.P,"Array",{flatMap:function(r){var n,o,c=t(this);return i(r),n=a(c.length),o=u(c,0),e(o,c,c,n,0,1,r,arguments[1]),o}}),require("./_add-to-unscopables")("flatMap");
},{"./_export":370,"./_flatten-into-array":477,"./_to-object":400,"./_to-length":421,"./_a-function":443,"./_array-species-create":478,"./_add-to-unscopables":451}],277:[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_flatten-into-array"),t=require("./_to-object"),i=require("./_to-length"),a=require("./_to-integer"),n=require("./_array-species-create");e(e.P,"Array",{flatten:function(){var e=arguments[0],u=t(this),o=i(u.length),q=n(u,0);return r(q,u,u,o,0,void 0===e?1:a(e)),q}}),require("./_add-to-unscopables")("flatten");
},{"./_export":370,"./_flatten-into-array":477,"./_to-object":400,"./_to-length":421,"./_to-integer":412,"./_array-species-create":478,"./_add-to-unscopables":451}],278:[function(require,module,exports) {
"use strict";var r=require("./_export"),t=require("./_string-at")(!0);r(r.P,"String",{at:function(r){return t(this,r)}});
},{"./_export":370,"./_string-at":422}],479:[function(require,module,exports) {
var e=require("./_to-length"),r=require("./_string-repeat"),t=require("./_defined");module.exports=function(i,n,l,g){var u=String(t(i)),a=u.length,h=void 0===l?" ":String(l),o=e(n);if(o<=a||""==h)return u;var c=o-a,d=r.call(h,Math.ceil(c/h.length));return d.length>c&&(d=d.slice(0,c)),g?d+u:u+d};
},{"./_to-length":421,"./_string-repeat":414,"./_defined":485}],480:[function(require,module,exports) {

var e=require("./_global"),r=e.navigator;module.exports=r&&r.userAgent||"";
},{"./_global":397}],279:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_string-pad"),t=require("./_user-agent");r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(t),"String",{padStart:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0,!0)}});
},{"./_export":370,"./_string-pad":479,"./_user-agent":480}],280:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_string-pad"),t=require("./_user-agent");r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(t),"String",{padEnd:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0,!1)}});
},{"./_export":370,"./_string-pad":479,"./_user-agent":480}],281:[function(require,module,exports) {
"use strict";require("./_string-trim")("trimLeft",function(t){return function(){return t(this,1)}},"trimStart");
},{"./_string-trim":411}],282:[function(require,module,exports) {
"use strict";require("./_string-trim")("trimRight",function(t){return function(){return t(this,2)}},"trimEnd");
},{"./_string-trim":411}],283:[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_defined"),t=require("./_to-length"),i=require("./_is-regexp"),n=require("./_flags"),s=RegExp.prototype,g=function(e,r){this._r=e,this._s=r};require("./_iter-create")(g,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),e(e.P,"String",{matchAll:function(e){if(r(this),!i(e))throw TypeError(e+" is not a regexp!");var u=String(this),a="flags"in s?String(e.flags):n.call(e),l=new RegExp(e.source,~a.indexOf("g")?a:"g"+a);return l.lastIndex=t(e.lastIndex),new g(l,u)}});
},{"./_export":370,"./_defined":485,"./_to-length":421,"./_is-regexp":454,"./_flags":455,"./_iter-create":475}],284:[function(require,module,exports) {
require("./_wks-define")("asyncIterator");
},{"./_wks-define":378}],285:[function(require,module,exports) {
require("./_wks-define")("observable");
},{"./_wks-define":378}],286:[function(require,module,exports) {
var e=require("./_export"),r=require("./_own-keys"),t=require("./_to-iobject"),o=require("./_object-gopd"),i=require("./_create-property");e(e.S,"Object",{getOwnPropertyDescriptors:function(e){for(var u,c,n=t(e),p=o.f,q=r(n),_={},a=0;q.length>a;)void 0!==(c=p(n,u=q[a++]))&&i(_,u,c);return _}});
},{"./_export":370,"./_own-keys":476,"./_to-iobject":383,"./_object-gopd":388,"./_create-property":439}],481:[function(require,module,exports) {
var e=require("./_object-keys"),r=require("./_to-iobject"),t=require("./_object-pie").f;module.exports=function(o){return function(u){for(var i,n=r(u),c=e(n),f=c.length,l=0,a=[];f>l;)t.call(n,i=c[l++])&&a.push(o?[i,n[i]]:n[i]);return a}};
},{"./_object-keys":390,"./_to-iobject":383,"./_object-pie":392}],287:[function(require,module,exports) {
var r=require("./_export"),e=require("./_object-to-array")(!1);r(r.S,"Object",{values:function(r){return e(r)}});
},{"./_export":370,"./_object-to-array":481}],288:[function(require,module,exports) {
var r=require("./_export"),e=require("./_object-to-array")(!0);r(r.S,"Object",{entries:function(r){return e(r)}});
},{"./_export":370,"./_object-to-array":481}],482:[function(require,module,exports) {
"use strict";module.exports=require("./_library")||!require("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete require("./_global")[e]});
},{"./_library":394,"./_fails":396,"./_global":397}],289:[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_a-function"),i=require("./_object-dp");require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__defineGetter__:function(e,u){i.f(r(this),e,{get:t(u),enumerable:!0,configurable:!0})}});
},{"./_export":370,"./_to-object":400,"./_a-function":443,"./_object-dp":389,"./_descriptors":369,"./_object-forced-pam":482}],290:[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_a-function"),i=require("./_object-dp");require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__defineSetter__:function(e,u){i.f(r(this),e,{set:t(u),enumerable:!0,configurable:!0})}});
},{"./_export":370,"./_to-object":400,"./_a-function":443,"./_object-dp":389,"./_descriptors":369,"./_object-forced-pam":482}],291:[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_to-primitive"),i=require("./_object-gpo"),o=require("./_object-gopd").f;require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var u,_=r(this),c=t(e,!0);do{if(u=o(_,c))return u.get}while(_=i(_))}});
},{"./_export":370,"./_to-object":400,"./_to-primitive":384,"./_object-gpo":401,"./_object-gopd":388,"./_descriptors":369,"./_object-forced-pam":482}],292:[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_to-primitive"),i=require("./_object-gpo"),o=require("./_object-gopd").f;require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var u,_=r(this),c=t(e,!0);do{if(u=o(_,c))return u.set}while(_=i(_))}});
},{"./_export":370,"./_to-object":400,"./_to-primitive":384,"./_object-gpo":401,"./_object-gopd":388,"./_descriptors":369,"./_object-forced-pam":482}],489:[function(require,module,exports) {
var r=require("./_for-of");module.exports=function(e,o){var u=[];return r(e,!1,u.push,u,o),u};
},{"./_for-of":464}],483:[function(require,module,exports) {
var r=require("./_classof"),e=require("./_array-from-iterable");module.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return e(this)}};
},{"./_classof":405,"./_array-from-iterable":489}],293:[function(require,module,exports) {
var e=require("./_export");e(e.P+e.R,"Map",{toJSON:require("./_collection-to-json")("Map")});
},{"./_export":370,"./_collection-to-json":483}],294:[function(require,module,exports) {
var e=require("./_export");e(e.P+e.R,"Set",{toJSON:require("./_collection-to-json")("Set")});
},{"./_export":370,"./_collection-to-json":483}],484:[function(require,module,exports) {
"use strict";var r=require("./_export");module.exports=function(e){r(r.S,e,{of:function(){for(var r=arguments.length,e=new Array(r);r--;)e[r]=arguments[r];return new this(e)}})};
},{"./_export":370}],295:[function(require,module,exports) {
require("./_set-collection-of")("Map");
},{"./_set-collection-of":484}],296:[function(require,module,exports) {
require("./_set-collection-of")("Set");
},{"./_set-collection-of":484}],297:[function(require,module,exports) {
require("./_set-collection-of")("WeakMap");
},{"./_set-collection-of":484}],298:[function(require,module,exports) {
require("./_set-collection-of")("WeakSet");
},{"./_set-collection-of":484}],486:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_a-function"),i=require("./_ctx"),t=require("./_for-of");module.exports=function(u){r(r.S,u,{from:function(r){var u,o,n,s,f=arguments[1];return e(this),(u=void 0!==f)&&e(f),void 0==r?new this:(o=[],u?(n=0,s=i(f,arguments[2],2),t(r,!1,function(r){o.push(s(r,n++))})):t(r,!1,o.push,o),new this(o))}})};
},{"./_export":370,"./_a-function":443,"./_ctx":436,"./_for-of":464}],299:[function(require,module,exports) {
require("./_set-collection-from")("Map");
},{"./_set-collection-from":486}],300:[function(require,module,exports) {
require("./_set-collection-from")("Set");
},{"./_set-collection-from":486}],301:[function(require,module,exports) {
require("./_set-collection-from")("WeakMap");
},{"./_set-collection-from":486}],302:[function(require,module,exports) {
require("./_set-collection-from")("WeakSet");
},{"./_set-collection-from":486}],303:[function(require,module,exports) {
var r=require("./_export");r(r.G,{global:require("./_global")});
},{"./_export":370,"./_global":397}],304:[function(require,module,exports) {
var e=require("./_export");e(e.S,"System",{global:require("./_global")});
},{"./_export":370,"./_global":397}],305:[function(require,module,exports) {
var r=require("./_export"),e=require("./_cof");r(r.S,"Error",{isError:function(r){return"Error"===e(r)}});
},{"./_export":370,"./_cof":409}],306:[function(require,module,exports) {
var a=require("./_export");a(a.S,"Math",{clamp:function(a,r,t){return Math.min(t,Math.max(r,a))}});
},{"./_export":370}],307:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{DEG_PER_RAD:Math.PI/180});
},{"./_export":370}],308:[function(require,module,exports) {
var e=require("./_export"),r=180/Math.PI;e(e.S,"Math",{degrees:function(e){return e*r}});
},{"./_export":370}],487:[function(require,module,exports) {
module.exports=Math.scale||function(e,t,n,a,l){return 0===arguments.length||e!=e||t!=t||n!=n||a!=a||l!=l?NaN:e===1/0||e===-1/0?e:(e-t)*(l-a)/(n-t)+a};
},{}],309:[function(require,module,exports) {
var r=require("./_export"),e=require("./_math-scale"),a=require("./_math-fround");r(r.S,"Math",{fscale:function(r,t,u,i,n){return a(e(r,t,u,i,n))}});
},{"./_export":370,"./_math-scale":487,"./_math-fround":419}],310:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{iaddh:function(r,a,e,t){var i=r>>>0,n=e>>>0;return(a>>>0)+(t>>>0)+((i&n|(i|n)&~(i+n>>>0))>>>31)|0}});
},{"./_export":370}],311:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{isubh:function(r,e,t,u){var a=r>>>0,i=t>>>0;return(e>>>0)-(u>>>0)-((~a&i|~(a^i)&a-i>>>0)>>>31)|0}});
},{"./_export":370}],312:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{imulh:function(r,e){var t=+r,u=+e,a=65535&t,i=65535&u,n=t>>16,h=u>>16,o=(n*i>>>0)+(a*i>>>16);return n*h+(o>>16)+((a*h>>>0)+(65535&o)>>16)}});
},{"./_export":370}],313:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{RAD_PER_DEG:180/Math.PI});
},{"./_export":370}],314:[function(require,module,exports) {
var r=require("./_export"),a=Math.PI/180;r(r.S,"Math",{radians:function(r){return r*a}});
},{"./_export":370}],315:[function(require,module,exports) {
var e=require("./_export");e(e.S,"Math",{scale:require("./_math-scale")});
},{"./_export":370,"./_math-scale":487}],316:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{umulh:function(r,u){var e=+r,t=+u,a=65535&e,n=65535&t,h=e>>>16,i=t>>>16,o=(h*n>>>0)+(a*n>>>16);return h*i+(o>>>16)+((a*i>>>0)+(65535&o)>>>16)}});
},{"./_export":370}],317:[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{signbit:function(r){return(r=+r)!=r?r:0==r?1/r==1/0:r>0}});
},{"./_export":370}],318:[function(require,module,exports) {

"use strict";var r=require("./_export"),e=require("./_core"),t=require("./_global"),n=require("./_species-constructor"),i=require("./_promise-resolve");r(r.P+r.R,"Promise",{finally:function(r){var o=n(this,e.Promise||t.Promise),u="function"==typeof r;return this.then(u?function(e){return i(o,r()).then(function(){return e})}:r,u?function(e){return i(o,r()).then(function(){throw e})}:r)}});
},{"./_export":370,"./_core":334,"./_global":397,"./_species-constructor":465,"./_promise-resolve":470}],319:[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_new-promise-capability"),i=require("./_perform");r(r.S,"Promise",{try:function(r){var t=e.f(this),o=i(r);return(o.e?t.reject:t.resolve)(o.v),t.promise}});
},{"./_export":370,"./_new-promise-capability":468,"./_perform":469}],488:[function(require,module,exports) {
var e=require("./es6.map"),r=require("./_export"),t=require("./_shared")("metadata"),n=t.store||(t.store=new(require("./es6.weak-map"))),i=function(r,t,i){var o=n.get(r);if(!o){if(!i)return;n.set(r,o=new e)}var u=o.get(t);if(!u){if(!i)return;o.set(t,u=new e)}return u},o=function(e,r,t){var n=i(r,t,!1);return void 0!==n&&n.has(e)},u=function(e,r,t){var n=i(r,t,!1);return void 0===n?void 0:n.get(e)},a=function(e,r,t,n){i(t,n,!0).set(e,r)},s=function(e,r){var t=i(e,r,!1),n=[];return t&&t.forEach(function(e,r){n.push(r)}),n},f=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},c=function(e){r(r.S,"Reflect",e)};module.exports={store:n,map:i,has:o,get:u,set:a,keys:s,key:f,exp:c};
},{"./es6.map":246,"./_export":370,"./_shared":373,"./es6.weak-map":248}],320:[function(require,module,exports) {
var e=require("./_metadata"),a=require("./_an-object"),t=e.key,r=e.set;e.exp({defineMetadata:function(e,i,n,d){r(e,i,a(n),t(d))}});
},{"./_metadata":488,"./_an-object":381}],321:[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),r=e.key,a=e.map,i=e.store;e.exp({deleteMetadata:function(e,d){var n=arguments.length<3?void 0:r(arguments[2]),u=a(t(d),n,!1);if(void 0===u||!u.delete(e))return!1;if(u.size)return!0;var l=i.get(d);return l.delete(n),!!l.size||i.delete(d)}});
},{"./_metadata":488,"./_an-object":381}],322:[function(require,module,exports) {
var e=require("./_metadata"),r=require("./_an-object"),t=require("./_object-gpo"),a=e.has,n=e.get,u=e.key,i=function(e,r,u){if(a(e,r,u))return n(e,r,u);var o=t(r);return null!==o?i(e,o,u):void 0};e.exp({getMetadata:function(e,t){return i(e,r(t),arguments.length<3?void 0:u(arguments[2]))}});
},{"./_metadata":488,"./_an-object":381,"./_object-gpo":401}],323:[function(require,module,exports) {
var e=require("./es6.set"),r=require("./_array-from-iterable"),t=require("./_metadata"),a=require("./_an-object"),n=require("./_object-gpo"),u=t.keys,i=t.key,o=function(t,a){var i=u(t,a),c=n(t);if(null===c)return i;var l=o(c,a);return l.length?i.length?r(new e(i.concat(l))):l:i};t.exp({getMetadataKeys:function(e){return o(a(e),arguments.length<2?void 0:i(arguments[1]))}});
},{"./es6.set":247,"./_array-from-iterable":489,"./_metadata":488,"./_an-object":381,"./_object-gpo":401}],324:[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),a=e.get,r=e.key;e.exp({getOwnMetadata:function(e,n){return a(e,t(n),arguments.length<3?void 0:r(arguments[2]))}});
},{"./_metadata":488,"./_an-object":381}],325:[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),a=e.keys,r=e.key;e.exp({getOwnMetadataKeys:function(e){return a(t(e),arguments.length<2?void 0:r(arguments[1]))}});
},{"./_metadata":488,"./_an-object":381}],326:[function(require,module,exports) {
var e=require("./_metadata"),r=require("./_an-object"),t=require("./_object-gpo"),a=e.has,n=e.key,u=function(e,r,n){if(a(e,r,n))return!0;var i=t(r);return null!==i&&u(e,i,n)};e.exp({hasMetadata:function(e,t){return u(e,r(t),arguments.length<3?void 0:n(arguments[2]))}});
},{"./_metadata":488,"./_an-object":381,"./_object-gpo":401}],327:[function(require,module,exports) {
var e=require("./_metadata"),a=require("./_an-object"),t=e.has,r=e.key;e.exp({hasOwnMetadata:function(e,n){return t(e,a(n),arguments.length<3?void 0:r(arguments[2]))}});
},{"./_metadata":488,"./_an-object":381}],328:[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),a=require("./_a-function"),r=e.key,n=e.set;e.exp({metadata:function(e,i){return function(u,o){n(e,i,(void 0!==o?t:a)(u),r(o))}}});
},{"./_metadata":488,"./_an-object":381,"./_a-function":443}],329:[function(require,module,exports) {

var r=require("./_export"),e=require("./_microtask")(),i=require("./_global").process,o="process"==require("./_cof")(i);r(r.G,{asap:function(r){var a=o&&i.domain;e(a?a.bind(r):r)}});
},{"./_export":370,"./_microtask":467,"./_global":397,"./_cof":409}],330:[function(require,module,exports) {

"use strict";var r=require("./_export"),t=require("./_global"),n=require("./_core"),e=require("./_microtask")(),i=require("./_wks")("observable"),o=require("./_a-function"),u=require("./_an-object"),c=require("./_an-instance"),f=require("./_redefine-all"),s=require("./_hide"),a=require("./_for-of"),v=a.RETURN,h=function(r){return null==r?void 0:o(r)},l=function(r){var t=r._c;t&&(r._c=void 0,t())},_=function(r){return void 0===r._o},b=function(r){_(r)||(r._o=void 0,l(r))},y=function(r,t){u(r),this._c=void 0,this._o=r,r=new p(this);try{var n=t(r),e=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){e.unsubscribe()}:o(n),this._c=n)}catch(t){return void r.error(t)}_(this)&&l(this)};y.prototype=f({},{unsubscribe:function(){b(this)}});var p=function(r){this._s=r};p.prototype=f({},{next:function(r){var t=this._s;if(!_(t)){var n=t._o;try{var e=h(n.next);if(e)return e.call(n,r)}catch(r){try{b(t)}finally{throw r}}}},error:function(r){var t=this._s;if(_(t))throw r;var n=t._o;t._o=void 0;try{var e=h(n.error);if(!e)throw r;r=e.call(n,r)}catch(r){try{l(t)}finally{throw r}}return l(t),r},complete:function(r){var t=this._s;if(!_(t)){var n=t._o;t._o=void 0;try{var e=h(n.complete);r=e?e.call(n,r):void 0}catch(r){try{l(t)}finally{throw r}}return l(t),r}}});var w=function(r){c(this,w,"Observable","_f")._f=o(r)};f(w.prototype,{subscribe:function(r){return new y(r,this._f)},forEach:function(r){var e=this;return new(n.Promise||t.Promise)(function(t,n){o(r);var i=e.subscribe({next:function(t){try{return r(t)}catch(r){n(r),i.unsubscribe()}},error:n,complete:t})})}}),f(w,{from:function(r){var t="function"==typeof this?this:w,n=h(u(r)[i]);if(n){var o=u(n.call(r));return o.constructor===t?o:new t(function(r){return o.subscribe(r)})}return new t(function(t){var n=!1;return e(function(){if(!n){try{if(a(r,!1,function(r){if(t.next(r),n)return v})===v)return}catch(r){if(n)throw r;return void t.error(r)}t.complete()}}),function(){n=!0}})},of:function(){for(var r=0,t=arguments.length,n=new Array(t);r<t;)n[r]=arguments[r++];return new("function"==typeof this?this:w)(function(r){var t=!1;return e(function(){if(!t){for(var e=0;e<n.length;++e)if(r.next(n[e]),t)return;r.complete()}}),function(){t=!0}})}}),s(w.prototype,i,function(){return this}),r(r.G,{Observable:w}),require("./_set-species")("Observable");
},{"./_export":370,"./_global":397,"./_core":334,"./_microtask":467,"./_wks":376,"./_a-function":443,"./_an-object":381,"./_an-instance":463,"./_redefine-all":471,"./_hide":395,"./_for-of":464,"./_set-species":453}],331:[function(require,module,exports) {

var e=require("./_global"),t=require("./_export"),n=require("./_user-agent"),r=[].slice,u=/MSIE .\./.test(n),i=function(e){return function(t,n){var u=arguments.length>2,i=!!u&&r.call(arguments,2);return e(u?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};t(t.G+t.B+t.F*u,{setTimeout:i(e.setTimeout),setInterval:i(e.setInterval)});
},{"./_global":397,"./_export":370,"./_user-agent":480}],332:[function(require,module,exports) {
var e=require("./_export"),r=require("./_task");e(e.G+e.B,{setImmediate:r.set,clearImmediate:r.clear});
},{"./_export":370,"./_task":466}],333:[function(require,module,exports) {

for(var e=require("./es6.array.iterator"),t=require("./_object-keys"),i=require("./_redefine"),r=require("./_global"),s=require("./_hide"),L=require("./_iterators"),a=require("./_wks"),o=a("iterator"),l=a("toStringTag"),S=L.Array,n={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},u=t(n),T=0;T<u.length;T++){var c,g=u[T],M=n[g],y=r[g],f=y&&y.prototype;if(f&&(f[o]||s(f,o,S),f[l]||s(f,l,g),L[g]=S,M))for(c in e)f[c]||i(f,c,e[c],!0)}
},{"./es6.array.iterator":237,"./_object-keys":390,"./_redefine":371,"./_global":397,"./_hide":395,"./_iterators":457,"./_wks":376}],59:[function(require,module,exports) {
require("./modules/es6.symbol"),require("./modules/es6.object.create"),require("./modules/es6.object.define-property"),require("./modules/es6.object.define-properties"),require("./modules/es6.object.get-own-property-descriptor"),require("./modules/es6.object.get-prototype-of"),require("./modules/es6.object.keys"),require("./modules/es6.object.get-own-property-names"),require("./modules/es6.object.freeze"),require("./modules/es6.object.seal"),require("./modules/es6.object.prevent-extensions"),require("./modules/es6.object.is-frozen"),require("./modules/es6.object.is-sealed"),require("./modules/es6.object.is-extensible"),require("./modules/es6.object.assign"),require("./modules/es6.object.is"),require("./modules/es6.object.set-prototype-of"),require("./modules/es6.object.to-string"),require("./modules/es6.function.bind"),require("./modules/es6.function.name"),require("./modules/es6.function.has-instance"),require("./modules/es6.parse-int"),require("./modules/es6.parse-float"),require("./modules/es6.number.constructor"),require("./modules/es6.number.to-fixed"),require("./modules/es6.number.to-precision"),require("./modules/es6.number.epsilon"),require("./modules/es6.number.is-finite"),require("./modules/es6.number.is-integer"),require("./modules/es6.number.is-nan"),require("./modules/es6.number.is-safe-integer"),require("./modules/es6.number.max-safe-integer"),require("./modules/es6.number.min-safe-integer"),require("./modules/es6.number.parse-float"),require("./modules/es6.number.parse-int"),require("./modules/es6.math.acosh"),require("./modules/es6.math.asinh"),require("./modules/es6.math.atanh"),require("./modules/es6.math.cbrt"),require("./modules/es6.math.clz32"),require("./modules/es6.math.cosh"),require("./modules/es6.math.expm1"),require("./modules/es6.math.fround"),require("./modules/es6.math.hypot"),require("./modules/es6.math.imul"),require("./modules/es6.math.log10"),require("./modules/es6.math.log1p"),require("./modules/es6.math.log2"),require("./modules/es6.math.sign"),require("./modules/es6.math.sinh"),require("./modules/es6.math.tanh"),require("./modules/es6.math.trunc"),require("./modules/es6.string.from-code-point"),require("./modules/es6.string.raw"),require("./modules/es6.string.trim"),require("./modules/es6.string.iterator"),require("./modules/es6.string.code-point-at"),require("./modules/es6.string.ends-with"),require("./modules/es6.string.includes"),require("./modules/es6.string.repeat"),require("./modules/es6.string.starts-with"),require("./modules/es6.string.anchor"),require("./modules/es6.string.big"),require("./modules/es6.string.blink"),require("./modules/es6.string.bold"),require("./modules/es6.string.fixed"),require("./modules/es6.string.fontcolor"),require("./modules/es6.string.fontsize"),require("./modules/es6.string.italics"),require("./modules/es6.string.link"),require("./modules/es6.string.small"),require("./modules/es6.string.strike"),require("./modules/es6.string.sub"),require("./modules/es6.string.sup"),require("./modules/es6.date.now"),require("./modules/es6.date.to-json"),require("./modules/es6.date.to-iso-string"),require("./modules/es6.date.to-string"),require("./modules/es6.date.to-primitive"),require("./modules/es6.array.is-array"),require("./modules/es6.array.from"),require("./modules/es6.array.of"),require("./modules/es6.array.join"),require("./modules/es6.array.slice"),require("./modules/es6.array.sort"),require("./modules/es6.array.for-each"),require("./modules/es6.array.map"),require("./modules/es6.array.filter"),require("./modules/es6.array.some"),require("./modules/es6.array.every"),require("./modules/es6.array.reduce"),require("./modules/es6.array.reduce-right"),require("./modules/es6.array.index-of"),require("./modules/es6.array.last-index-of"),require("./modules/es6.array.copy-within"),require("./modules/es6.array.fill"),require("./modules/es6.array.find"),require("./modules/es6.array.find-index"),require("./modules/es6.array.species"),require("./modules/es6.array.iterator"),require("./modules/es6.regexp.constructor"),require("./modules/es6.regexp.to-string"),require("./modules/es6.regexp.flags"),require("./modules/es6.regexp.match"),require("./modules/es6.regexp.replace"),require("./modules/es6.regexp.search"),require("./modules/es6.regexp.split"),require("./modules/es6.promise"),require("./modules/es6.map"),require("./modules/es6.set"),require("./modules/es6.weak-map"),require("./modules/es6.weak-set"),require("./modules/es6.typed.array-buffer"),require("./modules/es6.typed.data-view"),require("./modules/es6.typed.int8-array"),require("./modules/es6.typed.uint8-array"),require("./modules/es6.typed.uint8-clamped-array"),require("./modules/es6.typed.int16-array"),require("./modules/es6.typed.uint16-array"),require("./modules/es6.typed.int32-array"),require("./modules/es6.typed.uint32-array"),require("./modules/es6.typed.float32-array"),require("./modules/es6.typed.float64-array"),require("./modules/es6.reflect.apply"),require("./modules/es6.reflect.construct"),require("./modules/es6.reflect.define-property"),require("./modules/es6.reflect.delete-property"),require("./modules/es6.reflect.enumerate"),require("./modules/es6.reflect.get"),require("./modules/es6.reflect.get-own-property-descriptor"),require("./modules/es6.reflect.get-prototype-of"),require("./modules/es6.reflect.has"),require("./modules/es6.reflect.is-extensible"),require("./modules/es6.reflect.own-keys"),require("./modules/es6.reflect.prevent-extensions"),require("./modules/es6.reflect.set"),require("./modules/es6.reflect.set-prototype-of"),require("./modules/es7.array.includes"),require("./modules/es7.array.flat-map"),require("./modules/es7.array.flatten"),require("./modules/es7.string.at"),require("./modules/es7.string.pad-start"),require("./modules/es7.string.pad-end"),require("./modules/es7.string.trim-left"),require("./modules/es7.string.trim-right"),require("./modules/es7.string.match-all"),require("./modules/es7.symbol.async-iterator"),require("./modules/es7.symbol.observable"),require("./modules/es7.object.get-own-property-descriptors"),require("./modules/es7.object.values"),require("./modules/es7.object.entries"),require("./modules/es7.object.define-getter"),require("./modules/es7.object.define-setter"),require("./modules/es7.object.lookup-getter"),require("./modules/es7.object.lookup-setter"),require("./modules/es7.map.to-json"),require("./modules/es7.set.to-json"),require("./modules/es7.map.of"),require("./modules/es7.set.of"),require("./modules/es7.weak-map.of"),require("./modules/es7.weak-set.of"),require("./modules/es7.map.from"),require("./modules/es7.set.from"),require("./modules/es7.weak-map.from"),require("./modules/es7.weak-set.from"),require("./modules/es7.global"),require("./modules/es7.system.global"),require("./modules/es7.error.is-error"),require("./modules/es7.math.clamp"),require("./modules/es7.math.deg-per-rad"),require("./modules/es7.math.degrees"),require("./modules/es7.math.fscale"),require("./modules/es7.math.iaddh"),require("./modules/es7.math.isubh"),require("./modules/es7.math.imulh"),require("./modules/es7.math.rad-per-deg"),require("./modules/es7.math.radians"),require("./modules/es7.math.scale"),require("./modules/es7.math.umulh"),require("./modules/es7.math.signbit"),require("./modules/es7.promise.finally"),require("./modules/es7.promise.try"),require("./modules/es7.reflect.define-metadata"),require("./modules/es7.reflect.delete-metadata"),require("./modules/es7.reflect.get-metadata"),require("./modules/es7.reflect.get-metadata-keys"),require("./modules/es7.reflect.get-own-metadata"),require("./modules/es7.reflect.get-own-metadata-keys"),require("./modules/es7.reflect.has-metadata"),require("./modules/es7.reflect.has-own-metadata"),require("./modules/es7.reflect.metadata"),require("./modules/es7.asap"),require("./modules/es7.observable"),require("./modules/web.timers"),require("./modules/web.immediate"),require("./modules/web.dom.iterable"),module.exports=require("./modules/_core");
},{"./modules/es6.symbol":138,"./modules/es6.object.create":139,"./modules/es6.object.define-property":140,"./modules/es6.object.define-properties":141,"./modules/es6.object.get-own-property-descriptor":142,"./modules/es6.object.get-prototype-of":143,"./modules/es6.object.keys":144,"./modules/es6.object.get-own-property-names":151,"./modules/es6.object.freeze":145,"./modules/es6.object.seal":146,"./modules/es6.object.prevent-extensions":147,"./modules/es6.object.is-frozen":148,"./modules/es6.object.is-sealed":149,"./modules/es6.object.is-extensible":150,"./modules/es6.object.assign":152,"./modules/es6.object.is":153,"./modules/es6.object.set-prototype-of":154,"./modules/es6.object.to-string":155,"./modules/es6.function.bind":156,"./modules/es6.function.name":157,"./modules/es6.function.has-instance":158,"./modules/es6.parse-int":159,"./modules/es6.parse-float":160,"./modules/es6.number.constructor":161,"./modules/es6.number.to-fixed":162,"./modules/es6.number.to-precision":163,"./modules/es6.number.epsilon":164,"./modules/es6.number.is-finite":165,"./modules/es6.number.is-integer":166,"./modules/es6.number.is-nan":167,"./modules/es6.number.is-safe-integer":168,"./modules/es6.number.max-safe-integer":169,"./modules/es6.number.min-safe-integer":170,"./modules/es6.number.parse-float":171,"./modules/es6.number.parse-int":172,"./modules/es6.math.acosh":173,"./modules/es6.math.asinh":174,"./modules/es6.math.atanh":175,"./modules/es6.math.cbrt":176,"./modules/es6.math.clz32":177,"./modules/es6.math.cosh":178,"./modules/es6.math.expm1":179,"./modules/es6.math.fround":180,"./modules/es6.math.hypot":181,"./modules/es6.math.imul":182,"./modules/es6.math.log10":183,"./modules/es6.math.log1p":184,"./modules/es6.math.log2":185,"./modules/es6.math.sign":186,"./modules/es6.math.sinh":187,"./modules/es6.math.tanh":188,"./modules/es6.math.trunc":189,"./modules/es6.string.from-code-point":190,"./modules/es6.string.raw":191,"./modules/es6.string.trim":192,"./modules/es6.string.iterator":193,"./modules/es6.string.code-point-at":194,"./modules/es6.string.ends-with":195,"./modules/es6.string.includes":196,"./modules/es6.string.repeat":197,"./modules/es6.string.starts-with":198,"./modules/es6.string.anchor":199,"./modules/es6.string.big":200,"./modules/es6.string.blink":201,"./modules/es6.string.bold":202,"./modules/es6.string.fixed":203,"./modules/es6.string.fontcolor":204,"./modules/es6.string.fontsize":205,"./modules/es6.string.italics":206,"./modules/es6.string.link":207,"./modules/es6.string.small":208,"./modules/es6.string.strike":209,"./modules/es6.string.sub":210,"./modules/es6.string.sup":211,"./modules/es6.date.now":212,"./modules/es6.date.to-json":213,"./modules/es6.date.to-iso-string":214,"./modules/es6.date.to-string":215,"./modules/es6.date.to-primitive":216,"./modules/es6.array.is-array":217,"./modules/es6.array.from":218,"./modules/es6.array.of":219,"./modules/es6.array.join":220,"./modules/es6.array.slice":221,"./modules/es6.array.sort":222,"./modules/es6.array.for-each":223,"./modules/es6.array.map":224,"./modules/es6.array.filter":225,"./modules/es6.array.some":226,"./modules/es6.array.every":227,"./modules/es6.array.reduce":228,"./modules/es6.array.reduce-right":229,"./modules/es6.array.index-of":230,"./modules/es6.array.last-index-of":231,"./modules/es6.array.copy-within":232,"./modules/es6.array.fill":233,"./modules/es6.array.find":234,"./modules/es6.array.find-index":235,"./modules/es6.array.species":236,"./modules/es6.array.iterator":237,"./modules/es6.regexp.constructor":238,"./modules/es6.regexp.to-string":239,"./modules/es6.regexp.flags":240,"./modules/es6.regexp.match":241,"./modules/es6.regexp.replace":242,"./modules/es6.regexp.search":243,"./modules/es6.regexp.split":244,"./modules/es6.promise":245,"./modules/es6.map":246,"./modules/es6.set":247,"./modules/es6.weak-map":248,"./modules/es6.weak-set":249,"./modules/es6.typed.array-buffer":250,"./modules/es6.typed.data-view":251,"./modules/es6.typed.int8-array":252,"./modules/es6.typed.uint8-array":253,"./modules/es6.typed.uint8-clamped-array":254,"./modules/es6.typed.int16-array":255,"./modules/es6.typed.uint16-array":256,"./modules/es6.typed.int32-array":257,"./modules/es6.typed.uint32-array":258,"./modules/es6.typed.float32-array":259,"./modules/es6.typed.float64-array":260,"./modules/es6.reflect.apply":261,"./modules/es6.reflect.construct":262,"./modules/es6.reflect.define-property":263,"./modules/es6.reflect.delete-property":264,"./modules/es6.reflect.enumerate":265,"./modules/es6.reflect.get":266,"./modules/es6.reflect.get-own-property-descriptor":267,"./modules/es6.reflect.get-prototype-of":268,"./modules/es6.reflect.has":269,"./modules/es6.reflect.is-extensible":270,"./modules/es6.reflect.own-keys":271,"./modules/es6.reflect.prevent-extensions":272,"./modules/es6.reflect.set":273,"./modules/es6.reflect.set-prototype-of":274,"./modules/es7.array.includes":275,"./modules/es7.array.flat-map":276,"./modules/es7.array.flatten":277,"./modules/es7.string.at":278,"./modules/es7.string.pad-start":279,"./modules/es7.string.pad-end":280,"./modules/es7.string.trim-left":281,"./modules/es7.string.trim-right":282,"./modules/es7.string.match-all":283,"./modules/es7.symbol.async-iterator":284,"./modules/es7.symbol.observable":285,"./modules/es7.object.get-own-property-descriptors":286,"./modules/es7.object.values":287,"./modules/es7.object.entries":288,"./modules/es7.object.define-getter":289,"./modules/es7.object.define-setter":290,"./modules/es7.object.lookup-getter":291,"./modules/es7.object.lookup-setter":292,"./modules/es7.map.to-json":293,"./modules/es7.set.to-json":294,"./modules/es7.map.of":295,"./modules/es7.set.of":296,"./modules/es7.weak-map.of":297,"./modules/es7.weak-set.of":298,"./modules/es7.map.from":299,"./modules/es7.set.from":300,"./modules/es7.weak-map.from":301,"./modules/es7.weak-set.from":302,"./modules/es7.global":303,"./modules/es7.system.global":304,"./modules/es7.error.is-error":305,"./modules/es7.math.clamp":306,"./modules/es7.math.deg-per-rad":307,"./modules/es7.math.degrees":308,"./modules/es7.math.fscale":309,"./modules/es7.math.iaddh":310,"./modules/es7.math.isubh":311,"./modules/es7.math.imulh":312,"./modules/es7.math.rad-per-deg":313,"./modules/es7.math.radians":314,"./modules/es7.math.scale":315,"./modules/es7.math.umulh":316,"./modules/es7.math.signbit":317,"./modules/es7.promise.finally":318,"./modules/es7.promise.try":319,"./modules/es7.reflect.define-metadata":320,"./modules/es7.reflect.delete-metadata":321,"./modules/es7.reflect.get-metadata":322,"./modules/es7.reflect.get-metadata-keys":323,"./modules/es7.reflect.get-own-metadata":324,"./modules/es7.reflect.get-own-metadata-keys":325,"./modules/es7.reflect.has-metadata":326,"./modules/es7.reflect.has-own-metadata":327,"./modules/es7.reflect.metadata":328,"./modules/es7.asap":329,"./modules/es7.observable":330,"./modules/web.timers":331,"./modules/web.immediate":332,"./modules/web.dom.iterable":333,"./modules/_core":334}],58:[function(require,module,exports) {
var global = (1,eval)("this");
var t=(0,eval)("this");!function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"==typeof module,h=t.regeneratorRuntime;if(h)u&&(module.exports=h);else{(h=t.regeneratorRuntime=u?module.exports:{}).wrap=w;var s="suspendedStart",f="suspendedYield",l="executing",p="completed",y={},v={};v[i]=function(){return this};var d=Object.getPrototypeOf,g=d&&d(d(P([])));g&&g!==e&&n.call(g,i)&&(v=g);var m=b.prototype=x.prototype=Object.create(v);E.prototype=m.constructor=b,b.constructor=E,b[c]=E.displayName="GeneratorFunction",h.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===E||"GeneratorFunction"===(r.displayName||r.name))},h.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(m),t},h.awrap=function(t){return{__await:t}},_(j.prototype),j.prototype[a]=function(){return this},h.AsyncIterator=j,h.async=function(t,r,e,n){var o=new j(w(t,r,e,n));return h.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(m),m[c]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},h.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},h.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(G),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function w(t,r,e,n){var o=r&&r.prototype instanceof x?r:x,i=Object.create(o.prototype),a=new N(n||[]);return i._invoke=function(t,r,e){var n=s;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return F()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=O(a,e);if(c){if(c===y)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===s)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var u=L(t,r,e);if("normal"===u.type){if(n=e.done?p:f,u.arg===y)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function L(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}function x(){}function E(){}function b(){}function _(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function j(t){var r;this._invoke=function(e,o){function i(){return new Promise(function(r,i){!function r(e,o,i,a){var c=L(t[e],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?Promise.resolve(h.__await).then(function(t){r("next",t,i,a)},function(t){r("throw",t,i,a)}):Promise.resolve(h).then(function(t){u.value=t,i(u)},a)}a(c.arg)}(e,o,r,i)})}return r=r?r.then(i,i):i()}}function O(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=L(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function k(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:F}}function F(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")());
},{}],25:[function(require,module,exports) {
var global = (1,eval)("this");
var e=(0,eval)("this");if(require("core-js/shim"),require("regenerator-runtime/runtime"),e._babelPolyfill)throw new Error("only one instance of @babel/polyfill is allowed");e._babelPolyfill=!0;
},{"core-js/shim":59,"regenerator-runtime/runtime":58}],491:[function(require,module,exports) {
function r(r,o){for(var e=-1,n=Array(r);++e<r;)n[e]=o(e);return n}module.exports=r;
},{}],116:[function(require,module,exports) {
var global = (1,eval)("this");
var e=(0,eval)("this"),t="object"==typeof e&&e&&e.Object===Object&&e;module.exports=t;
},{}],56:[function(require,module,exports) {
var e=require("./_freeGlobal"),t="object"==typeof self&&self&&self.Object===Object&&self,l=e||t||Function("return this")();module.exports=l;
},{"./_freeGlobal":116}],547:[function(require,module,exports) {
var o=require("./_root"),r=o.Symbol;module.exports=r;
},{"./_root":56}],630:[function(require,module,exports) {
var r=require("./_Symbol"),t=Object.prototype,e=t.hasOwnProperty,o=t.toString,a=r?r.toStringTag:void 0;function l(r){var t=e.call(r,a),l=r[a];try{r[a]=void 0;var c=!0}catch(r){}var i=o.call(r);return c&&(t?r[a]=l:delete r[a]),i}module.exports=l;
},{"./_Symbol":547}],631:[function(require,module,exports) {
var t=Object.prototype,o=t.toString;function r(t){return o.call(t)}module.exports=r;
},{}],580:[function(require,module,exports) {
var e=require("./_Symbol"),r=require("./_getRawTag"),o=require("./_objectToString"),t="[object Null]",i="[object Undefined]",n=e?e.toStringTag:void 0;function u(e){return null==e?void 0===e?i:t:n&&n in Object(e)?r(e):o(e)}module.exports=u;
},{"./_Symbol":547,"./_getRawTag":630,"./_objectToString":631}],367:[function(require,module,exports) {
function e(e){return null!=e&&"object"==typeof e}module.exports=e;
},{}],568:[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),t="[object Arguments]";function u(u){return r(u)&&e(u)==t}module.exports=u;
},{"./_baseGetTag":580,"./isObjectLike":367}],492:[function(require,module,exports) {
var e=require("./_baseIsArguments"),r=require("./isObjectLike"),t=Object.prototype,l=t.hasOwnProperty,n=t.propertyIsEnumerable,u=e(function(){return arguments}())?e:function(e){return r(e)&&l.call(e,"callee")&&!n.call(e,"callee")};module.exports=u;
},{"./_baseIsArguments":568,"./isObjectLike":367}],354:[function(require,module,exports) {
var r=Array.isArray;module.exports=r;
},{}],594:[function(require,module,exports) {
function e(){return!1}module.exports=e;
},{}],493:[function(require,module,exports) {

var e=require("./_root"),o=require("./stubFalse"),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,t=r&&"object"==typeof module&&module&&!module.nodeType&&module,p=t&&t.exports===r,u=p?e.Buffer:void 0,d=u?u.isBuffer:void 0,s=d||o;module.exports=s;
},{"./_root":56,"./stubFalse":594}],494:[function(require,module,exports) {
var e=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function t(t,n){var o=typeof t;return!!(n=null==n?e:n)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<n}module.exports=t;
},{}],499:[function(require,module,exports) {
var e=9007199254740991;function r(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=e}module.exports=r;
},{}],576:[function(require,module,exports) {
var e=require("./_baseGetTag"),t=require("./isLength"),r=require("./isObjectLike"),o="[object Arguments]",b="[object Array]",c="[object Boolean]",j="[object Date]",a="[object Error]",n="[object Function]",i="[object Map]",A="[object Number]",y="[object Object]",u="[object RegExp]",g="[object Set]",l="[object String]",p="[object WeakMap]",s="[object ArrayBuffer]",m="[object DataView]",U="[object Float32Array]",f="[object Float64Array]",q="[object Int8Array]",F="[object Int16Array]",I="[object Int32Array]",d="[object Uint8Array]",h="[object Uint8ClampedArray]",k="[object Uint16Array]",x="[object Uint32Array]",B={};function D(o){return r(o)&&t(o.length)&&!!B[e(o)]}B[U]=B[f]=B[q]=B[F]=B[I]=B[d]=B[h]=B[k]=B[x]=!0,B[o]=B[b]=B[s]=B[c]=B[m]=B[j]=B[a]=B[n]=B[i]=B[A]=B[y]=B[u]=B[g]=B[l]=B[p]=!1,module.exports=D;
},{"./_baseGetTag":580,"./isLength":499,"./isObjectLike":367}],577:[function(require,module,exports) {
function n(n){return function(r){return n(r)}}module.exports=n;
},{}],578:[function(require,module,exports) {
var e=require("./_freeGlobal"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,t=o&&"object"==typeof module&&module&&!module.nodeType&&module,r=t&&t.exports===o,p=r&&e.process,d=function(){try{return p&&p.binding&&p.binding("util")}catch(e){}}();module.exports=d;
},{"./_freeGlobal":116}],495:[function(require,module,exports) {
var e=require("./_baseIsTypedArray"),r=require("./_baseUnary"),a=require("./_nodeUtil"),i=a&&a.isTypedArray,s=i?r(i):e;module.exports=s;
},{"./_baseIsTypedArray":576,"./_baseUnary":577,"./_nodeUtil":578}],346:[function(require,module,exports) {
var e=require("./_baseTimes"),r=require("./isArguments"),t=require("./isArray"),i=require("./isBuffer"),n=require("./_isIndex"),s=require("./isTypedArray"),u=Object.prototype,f=u.hasOwnProperty;function a(u,a){var o=t(u),p=!o&&r(u),y=!o&&!p&&i(u),g=!o&&!p&&!y&&s(u),h=o||p||y||g,l=h?e(u.length,String):[],q=l.length;for(var b in u)!a&&!f.call(u,b)||h&&("length"==b||y&&("offset"==b||"parent"==b)||g&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||n(b,q))||l.push(b);return l}module.exports=a;
},{"./_baseTimes":491,"./isArguments":492,"./isArray":354,"./isBuffer":493,"./_isIndex":494,"./isTypedArray":495}],496:[function(require,module,exports) {
var t=Object.prototype;function o(o){var r=o&&o.constructor;return o===("function"==typeof r&&r.prototype||t)}module.exports=o;
},{}],579:[function(require,module,exports) {
function n(n,r){return function(t){return n(r(t))}}module.exports=n;
},{}],497:[function(require,module,exports) {
var e=require("./_overArg"),r=e(Object.keys,Object);module.exports=r;
},{"./_overArg":579}],347:[function(require,module,exports) {
var r=require("./_isPrototype"),e=require("./_nativeKeys"),t=Object.prototype,o=t.hasOwnProperty;function n(t){if(!r(t))return e(t);var n=[];for(var u in Object(t))o.call(t,u)&&"constructor"!=u&&n.push(u);return n}module.exports=n;
},{"./_isPrototype":496,"./_nativeKeys":497}],560:[function(require,module,exports) {
function n(n){var o=typeof n;return null!=n&&("object"==o||"function"==o)}module.exports=n;
},{}],498:[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObject"),t="[object AsyncFunction]",n="[object Function]",o="[object GeneratorFunction]",c="[object Proxy]";function u(u){if(!r(u))return!1;var i=e(u);return i==n||i==o||i==t||i==c}module.exports=u;
},{"./_baseGetTag":580,"./isObject":560}],348:[function(require,module,exports) {
var e=require("./isFunction"),n=require("./isLength");function r(r){return null!=r&&n(r.length)&&!e(r)}module.exports=r;
},{"./isFunction":498,"./isLength":499}],109:[function(require,module,exports) {
var e=require("./_arrayLikeKeys"),r=require("./_baseKeys"),i=require("./isArrayLike");function u(u){return i(u)?e(u):r(u)}module.exports=u;
},{"./_arrayLikeKeys":346,"./_baseKeys":347,"./isArrayLike":348}],661:[function(require,module,exports) {
function t(){this.__data__=[],this.size=0}module.exports=t;
},{}],559:[function(require,module,exports) {
function e(e,n){return e===n||e!=e&&n!=n}module.exports=e;
},{}],684:[function(require,module,exports) {
var r=require("./eq");function e(e,n){for(var t=e.length;t--;)if(r(e[t][0],n))return t;return-1}module.exports=e;
},{"./eq":559}],662:[function(require,module,exports) {
var e=require("./_assocIndexOf"),r=Array.prototype,t=r.splice;function a(r){var a=this.__data__,o=e(a,r);return!(o<0)&&(o==a.length-1?a.pop():t.call(a,o,1),--this.size,!0)}module.exports=a;
},{"./_assocIndexOf":684}],663:[function(require,module,exports) {
var r=require("./_assocIndexOf");function e(e){var a=this.__data__,o=r(a,e);return o<0?void 0:a[o][1]}module.exports=e;
},{"./_assocIndexOf":684}],664:[function(require,module,exports) {
var e=require("./_assocIndexOf");function r(r){return e(this.__data__,r)>-1}module.exports=r;
},{"./_assocIndexOf":684}],665:[function(require,module,exports) {
var s=require("./_assocIndexOf");function e(e,r){var t=this.__data__,i=s(t,e);return i<0?(++this.size,t.push([e,r])):t[i][1]=r,this}module.exports=e;
},{"./_assocIndexOf":684}],597:[function(require,module,exports) {
var e=require("./_listCacheClear"),t=require("./_listCacheDelete"),r=require("./_listCacheGet"),l=require("./_listCacheHas"),o=require("./_listCacheSet");function a(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var l=e[t];this.set(l[0],l[1])}}a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=l,a.prototype.set=o,module.exports=a;
},{"./_listCacheClear":661,"./_listCacheDelete":662,"./_listCacheGet":663,"./_listCacheHas":664,"./_listCacheSet":665}],598:[function(require,module,exports) {
var e=require("./_ListCache");function i(){this.__data__=new e,this.size=0}module.exports=i;
},{"./_ListCache":597}],599:[function(require,module,exports) {
function e(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}module.exports=e;
},{}],600:[function(require,module,exports) {
function t(t){return this.__data__.get(t)}module.exports=t;
},{}],601:[function(require,module,exports) {
function t(t){return this.__data__.has(t)}module.exports=t;
},{}],701:[function(require,module,exports) {
var r=require("./_root"),e=r["__core-js_shared__"];module.exports=e;
},{"./_root":56}],700:[function(require,module,exports) {
var e=require("./_coreJsData"),r=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(e){return!!r&&r in e}module.exports=n;
},{"./_coreJsData":701}],618:[function(require,module,exports) {
var t=Function.prototype,r=t.toString;function n(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}module.exports=n;
},{}],682:[function(require,module,exports) {
var e=require("./isFunction"),r=require("./_isMasked"),t=require("./isObject"),o=require("./_toSource"),n=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,i=Function.prototype,u=Object.prototype,p=i.toString,s=u.hasOwnProperty,a=RegExp("^"+p.call(s).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(n){return!(!t(n)||r(n))&&(e(n)?a:c).test(o(n))}module.exports=l;
},{"./isFunction":498,"./_isMasked":700,"./isObject":560,"./_toSource":618}],683:[function(require,module,exports) {
function n(n,o){return null==n?void 0:n[o]}module.exports=n;
},{}],656:[function(require,module,exports) {
var e=require("./_baseIsNative"),r=require("./_getValue");function u(u,a){var i=r(u,a);return e(i)?i:void 0}module.exports=u;
},{"./_baseIsNative":682,"./_getValue":683}],614:[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),o=e(r,"Map");module.exports=o;
},{"./_getNative":656,"./_root":56}],709:[function(require,module,exports) {
var e=require("./_getNative"),r=e(Object,"create");module.exports=r;
},{"./_getNative":656}],703:[function(require,module,exports) {
var e=require("./_nativeCreate");function t(){this.__data__=e?e(null):{},this.size=0}module.exports=t;
},{"./_nativeCreate":709}],704:[function(require,module,exports) {
function t(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}module.exports=t;
},{}],705:[function(require,module,exports) {
var e=require("./_nativeCreate"),r="__lodash_hash_undefined__",t=Object.prototype,a=t.hasOwnProperty;function _(t){var _=this.__data__;if(e){var o=_[t];return o===r?void 0:o}return a.call(_,t)?_[t]:void 0}module.exports=_;
},{"./_nativeCreate":709}],706:[function(require,module,exports) {
var e=require("./_nativeCreate"),r=Object.prototype,t=r.hasOwnProperty;function a(r){var a=this.__data__;return e?void 0!==a[r]:t.call(a,r)}module.exports=a;
},{"./_nativeCreate":709}],707:[function(require,module,exports) {
var e=require("./_nativeCreate"),_="__lodash_hash_undefined__";function i(i,t){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=e&&void 0===t?_:t,this}module.exports=i;
},{"./_nativeCreate":709}],702:[function(require,module,exports) {
var e=require("./_hashClear"),r=require("./_hashDelete"),t=require("./_hashGet"),h=require("./_hashHas"),o=require("./_hashSet");function a(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var h=e[r];this.set(h[0],h[1])}}a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=t,a.prototype.has=h,a.prototype.set=o,module.exports=a;
},{"./_hashClear":703,"./_hashDelete":704,"./_hashGet":705,"./_hashHas":706,"./_hashSet":707}],692:[function(require,module,exports) {
var e=require("./_Hash"),i=require("./_ListCache"),r=require("./_Map");function a(){this.size=0,this.__data__={hash:new e,map:new(r||i),string:new e}}module.exports=a;
},{"./_Hash":702,"./_ListCache":597,"./_Map":614}],708:[function(require,module,exports) {
function o(o){var n=typeof o;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==o:null===o}module.exports=o;
},{}],699:[function(require,module,exports) {
var r=require("./_isKeyable");function e(e,a){var t=e.__data__;return r(a)?t["string"==typeof a?"string":"hash"]:t.map}module.exports=e;
},{"./_isKeyable":708}],693:[function(require,module,exports) {
var e=require("./_getMapData");function t(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r}module.exports=t;
},{"./_getMapData":699}],694:[function(require,module,exports) {
var e=require("./_getMapData");function t(t){return e(this,t).get(t)}module.exports=t;
},{"./_getMapData":699}],695:[function(require,module,exports) {
var e=require("./_getMapData");function r(r){return e(this,r).has(r)}module.exports=r;
},{"./_getMapData":699}],696:[function(require,module,exports) {
var e=require("./_getMapData");function t(t,i){var s=e(this,t),r=s.size;return s.set(t,i),this.size+=s.size==r?0:1,this}module.exports=t;
},{"./_getMapData":699}],635:[function(require,module,exports) {
var e=require("./_mapCacheClear"),r=require("./_mapCacheDelete"),t=require("./_mapCacheGet"),a=require("./_mapCacheHas"),p=require("./_mapCacheSet");function o(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=t,o.prototype.has=a,o.prototype.set=p,module.exports=o;
},{"./_mapCacheClear":692,"./_mapCacheDelete":693,"./_mapCacheGet":694,"./_mapCacheHas":695,"./_mapCacheSet":696}],602:[function(require,module,exports) {
var e=require("./_ListCache"),i=require("./_Map"),t=require("./_MapCache"),s=200;function _(_,a){var r=this.__data__;if(r instanceof e){var h=r.__data__;if(!i||h.length<s-1)return h.push([_,a]),this.size=++r.size,this;r=this.__data__=new t(h)}return r.set(_,a),this.size=r.size,this}module.exports=_;
},{"./_ListCache":597,"./_Map":614,"./_MapCache":635}],542:[function(require,module,exports) {
var e=require("./_ListCache"),t=require("./_stackClear"),r=require("./_stackDelete"),a=require("./_stackGet"),s=require("./_stackHas"),o=require("./_stackSet");function i(t){var r=this.__data__=new e(t);this.size=r.size}i.prototype.clear=t,i.prototype.delete=r,i.prototype.get=a,i.prototype.has=s,i.prototype.set=o,module.exports=i;
},{"./_ListCache":597,"./_stackClear":598,"./_stackDelete":599,"./_stackGet":600,"./_stackHas":601,"./_stackSet":602}],666:[function(require,module,exports) {
var _="__lodash_hash_undefined__";function t(t){return this.__data__.set(t,_),this}module.exports=t;
},{}],603:[function(require,module,exports) {
var e=require("./_MapCache"),t=require("./_setCacheAdd"),r=require("./_setCacheHas");function a(t){var r=-1,a=null==t?0:t.length;for(this.__data__=new e;++r<a;)this.add(t[r])}a.prototype.add=a.prototype.push=t,a.prototype.has=r,module.exports=a;
},{"./_MapCache":635,"./_setCacheAdd":666,"./_setCacheHas":601}],604:[function(require,module,exports) {
function r(r,n){for(var e=-1,t=null==r?0:r.length;++e<t;)if(n(r[e],e,r))return!0;return!1}module.exports=r;
},{}],605:[function(require,module,exports) {
function e(e,n){return e.has(n)}module.exports=e;
},{}],543:[function(require,module,exports) {
var e=require("./_SetCache"),r=require("./_arraySome"),i=require("./_cacheHas"),t=1,a=2;function n(n,f,u,o,v,c){var l=u&t,s=n.length,d=f.length;if(s!=d&&!(l&&d>s))return!1;var h=c.get(n);if(h&&c.get(f))return h==f;var g=-1,b=!0,k=u&a?new e:void 0;for(c.set(n,f),c.set(f,n);++g<s;){var q=n[g],_=f[g];if(o)var m=l?o(_,q,g,f,n,c):o(q,_,g,n,f,c);if(void 0!==m){if(m)continue;b=!1;break}if(k){if(!r(f,function(e,r){if(!i(k,r)&&(q===e||v(q,e,u,o,c)))return k.push(r)})){b=!1;break}}else if(q!==_&&!v(q,_,u,o,c)){b=!1;break}}return c.delete(n),c.delete(f),b}module.exports=n;
},{"./_SetCache":603,"./_arraySome":604,"./_cacheHas":605}],609:[function(require,module,exports) {
var r=require("./_root"),e=r.Uint8Array;module.exports=e;
},{"./_root":56}],610:[function(require,module,exports) {
function r(r){var n=-1,o=Array(r.size);return r.forEach(function(r,e){o[++n]=[e,r]}),o}module.exports=r;
},{}],611:[function(require,module,exports) {
function r(r){var n=-1,o=Array(r.size);return r.forEach(function(r){o[++n]=r}),o}module.exports=r;
},{}],544:[function(require,module,exports) {
var e=require("./_Symbol"),r=require("./_Uint8Array"),t=require("./eq"),a=require("./_equalArrays"),c=require("./_mapToArray"),o=require("./_setToArray"),s=1,u=2,n="[object Boolean]",b="[object Date]",i="[object Error]",f="[object Map]",y="[object Number]",j="[object RegExp]",l="[object Set]",g="[object String]",m="[object Symbol]",q="[object ArrayBuffer]",v="[object DataView]",p=e?e.prototype:void 0,h=p?p.valueOf:void 0;function A(e,p,A,_,d,w,L){switch(A){case v:if(e.byteLength!=p.byteLength||e.byteOffset!=p.byteOffset)return!1;e=e.buffer,p=p.buffer;case q:return!(e.byteLength!=p.byteLength||!w(new r(e),new r(p)));case n:case b:case y:return t(+e,+p);case i:return e.name==p.name&&e.message==p.message;case j:case g:return e==p+"";case f:var S=c;case l:var O=_&s;if(S||(S=o),e.size!=p.size&&!O)return!1;var x=L.get(e);if(x)return x==p;_|=u,L.set(e,p);var z=a(S(e),S(p),_,d,w,L);return L.delete(e),z;case m:if(h)return h.call(e)==h.call(p)}return!1}module.exports=A;
},{"./_Symbol":547,"./_Uint8Array":609,"./eq":559,"./_equalArrays":543,"./_mapToArray":610,"./_setToArray":611}],357:[function(require,module,exports) {
function e(e,n){for(var r=-1,t=n.length,o=e.length;++r<t;)e[o+r]=n[r];return e}module.exports=e;
},{}],654:[function(require,module,exports) {
var r=require("./_arrayPush"),e=require("./isArray");function u(u,a,i){var n=a(u);return e(u)?n:r(n,i(u))}module.exports=u;
},{"./_arrayPush":357,"./isArray":354}],680:[function(require,module,exports) {
function r(r,n){for(var e=-1,l=null==r?0:r.length,o=0,t=[];++e<l;){var u=r[e];n(u,e,r)&&(t[o++]=u)}return t}module.exports=r;
},{}],681:[function(require,module,exports) {
function e(){return[]}module.exports=e;
},{}],655:[function(require,module,exports) {
var r=require("./_arrayFilter"),e=require("./stubArray"),t=Object.prototype,u=t.propertyIsEnumerable,n=Object.getOwnPropertySymbols,o=n?function(e){return null==e?[]:(e=Object(e),r(n(e),function(r){return u.call(e,r)}))}:e;module.exports=o;
},{"./_arrayFilter":680,"./stubArray":681}],612:[function(require,module,exports) {
var e=require("./_baseGetAllKeys"),r=require("./_getSymbols"),u=require("./keys");function s(s){return e(s,u,r)}module.exports=s;
},{"./_baseGetAllKeys":654,"./_getSymbols":655,"./keys":109}],545:[function(require,module,exports) {
var r=require("./_getAllKeys"),t=1,e=Object.prototype,n=e.hasOwnProperty;function o(e,o,c,i,a,f){var u=c&t,s=r(e),v=s.length;if(v!=r(o).length&&!u)return!1;for(var l=v;l--;){var p=s[l];if(!(u?p in o:n.call(o,p)))return!1}var g=f.get(e);if(g&&f.get(o))return g==o;var y=!0;f.set(e,o),f.set(o,e);for(var d=u;++l<v;){var h=e[p=s[l]],b=o[p];if(i)var O=u?i(b,h,p,o,e,f):i(h,b,p,e,o,f);if(!(void 0===O?h===b||a(h,b,c,i,f):O)){y=!1;break}d||(d="constructor"==p)}if(y&&!d){var j=e.constructor,k=o.constructor;j!=k&&"constructor"in e&&"constructor"in o&&!("function"==typeof j&&j instanceof j&&"function"==typeof k&&k instanceof k)&&(y=!1)}return f.delete(e),f.delete(o),y}module.exports=o;
},{"./_getAllKeys":612}],613:[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),t=e(r,"DataView");module.exports=t;
},{"./_getNative":656,"./_root":56}],615:[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),o=e(r,"Promise");module.exports=o;
},{"./_getNative":656,"./_root":56}],616:[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),t=e(r,"Set");module.exports=t;
},{"./_getNative":656,"./_root":56}],617:[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),a=e(r,"WeakMap");module.exports=a;
},{"./_getNative":656,"./_root":56}],546:[function(require,module,exports) {
var e=require("./_DataView"),r=require("./_Map"),t=require("./_Promise"),a=require("./_Set"),u=require("./_WeakMap"),c=require("./_baseGetTag"),o=require("./_toSource"),i="[object Map]",n="[object Object]",s="[object Promise]",b="[object Set]",w="[object WeakMap]",j="[object DataView]",q=o(e),_=o(r),p=o(t),f=o(a),v=o(u),M=c;(e&&M(new e(new ArrayBuffer(1)))!=j||r&&M(new r)!=i||t&&M(t.resolve())!=s||a&&M(new a)!=b||u&&M(new u)!=w)&&(M=function(e){var r=c(e),t=r==n?e.constructor:void 0,a=t?o(t):"";if(a)switch(a){case q:return j;case _:return i;case p:return s;case f:return b;case v:return w}return r}),module.exports=M;
},{"./_DataView":613,"./_Map":614,"./_Promise":615,"./_Set":616,"./_WeakMap":617,"./_baseGetTag":580,"./_toSource":618}],366:[function(require,module,exports) {
var e=require("./_Stack"),r=require("./_equalArrays"),a=require("./_equalByTag"),u=require("./_equalObjects"),t=require("./_getTag"),i=require("./isArray"),_=require("./isBuffer"),n=require("./isTypedArray"),q=1,c="[object Arguments]",l="[object Array]",o="[object Object]",p=Object.prototype,f=p.hasOwnProperty;function s(p,s,y,b,j,v){var w=i(p),A=i(s),d=w?l:t(p),g=A?l:t(s),O=(d=d==c?o:d)==o,T=(g=g==c?o:g)==o,m=d==g;if(m&&_(p)){if(!_(s))return!1;w=!0,O=!1}if(m&&!O)return v||(v=new e),w||n(p)?r(p,s,y,b,j,v):a(p,s,d,y,b,j,v);if(!(y&q)){var B=O&&f.call(p,"__wrapped__"),h=T&&f.call(s,"__wrapped__");if(B||h){var k=B?p.value():p,x=h?s.value():s;return v||(v=new e),j(k,x,y,b,v)}}return!!m&&(v||(v=new e),u(p,s,y,b,j,v))}module.exports=s;
},{"./_Stack":542,"./_equalArrays":543,"./_equalByTag":544,"./_equalObjects":545,"./_getTag":546,"./isArray":354,"./isBuffer":493,"./isTypedArray":495}],137:[function(require,module,exports) {
var e=require("./_baseIsEqualDeep"),r=require("./isObjectLike");function u(l,i,n,s,t){return l===i||(null==l||null==i||!r(l)&&!r(i)?l!=l&&i!=i:e(l,i,n,s,u,t))}module.exports=u;
},{"./_baseIsEqualDeep":366,"./isObjectLike":367}],60:[function(require,module,exports) {
var e=require("./_baseIsEqual");function r(r,u){return e(r,u)}module.exports=r;
},{"./_baseIsEqual":137}],351:[function(require,module,exports) {
function r(r,n){for(var e=-1,l=null==r?0:r.length,o=Array(l);++e<l;)o[e]=n(r[e],e,r);return o}module.exports=r;
},{}],581:[function(require,module,exports) {
var r=require("./_Stack"),e=require("./_baseIsEqual"),i=1,n=2;function u(u,t,a,f){var v=a.length,o=v,l=!f;if(null==u)return!o;for(u=Object(u);v--;){var s=a[v];if(l&&s[2]?s[1]!==u[s[0]]:!(s[0]in u))return!1}for(;++v<o;){var c=(s=a[v])[0],d=u[c],q=s[1];if(l&&s[2]){if(void 0===d&&!(c in u))return!1}else{var b=new r;if(f)var _=f(d,q,c,u,t,b);if(!(void 0===_?e(q,d,i|n,f,b):_))return!1}}return!0}module.exports=u;
},{"./_Stack":542,"./_baseIsEqual":137}],586:[function(require,module,exports) {
var e=require("./isObject");function r(r){return r==r&&!e(r)}module.exports=r;
},{"./isObject":560}],582:[function(require,module,exports) {
var r=require("./_isStrictComparable"),e=require("./keys");function t(t){for(var a=e(t),i=a.length;i--;){var o=a[i],u=t[o];a[i]=[o,u,r(u)]}return a}module.exports=t;
},{"./_isStrictComparable":586,"./keys":109}],583:[function(require,module,exports) {
function n(n,t){return function(u){return null!=u&&(u[n]===t&&(void 0!==t||n in Object(u)))}}module.exports=n;
},{}],503:[function(require,module,exports) {
var e=require("./_baseIsMatch"),r=require("./_getMatchData"),t=require("./_matchesStrictComparable");function a(a){var u=r(a);return 1==u.length&&u[0][2]?t(u[0][0],u[0][1]):function(r){return r===a||e(r,a,u)}}module.exports=a;
},{"./_baseIsMatch":581,"./_getMatchData":582,"./_matchesStrictComparable":583}],629:[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),o="[object Symbol]";function t(t){return"symbol"==typeof t||r(t)&&e(t)==o}module.exports=t;
},{"./_baseGetTag":580,"./isObjectLike":367}],585:[function(require,module,exports) {
var e=require("./isArray"),r=require("./isSymbol"),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function u(u,l){if(e(u))return!1;var o=typeof u;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=u&&!r(u))||(n.test(u)||!t.test(u)||null!=l&&u in Object(l))}module.exports=u;
},{"./isArray":354,"./isSymbol":629}],698:[function(require,module,exports) {
var e=require("./_MapCache"),r="Expected a function";function t(n,a){if("function"!=typeof n||null!=a&&"function"!=typeof a)throw new TypeError(r);var c=function(){var e=arguments,r=a?a.apply(this,e):e[0],t=c.cache;if(t.has(r))return t.get(r);var o=n.apply(this,e);return c.cache=t.set(r,o)||t,o};return c.cache=new(t.Cache||e),c}t.Cache=e,module.exports=t;
},{"./_MapCache":635}],686:[function(require,module,exports) {
var e=require("./memoize"),r=500;function n(n){var u=e(n,function(e){return c.size===r&&c.clear(),e}),c=u.cache;return u}module.exports=n;
},{"./memoize":698}],669:[function(require,module,exports) {
var e=require("./_memoizeCapped"),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,u=e(function(e){var u=[];return 46===e.charCodeAt(0)&&u.push(""),e.replace(r,function(e,r,a,o){u.push(a?o.replace(p,"$1"):r||e)}),u});module.exports=u;
},{"./_memoizeCapped":686}],687:[function(require,module,exports) {
var r=require("./_Symbol"),e=require("./_arrayMap"),i=require("./isArray"),t=require("./isSymbol"),o=1/0,u=r?r.prototype:void 0,n=u?u.toString:void 0;function a(r){if("string"==typeof r)return r;if(i(r))return e(r,a)+"";if(t(r))return n?n.call(r):"";var u=r+"";return"0"==u&&1/r==-o?"-0":u}module.exports=a;
},{"./_Symbol":547,"./_arrayMap":351,"./isArray":354,"./isSymbol":629}],670:[function(require,module,exports) {
var r=require("./_baseToString");function e(e){return null==e?"":r(e)}module.exports=e;
},{"./_baseToString":687}],622:[function(require,module,exports) {
var r=require("./isArray"),e=require("./_isKey"),i=require("./_stringToPath"),t=require("./toString");function u(u,n){return r(u)?u:e(u,n)?[u]:i(t(u))}module.exports=u;
},{"./isArray":354,"./_isKey":585,"./_stringToPath":669,"./toString":670}],587:[function(require,module,exports) {
var r=require("./isSymbol"),e=1/0;function t(t){if("string"==typeof t||r(t))return t;var i=t+"";return"0"==i&&1/t==-e?"-0":i}module.exports=t;
},{"./isSymbol":629}],620:[function(require,module,exports) {
var r=require("./_castPath"),e=require("./_toKey");function t(t,o){for(var u=0,n=(o=r(o,t)).length;null!=t&&u<n;)t=t[e(o[u++])];return u&&u==n?t:void 0}module.exports=t;
},{"./_castPath":622,"./_toKey":587}],584:[function(require,module,exports) {
var e=require("./_baseGet");function r(r,o,u){var i=null==r?void 0:e(r,o);return void 0===i?u:i}module.exports=r;
},{"./_baseGet":620}],623:[function(require,module,exports) {
function n(n,e){return null!=n&&e in Object(n)}module.exports=n;
},{}],624:[function(require,module,exports) {
var r=require("./_castPath"),e=require("./isArguments"),i=require("./isArray"),u=require("./_isIndex"),n=require("./isLength"),t=require("./_toKey");function a(a,l,s){for(var q=-1,o=(l=r(l,a)).length,g=!1;++q<o;){var h=t(l[q]);if(!(g=null!=a&&s(a,h)))break;a=a[h]}return g||++q!=o?g:!!(o=null==a?0:a.length)&&n(o)&&u(h,o)&&(i(a)||e(a))}module.exports=a;
},{"./_castPath":622,"./isArguments":492,"./isArray":354,"./_isIndex":494,"./isLength":499,"./_toKey":587}],562:[function(require,module,exports) {
var e=require("./_baseHasIn"),r=require("./_hasPath");function u(u,a){return null!=u&&r(u,a,e)}module.exports=u;
},{"./_baseHasIn":623,"./_hasPath":624}],504:[function(require,module,exports) {
var e=require("./_baseIsEqual"),r=require("./get"),i=require("./hasIn"),u=require("./_isKey"),t=require("./_isStrictComparable"),a=require("./_matchesStrictComparable"),o=require("./_toKey"),q=1,n=2;function s(s,c){return u(s)&&t(c)?a(o(s),c):function(u){var t=r(u,s);return void 0===t&&t===c?i(u,s):e(c,t,q|n)}}module.exports=s;
},{"./_baseIsEqual":137,"./get":584,"./hasIn":562,"./_isKey":585,"./_isStrictComparable":586,"./_matchesStrictComparable":583,"./_toKey":587}],502:[function(require,module,exports) {
function e(e){return e}module.exports=e;
},{}],588:[function(require,module,exports) {
function n(n){return function(u){return null==u?void 0:u[n]}}module.exports=n;
},{}],589:[function(require,module,exports) {
var e=require("./_baseGet");function r(r){return function(n){return e(n,r)}}module.exports=r;
},{"./_baseGet":620}],505:[function(require,module,exports) {
var e=require("./_baseProperty"),r=require("./_basePropertyDeep"),u=require("./_isKey"),i=require("./_toKey");function o(o){return u(o)?e(i(o)):r(o)}module.exports=o;
},{"./_baseProperty":588,"./_basePropertyDeep":589,"./_isKey":585,"./_toKey":587}],352:[function(require,module,exports) {
var e=require("./_baseMatches"),r=require("./_baseMatchesProperty"),t=require("./identity"),i=require("./isArray"),u=require("./property");function o(o){return"function"==typeof o?o:null==o?t:"object"==typeof o?i(o)?r(o[0],o[1]):e(o):u(o)}module.exports=o;
},{"./_baseMatches":503,"./_baseMatchesProperty":504,"./identity":502,"./isArray":354,"./property":505}],688:[function(require,module,exports) {
function r(r){return function(e,n,t){for(var o=-1,u=Object(e),f=t(e),a=f.length;a--;){var c=f[r?a:++o];if(!1===n(u[c],c,u))break}return e}}module.exports=r;
},{}],634:[function(require,module,exports) {
var e=require("./_createBaseFor"),r=e();module.exports=r;
},{"./_createBaseFor":688}],590:[function(require,module,exports) {
var e=require("./_baseFor"),r=require("./keys");function u(u,o){return u&&e(u,o,r)}module.exports=u;
},{"./_baseFor":634,"./keys":109}],591:[function(require,module,exports) {
var r=require("./isArrayLike");function e(e,n){return function(t,u){if(null==t)return t;if(!r(t))return e(t,u);for(var i=t.length,f=n?i:-1,o=Object(t);(n?f--:++f<i)&&!1!==u(o[f],f,o););return t}}module.exports=e;
},{"./isArrayLike":348}],506:[function(require,module,exports) {
var e=require("./_baseForOwn"),r=require("./_createBaseEach"),a=r(e);module.exports=a;
},{"./_baseForOwn":590,"./_createBaseEach":591}],353:[function(require,module,exports) {
var r=require("./_baseEach"),e=require("./isArrayLike");function a(a,i){var n=-1,u=e(a)?Array(a.length):[];return r(a,function(r,e,a){u[++n]=i(r,e,a)}),u}module.exports=a;
},{"./_baseEach":506,"./isArrayLike":348}],110:[function(require,module,exports) {
var r=require("./_arrayMap"),e=require("./_baseIteratee"),a=require("./_baseMap"),u=require("./isArray");function i(i,t){return(u(i)?r:a)(i,e(t,3))}module.exports=i;
},{"./_arrayMap":351,"./_baseIteratee":352,"./_baseMap":353,"./isArray":354}],429:[function(require,module,exports) {
function r(r,n){for(var e=-1,t=null==r?0:r.length;++e<t;)if(!n(r[e],e,r))return!1;return!0}module.exports=r;
},{}],430:[function(require,module,exports) {
var r=require("./_baseEach");function e(e,n){var u=!0;return r(e,function(r,e,t){return u=!!n(r,e,t)}),u}module.exports=e;
},{"./_baseEach":506}],431:[function(require,module,exports) {
var e=require("./eq"),r=require("./isArrayLike"),i=require("./_isIndex"),n=require("./isObject");function u(u,t,q){if(!n(q))return!1;var s=typeof t;return!!("number"==s?r(q)&&i(t,q.length):"string"==s&&t in q)&&e(q[t],u)}module.exports=u;
},{"./eq":559,"./isArrayLike":348,"./_isIndex":494,"./isObject":560}],112:[function(require,module,exports) {
var e=require("./_arrayEvery"),r=require("./_baseEvery"),a=require("./_baseIteratee"),i=require("./isArray"),u=require("./_isIterateeCall");function t(t,q,s){var v=i(t)?e:r;return s&&u(t,q,s)&&(q=void 0),v(t,a(q,3))}module.exports=t;
},{"./_arrayEvery":429,"./_baseEvery":430,"./_baseIteratee":352,"./isArray":354,"./_isIterateeCall":431}],427:[function(require,module,exports) {
var r=require("./_baseIteratee"),e=require("./isArrayLike"),i=require("./keys");function t(t){return function(u,n,a){var o=Object(u);if(!e(u)){var v=r(n,3);u=i(u),n=function(r){return v(o[r],r,o)}}var c=t(u,n,a);return c>-1?o[v?u[c]:c]:void 0}}module.exports=t;
},{"./_baseIteratee":352,"./isArrayLike":348,"./keys":109}],557:[function(require,module,exports) {
function r(r,e,n,t){for(var o=r.length,u=n+(t?1:-1);t?u--:++u<o;)if(e(r[u],u,r))return u;return-1}module.exports=r;
},{}],619:[function(require,module,exports) {
var e=require("./isObject"),r=require("./isSymbol"),t=NaN,i=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,n=/^0o[0-7]+$/i,s=parseInt;function a(a){if("number"==typeof a)return a;if(r(a))return t;if(e(a)){var o="function"==typeof a.valueOf?a.valueOf():a;a=e(o)?o+"":o}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(i,"");var l=u.test(a);return l||n.test(a)?s(a.slice(2),l?2:8):f.test(a)?t:+a}module.exports=a;
},{"./isObject":560,"./isSymbol":629}],549:[function(require,module,exports) {
var e=require("./toNumber"),r=1/0,u=1.7976931348623157e308;function o(o){return o?(o=e(o))===r||o===-r?(o<0?-1:1)*u:o==o?o:0:0===o?o:0}module.exports=o;
},{"./toNumber":619}],558:[function(require,module,exports) {
var r=require("./toFinite");function e(e){var t=r(e),i=t%1;return t==t?i?t-i:t:0}module.exports=e;
},{"./toFinite":549}],428:[function(require,module,exports) {
var e=require("./_baseFindIndex"),r=require("./_baseIteratee"),n=require("./toInteger"),t=Math.max;function u(u,a,i){var l=null==u?0:u.length;if(!l)return-1;var o=null==i?0:n(i);return o<0&&(o=t(l+o,0)),e(u,r(a,3),o)}module.exports=u;
},{"./_baseFindIndex":557,"./_baseIteratee":352,"./toInteger":558}],111:[function(require,module,exports) {
var e=require("./_createFind"),r=require("./findIndex"),d=e(r);module.exports=d;
},{"./_createFind":427,"./findIndex":428}],679:[function(require,module,exports) {
var e=require("./_getNative"),r=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch(e){}}();module.exports=r;
},{"./_getNative":656}],685:[function(require,module,exports) {
var e=require("./_defineProperty");function r(r,o,u){"__proto__"==o&&e?e(r,o,{configurable:!0,enumerable:!0,value:u,writable:!0}):r[o]=u}module.exports=r;
},{"./_defineProperty":679}],668:[function(require,module,exports) {
var e=require("./_baseAssignValue"),r=require("./eq"),o=Object.prototype,a=o.hasOwnProperty;function i(o,i,t){var n=o[i];a.call(o,i)&&r(n,t)&&(void 0!==t||i in o)||e(o,i,t)}module.exports=i;
},{"./_baseAssignValue":685,"./eq":559}],621:[function(require,module,exports) {
var r=require("./_assignValue"),e=require("./_castPath"),i=require("./_isIndex"),u=require("./isObject"),t=require("./_toKey");function a(a,n,o,s){if(!u(a))return a;for(var v=-1,l=(n=e(n,a)).length,q=l-1,d=a;null!=d&&++v<l;){var f=t(n[v]),_=o;if(v!=q){var c=d[f];void 0===(_=s?s(c,f,d):void 0)&&(_=u(c)?c:i(n[v+1])?[]:{})}r(d,f,_),d=d[f]}return a}module.exports=a;
},{"./_assignValue":668,"./_castPath":622,"./_isIndex":494,"./isObject":560,"./_toKey":587}],561:[function(require,module,exports) {
var e=require("./_baseGet"),r=require("./_baseSet"),t=require("./_castPath");function a(a,u,i){for(var n=-1,o=u.length,s={};++n<o;){var q=u[n],v=e(a,q);i(v,q)&&r(s,t(q,a),v)}return s}module.exports=a;
},{"./_baseGet":620,"./_baseSet":621,"./_castPath":622}],433:[function(require,module,exports) {
var r=require("./_basePickBy"),e=require("./hasIn");function n(n,u){return r(n,u,function(r,u){return e(n,u)})}module.exports=n;
},{"./_basePickBy":561,"./hasIn":562}],358:[function(require,module,exports) {
var r=require("./_Symbol"),e=require("./isArguments"),i=require("./isArray"),u=r?r.isConcatSpreadable:void 0;function o(r){return i(r)||e(r)||!!(u&&r&&r[u])}module.exports=o;
},{"./_Symbol":547,"./isArguments":492,"./isArray":354}],117:[function(require,module,exports) {
var r=require("./_arrayPush"),e=require("./_isFlattenable");function a(t,n,u,l,i){var o=-1,h=t.length;for(u||(u=e),i||(i=[]);++o<h;){var s=t[o];n>0&&u(s)?n>1?a(s,n-1,u,l,i):r(i,s):l||(i[i.length]=s)}return i}module.exports=a;
},{"./_arrayPush":357,"./_isFlattenable":358}],563:[function(require,module,exports) {
var e=require("./_baseFlatten");function n(n){return(null==n?0:n.length)?e(n,1):[]}module.exports=n;
},{"./_baseFlatten":117}],625:[function(require,module,exports) {
function e(e,l,r){switch(r.length){case 0:return e.call(l);case 1:return e.call(l,r[0]);case 2:return e.call(l,r[0],r[1]);case 3:return e.call(l,r[0],r[1],r[2])}return e.apply(l,r)}module.exports=e;
},{}],564:[function(require,module,exports) {
var r=require("./_apply"),t=Math.max;function a(a,e,n){return e=t(void 0===e?a.length-1:e,0),function(){for(var o=arguments,u=-1,i=t(o.length-e,0),f=Array(i);++u<i;)f[u]=o[e+u];u=-1;for(var h=Array(e+1);++u<e;)h[u]=o[u];return h[e]=n(f),r(a,this,h)}}module.exports=a;
},{"./_apply":625}],678:[function(require,module,exports) {
function n(n){return function(){return n}}module.exports=n;
},{}],626:[function(require,module,exports) {
var e=require("./constant"),r=require("./_defineProperty"),t=require("./identity"),i=r?function(t,i){return r(t,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:t;module.exports=i;
},{"./constant":678,"./_defineProperty":679,"./identity":502}],627:[function(require,module,exports) {
var r=800,e=16,n=Date.now;function t(t){var o=0,u=0;return function(){var a=n(),i=e-(a-u);if(u=a,i>0){if(++o>=r)return arguments[0]}else o=0;return t.apply(void 0,arguments)}}module.exports=t;
},{}],565:[function(require,module,exports) {
var e=require("./_baseSetToString"),r=require("./_shortOut"),t=r(e);module.exports=t;
},{"./_baseSetToString":626,"./_shortOut":627}],434:[function(require,module,exports) {
var e=require("./flatten"),r=require("./_overRest"),t=require("./_setToString");function i(i){return t(r(i,void 0,e),i+"")}module.exports=i;
},{"./flatten":563,"./_overRest":564,"./_setToString":565}],113:[function(require,module,exports) {
var e=require("./_basePick"),r=require("./_flatRest"),u=r(function(r,u){return null==r?{}:e(r,u)});module.exports=u;
},{"./_basePick":433,"./_flatRest":434}],355:[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(t){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],107:[function(require,module,exports) {
var global = (1,eval)("this");
var process = require("process");
var t=(0,eval)("this"),e=require("process");!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:void 0!==t?n=t:"undefined"!=typeof self&&(n=self),n.Promise=e()}}(function(){var n,r,i;return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return i(n||t)},u,u.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,n,r){"use strict";var i;try{throw new Error}catch(t){i=t}var o=t("./schedule"),s=t("./queue"),a=t("./util");function c(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function l(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function u(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function p(t){this._normalQueue._pushOne(t),this._queueTick()}c.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},c.prototype.hasCustomScheduler=function(){return this._customScheduler},c.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},c.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},c.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},c.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},c.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(c.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?l.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},c.prototype.invoke=function(t,e,n){this._trampolineEnabled?u.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},c.prototype.settlePromises=function(t){this._trampolineEnabled?p.call(this,t):this._schedule(function(){t._settlePromises()})}):(c.prototype.invokeLater=l,c.prototype.invoke=u,c.prototype.settlePromises=p),c.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},c.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},c.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},c.prototype._reset=function(){this._isTickUsed=!1},n.exports=c,n.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),u=new t(e);u._propagateFrom(this,1);var p=this._target();if(u._setBoundTo(l),l instanceof t){var h={promiseRejectionQueued:!1,promise:u,target:p,bindingPromise:l};p._then(e,s,void 0,u,h),l._then(a,c,void 0,u,h),u._setOnCancel(l)}else u._resolveCallback(p);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=t("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(t){}return i},e.exports=i},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){var n,r=t("./util"),i=r.canEvaluate;r.isIdentifier;function o(t,n){var i;if(null!=t&&(i=t[n]),"function"!=typeof i){var o="Object "+r.classString(t)+" has no method '"+r.toString(n)+"'";throw new e.TypeError(o)}return i}function s(t){return o(t,this.pop()).apply(t,this)}function a(t){return t[this]}function c(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(s,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=c;else if(i){var r=n(t);e=null!==r?r:a}else e=a;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,c=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=t("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(t,s,a){return function(c){var l=a._boundValue();t:for(var u=0;u<t.length;++u){var p=t[u];if(p===Error||null!=p&&p.prototype instanceof Error){if(c instanceof p)return i(s).call(l,c)}else if("function"==typeof p){var h=i(p).call(l,c);if(h===o)return h;if(h)return i(s).call(l,c)}else if(n.isObject(c)){for(var f=r(p),_=0;_<f.length;++_){var d=f[_];if(p[d]!=c[d])continue t}return i(s).call(l,c)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},r.CapturedTrace=null,r.create=function(){if(e)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,c=t.prototype._promiseCreated;r.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=c,e=!1},e=!0,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},r}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){var i,o,s,a=n._getDomain,c=n._async,l=t("./errors").Warning,u=t("./util"),p=u.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,f=/\((?:timers\.js):\d+:\d+\)/,_=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,d=null,v=null,y=!1,m=!(0==u.env("BLUEBIRD_DEBUG")),g=!(0==u.env("BLUEBIRD_WARNINGS")||!m&&!u.env("BLUEBIRD_WARNINGS")),b=!(0==u.env("BLUEBIRD_LONG_STACK_TRACES")||!m&&!u.env("BLUEBIRD_LONG_STACK_TRACES")),w=0!=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(g||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){q("rejectionHandled",i,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),q("unhandledRejection",o,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return N(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=a();o="function"==typeof t?null===e?t:u.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=a();i="function"==typeof t?null===e?t:u.domainBind(e,t):void 0};var C=function(){};n.longStackTraces=function(){if(c.haveItemsQueued()&&!J.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!J.longStackTraces&&$()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;J.longStackTraces=!0,C=function(){if(c.haveItemsQueued()&&!J.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),c.enableTrampoline(),J.longStackTraces=!1},n.prototype._captureStackTrace=L,n.prototype._attachExtraTrace=H,r.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return J.longStackTraces&&$()};var j=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return u.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!u.global.dispatchEvent(n)}}if("function"==typeof Event){t=new Event("CustomEvent");return u.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!u.global.dispatchEvent(n)}}return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),u.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!u.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),E=u.isNode?function(){return e.emit.apply(e,arguments)}:u.global?function(t){var e="on"+t.toLowerCase(),n=u.global[e];return!!n&&(n.apply(u.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function k(t,e){return{promise:e}}var F={promiseCreated:k,promiseFulfilled:k,promiseRejected:k,promiseResolved:k,promiseCancelled:k,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:k},x=function(t){var e=!1;try{e=E.apply(null,arguments)}catch(t){c.throwLater(t),e=!0}var n=!1;try{n=j(t,F[t].apply(null,arguments))}catch(t){c.throwLater(t),n=!0}return n||e};function T(){return!1}function P(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+u.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function R(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?u.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function S(){return this._onCancelField}function O(t){this._onCancelField=t}function A(){this._cancellationParent=void 0,this._onCancelField=void 0}function D(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}n.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&C()),"warnings"in t){var e=t.warnings;J.warnings=!!e,w=J.warnings,u.isObject(e)&&"wForgottenReturn"in e&&(w=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!J.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=A,n.prototype._propagateFrom=D,n.prototype._onCancel=S,n.prototype._setOnCancel=O,n.prototype._attachCancellationCallback=R,n.prototype._execute=P,V=D,J.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!J.monitoring?(J.monitoring=!0,n.prototype._fireEvent=x):!t.monitoring&&J.monitoring&&(J.monitoring=!1,n.prototype._fireEvent=T)),n},n.prototype._fireEvent=T,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var V=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function I(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function L(){this._trace=new W(this._peekContext())}function H(t,e){if(p(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=B(t);u.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),u.notEnumerableProp(t,"__stackCleaned__",!0)}}}function N(t,e,r){if(J.warnings){var i,o=new l(t);if(e)r._attachExtraTrace(o);else if(J.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var s=B(o);o.stack=s.message+"\n"+s.stack.join("\n")}x("warning",o)||M(o,"",!0)}}function U(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||d.test(r),o=i&&z(r);i&&!o&&(y&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function B(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||d.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:U(e)}}function M(t,e,n){if("undefined"!=typeof console){var r;if(u.isObject(t)){var i=t.stack;r=e+v(i,t)}else r=e+String(t);"function"==typeof s?s(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function q(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){c.throwLater(t)}"unhandledRejection"===t?x(t,n,r)||i||M(n,"Unhandled rejection "):x(t,r)}function Q(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():u.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}function $(){return"function"==typeof K}var z=function(){return!1},G=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function X(t){var e=t.match(G);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function W(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);K(this,W),e>32&&this.uncycle()}u.inherits(W,Error),r.CapturedTrace=W,W.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(r=(t=this._length=r)-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<t;++r){var s=n[e[r].stack];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var a=r>0?e[r-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var c=a._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},W.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=B(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(U(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(a=s;a>=0;--a){var c=r[a];if(e[i]!==c)break;e.pop(),i--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),u.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),u.notEnumerableProp(t,"__stackCleaned__",!0)}};var K=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():Q(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,d=t,v=e;var n=Error.captureStackTrace;return z=function(t){return h.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return d=/@/,v=e,y=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r="stack"in t}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(v=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?Q(e):e.toString()},null):(d=t,v=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(s=function(t){console.warn(t)},u.isNode&&e.stderr.isTTY?s=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:u.isNode||"string"!=typeof(new Error).stack||(s=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var J={warnings:g,longStackTraces:!1,cancellation:!1,monitoring:!1};return b&&n.longStackTraces(),{longStackTraces:function(){return J.longStackTraces},warnings:function(){return J.warnings},cancellation:function(){return J.cancellation},monitoring:function(){return J.monitoring},propagateFromFunction:function(){return V},boundValueFunction:function(){return I},checkForgottenReturns:function(t,e,n,r,i){if(void 0===t&&null!==e&&w){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),c=U(a),l=c.length-1;l>=0;--l){var u=c[l];if(!f.test(u)){var p=u.match(_);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(c.length>0){var h=c[0];for(l=0;l<a.length;++l)if(a[l]===h){l>0&&(s="\n"+a[l-1]);break}}}var d="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(d,!0,e)}},setBounds:function(t,e){if($()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,c=0;c<i.length;++c)if(l=X(i[c])){n=l.fileName,s=l.line;break}for(c=0;c<o.length;++c){var l;if(l=X(o[c])){r=l.fileName,a=l.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(z=function(t){if(h.test(t))return!0;var e=X(t);return!!(e&&e.fileName===n&&s<=e.line&&e.line<=a)})}},warn:N,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),N(n)},CapturedTrace:W,fireDomEvent:j,fireGlobalEvent:E}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();return this.caught(n,function(){return r})}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,r=t.all;function i(){return r(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,r){return n(t,r,e,0)._then(i,void 0,void 0,t,void 0)},t.mapSeries=function(t,r){return n(t,r,e,e)}}},{}],12:[function(t,e,n){"use strict";var r,i,o=t("./es5"),s=o.freeze,a=t("./util"),c=a.inherits,l=a.notEnumerableProp;function u(t,e){function n(r){if(!(this instanceof n))return new n(r);l(this,"message","string"==typeof r?r:e),l(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}var p=u("Warning","warning"),h=u("CancellationError","cancellation error"),f=u("TimeoutError","timeout error"),_=u("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(t){r=u("TypeError","type error"),i=u("RangeError","range error")}for(var d="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<d.length;++v)"function"==typeof Array.prototype[d[v]]&&(_.prototype[d[v]]=Array.prototype[d[v]]);o.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var y=0;function m(t){if(!(this instanceof m))return new m(t);l(this,"name","OperationalError"),l(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(l(this,"message",t.message),l(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}_.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(r=i.join("\n"))+"\n"}return y--,e},c(m,Error);var g=Error.__BluebirdErrorTypes__;g||(g=s({CancellationError:h,TimeoutError:f,OperationalError:m,RejectionError:m,AggregateError:_}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:g,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:a,names:a,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return s}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.CancellationError,s=i.errorObj,a=t("./catch_filter")(r);function c(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function l(t){this.finallyHandler=t}function u(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function p(){return f.call(this,this.promise._target()._settledValue())}function h(t){if(!u(this,t))return s.e=t,s}function f(t){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),t);if(c===r)return c;if(void 0!==c){i._setReturnedNonUndefined();var f=n(c,i);if(f instanceof e){if(null!=this.cancelPromise){if(f._isCancelled()){var _=new o("late cancellation observer");return i._attachExtraTrace(_),s.e=_,s}f.isPending()&&f._attachCancellationCallback(new l(this))}return f._then(p,h,void 0,this,void 0)}}}return i.isRejected()?(u(this),s.e=t,s):(u(this),t)}return c.prototype.isFinallyHandler=function(){return 0===this.type},l.prototype._resultCancelled=function(){u(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new c(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,f,f)},e.prototype.tap=function(t){return this._passThrough(t,1,f)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,f);var r,o=new Array(n-1),s=0;for(r=0;r<n-1;++r){var c=arguments[r];if(!i.isObject(c))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(c)));o[s++]=c}o.length=s;var l=arguments[r];return this._passThrough(a(o,l,this),1,void 0,f)},c}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=t("./errors").TypeError,c=t("./util"),l=c.errorObj,u=c.tryCatch,p=[];function h(t,n,i,o){if(s.cancellation()){var a=new e(r),c=this._finallyPromise=new e(r);this._promise=a.lastly(function(){return c}),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new e(r))._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(h,o),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=u(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=u(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},h.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=u(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=u(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(t){var n=this._promise;if(t===l)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof e||null!==(o=function(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=u(n[o])(t);if(r._popContext(),s===l){r._pushContext();var a=e.reject(l.e);return r._popContext(),a}var c=i(s,r);if(c instanceof e)return c}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=h,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new a("expecting a function but got "+c.classString(t));p.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new h(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=t("./util");a.canEvaluate,a.tryCatch,a.errorObj;e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var i=new n(r).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=e._getDomain,c=t("./util"),l=c.tryCatch,u=c.errorObj,p=e._async;function h(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=a();this._callback=null===i?e:c.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,void 0)}function f(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));s=i.concurrency}return new h(t,n,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}c.inherits(h,n),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,c=this._limit;if(n<0){if(r[n=-1*n-1]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var p=this._promise,h=this._callback,f=p._boundValue();p._pushContext();var _=l(h).call(f,t,n,o),d=p._popContext();if(s.checkForgottenReturns(_,d,null!==a?"Promise.filter":"Promise.map",p),_===u)return this._reject(_.e),!0;var v=i(_,this._promise);if(v instanceof e){var y=(v=v._target())._bitField;if(0==(50397184&y))return c>=1&&this._inFlight++,r[n]=v,v._proxy(this,-1*(n+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(v._reason()),!0):(this._cancel(),!0);_=v._value()}r[n]=_}return++this._totalResolved>=o&&(null!==a?this._filter(r,a):this._resolve(r),!0)},h.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},h.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},h.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return f(this,t,e,null)},e.map=function(t,e,n,r){return f(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+s.classString(t));var r,c=new e(n);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];r=s.isArray(l)?a(t).apply(u,l):a(t).call(u,l)}else r=a(t)();var p=c._popContext();return o.checkForgottenReturns(r,p,"Promise.try",c),c._resolveFromSyncValue(r),c},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var r=t("./util"),i=r.maybeWrapAsError,o=t("./errors").OperationalError,s=t("./es5");var a=/^(?:name|message|stack|cause)$/;function c(t){var e;if(function(t){return t instanceof Error&&s.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=s.keys(t),i=0;i<n.length;++i){var c=n[i];a.test(c)||(e[c]=t[c])}return e}return r.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,r){if(null!==t){if(n){var o=c(i(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=e._async,i=n.tryCatch,o=n.errorObj;function s(t,e){if(!n.isArray(t))return a.call(this,t,e);var s=i(e).apply(this._boundValue(),[null].concat(t));s===o&&r.throwLater(s.e)}function a(t,e){var n=this._boundValue(),s=void 0===t?i(e).call(n,null):i(e).call(n,null,t);s===o&&r.throwLater(s.e)}function c(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var s=i(e).call(this._boundValue(),t);s===o&&r.throwLater(s.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=a;void 0!==e&&Object(e).spread&&(n=s),this._then(n,c,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){var r=function(){return new _("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new P.PromiseInspection(this._target())},o=function(t){return P.reject(new _(t))};function s(){}var a,c={},l=t("./util");a=l.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},l.notEnumerableProp(P,"_getDomain",a);var u=t("./es5"),p=t("./async"),h=new p;u.defineProperty(P,"_async",{value:h});var f=t("./errors"),_=P.TypeError=f.TypeError;P.RangeError=f.RangeError;var d=P.CancellationError=f.CancellationError;P.TimeoutError=f.TimeoutError,P.OperationalError=f.OperationalError,P.RejectionError=f.OperationalError,P.AggregateError=f.AggregateError;var v=function(){},y={},m={},g=t("./thenables")(P,v),b=t("./promise_array")(P,v,g,o,s),w=t("./context")(P),C=w.create,j=t("./debuggability")(P,w),E=(j.CapturedTrace,t("./finally")(P,g,m)),k=t("./catch_filter")(m),F=t("./nodeback"),x=l.errorObj,T=l.tryCatch;function P(t){t!==v&&function(t,e){if(null==t||t.constructor!==P)throw new _("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new _("expecting a function but got "+l.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function R(t){this.promise._resolveCallback(t)}function S(t){this.promise._rejectCallback(t,!1)}function O(t){var e=new P(v);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return P.prototype.toString=function(){return"[object Promise]"},P.prototype.caught=P.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var s=arguments[n];if(!l.isObject(s))return o("Catch statement predicate: expecting an object but got "+l.classString(s));r[i++]=s}return r.length=i,t=arguments[n],this.then(void 0,k(r,t,this))}return this.then(void 0,t)},P.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},P.prototype.then=function(t,e){if(j.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+l.classString(t);arguments.length>1&&(n+=", "+l.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},P.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},P.prototype.spread=function(t){return"function"!=typeof t?o("expecting a function but got "+l.classString(t)):this.all()._then(t,void 0,void 0,y,void 0)},P.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},P.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},P.prototype.error=function(t){return this.caught(l.originatesFromRejection,t)},P.getNewLibraryCopy=n.exports,P.is=function(t){return t instanceof P},P.fromNode=P.fromCallback=function(t){var e=new P(v);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=T(t)(F(e,n));return r===x&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},P.all=function(t){return new b(t).promise()},P.cast=function(t){var e=g(t);return e instanceof P||((e=new P(v))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},P.resolve=P.fulfilled=P.cast,P.reject=P.rejected=function(t){var e=new P(v);return e._captureStackTrace(),e._rejectCallback(t,!0),e},P.setScheduler=function(t){if("function"!=typeof t)throw new _("expecting a function but got "+l.classString(t));return h.setScheduler(t)},P.prototype._then=function(t,e,n,r,i){var o=void 0!==i,s=o?i:new P(v),c=this._target(),u=c._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var p=a();if(0!=(50397184&u)){var f,_,y=c._settlePromiseCtx;0!=(33554432&u)?(_=c._rejectionHandler0,f=t):0!=(16777216&u)?(_=c._fulfillmentHandler0,f=e,c._unsetRejectionIsUnhandled()):(y=c._settlePromiseLateCancellationObserver,_=new d("late cancellation observer"),c._attachExtraTrace(_),f=e),h.invoke(y,c,{handler:null===p?f:"function"==typeof f&&l.domainBind(p,f),promise:s,receiver:r,value:_})}else c._addCallbacks(t,e,s,r,p);return s},P.prototype._length=function(){return 65535&this._bitField},P.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},P.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},P.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},P.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},P.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},P.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},P.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},P.prototype._isFinal=function(){return(4194304&this._bitField)>0},P.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},P.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},P.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},P.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},P.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==c)return void 0===e&&this._isBound()?this._boundValue():e},P.prototype._promiseAt=function(t){return this[4*t-4+2]},P.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},P.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},P.prototype._boundValue=function(){},P.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=c),this._addCallbacks(e,n,r,i,null)},P.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=c),this._addCallbacks(n,r,i,o,null)},P.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:l.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:l.domainBind(i,e));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=null===i?t:l.domainBind(i,t)),"function"==typeof e&&(this[s+1]=null===i?e:l.domainBind(i,e))}return this._setLength(o+1),o},P.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},P.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(r(),!1);var n=g(t,this);if(!(n instanceof P))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var c=new d("late cancellation observer");i._attachExtraTrace(c),this._reject(c)}}else this._reject(r())}},P.prototype._rejectCallback=function(t,e,n){var r=l.ensureErrorObject(t),i=r===t;if(!i&&!n&&j.warnings()){var o="a promise was rejected with a non-error: "+l.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},P.prototype._resolveFromExecutor=function(t){if(t!==v){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},P.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),e===y?n&&"number"==typeof n.length?o=T(t).apply(this._boundValue(),n):(o=x).e=new _("cannot .spread() a non-array: "+l.classString(n)):o=T(t).call(e,n);var s=r._popContext();0==(65536&(i=r._bitField))&&(o===m?r._reject(n):o===x?r._rejectCallback(o.e,!1):(j.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},P.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},P.prototype._followee=function(){return this._rejectionHandler0},P.prototype._setFollowee=function(t){this._rejectionHandler0=t},P.prototype._settlePromise=function(t,e,n,r){var o=t instanceof P,a=this._bitField,c=0!=(134217728&a);0!=(65536&a)?(o&&t._invokeInternalOnCancel(),n instanceof E&&n.isFinallyHandler()?(n.cancelPromise=t,T(e).call(n,r)===x&&t._reject(x.e)):e===i?t._fulfill(i.call(n)):n instanceof s?n._promiseCancelled(t):o||t instanceof b?t._cancel():n.cancel()):"function"==typeof e?o?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof s?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):o&&(c&&t._setAsyncGuaranteed(),0!=(33554432&a)?t._fulfill(r):t._reject(r))},P.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof P?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof P&&n._reject(i)},P.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},P.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},P.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},P.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():h.settlePromises(this))}},P.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return h.fatalError(t,l.isNode);(65535&e)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},P.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},P.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},P.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},P.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},P.defer=P.pending=function(){return j.deprecated("Promise.defer","new Promise"),{promise:new P(v),resolve:R,reject:S}},l.notEnumerableProp(P,"_makeSelfResolutionError",r),t("./method")(P,v,g,o,j),t("./bind")(P,v,g,j),t("./cancel")(P,b,o,j),t("./direct_resolve")(P),t("./synchronous_inspection")(P),t("./join")(P,b,g,v,h,a),P.Promise=P,P.version="3.5.1",t("./map.js")(P,b,o,g,v,j),t("./call_get.js")(P),t("./using.js")(P,o,g,C,v,j),t("./timers.js")(P,v,j),t("./generators.js")(P,o,v,g,s,j),t("./nodeify.js")(P),t("./promisify.js")(P,v),t("./props.js")(P,b,g,o),t("./race.js")(P,v,g,o),t("./reduce.js")(P,b,o,g,v,j),t("./settle.js")(P,b,j),t("./some.js")(P,b,o),t("./filter.js")(P,v),t("./each.js")(P,v),t("./any.js")(P),l.toFastProperties(P),l.toFastProperties(P.prototype),O({a:1}),O({b:2}),O({c:3}),O(1),O(function(){}),O(void 0),O(!1),O(new P(v)),j.setBounds(p.firstLineError,l.lastLineError),P}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util");s.isArray;function a(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function t(n,o){var a=r(this._values,this._promise);if(a instanceof e){var c=(a=a._target())._bitField;if(this._values=a,0==(50397184&c))return this._promise._setAsyncGuaranteed(),a._then(t,this._reject,void 0,this,o);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var l=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(l,!1)}},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<n;++a){var c=r(t[a],i);s=c instanceof e?(c=c._target())._bitField:null,o?null!==s&&c.suppressUnhandledRejections():null!==s?0==(50397184&s)?(c._proxy(this,a),this._values[a]=c):o=0!=(33554432&s)?this._promiseFulfilled(c._value(),a):0!=(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(c,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var r={},i=t("./util"),o=t("./nodeback"),s=i.withAppended,a=i.maybeWrapAsError,c=i.canEvaluate,l=t("./errors").TypeError,u={__isPromisified__:!0},p=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),h=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function f(t){return!p.test(t)}function _(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function d(t,e,n){var r=i.getDataPropertyOrDefault(t,e+n,u);return!!r&&_(r)}function v(t,e,n,r){for(var o=i.inheritedDataKeys(t),s=[],a=0;a<o.length;++a){var c=o[a],u=t[c],p=r===h||h(c,u,t);"function"!=typeof u||_(u)||d(t,c,e)||!r(c,u,t,p)||s.push(c,u)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new l("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(s,e,n),s}var y,m=function(t){return t.replace(/([$])/,"\\$")};var g=c?y:function(t,c,l,u,p,h){var f=function(){return this}(),_=t;function d(){var i=c;c===r&&(i=this);var l=new e(n);l._captureStackTrace();var u="string"==typeof _&&this!==f?this[_]:t,p=o(l,h);try{u.apply(i,s(arguments,p))}catch(t){l._rejectCallback(a(t),!0,!0)}return l._isFateSealed()||l._setAsyncGuaranteed(),l}return"string"==typeof _&&(t=u),i.notEnumerableProp(d,"__isPromisified__",!0),d};function b(t,e,n,o,s){for(var a=new RegExp(m(e)+"$"),c=v(t,e,a,n),l=0,u=c.length;l<u;l+=2){var p=c[l],h=c[l+1],f=p+e;if(o===g)t[f]=g(p,r,p,h,e,s);else{var _=o(h,function(){return g(p,r,p,h,e,s)});i.notEnumerableProp(_,"__isPromisified__",!0),t[f]=_}}return i.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new l("expecting a function but got "+i.classString(t));if(_(t))return t;var n=function(t,e,n){return g(t,e,void 0,t,null,n)}(t,void 0===(e=Object(e)).context?r:e.context,!!e.multiArgs);return i.copyDescriptors(t,n,f),n},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new l("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var o=e.filter;"function"!=typeof o&&(o=h);var s=e.promisifier;if("function"!=typeof s&&(s=g),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(t),c=0;c<a.length;++c){var u=t[a[c]];"constructor"!==a[c]&&i.isClass(u)&&(b(u.prototype,r,o,s,n),b(u,r,o,s,n))}return b(t,r,o,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o,s=t("./util"),a=s.isObject,c=t("./es5");"function"==typeof Map&&(o=Map);var l=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function u(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=l(t),n=!0;else{var r=c.keys(t),i=r.length;e=new Array(2*i);for(var s=0;s<i;++s){var a=r[s];e[s]=t[a],e[s+i]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function p(t){var n,o=r(t);return a(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new u(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(u,n),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new o,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],s=t[r];e.set(i,s)}return e}(this._values);else{n={};for(var r=this.length(),i=0,s=this.length();i<s;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return p(this)},e.props=function(t){return p(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=function(t){return t.then(function(e){return a(e,t)})};function a(t,a){var c=r(t);if(c instanceof e)return s(c);if(null===(t=o.asArray(t)))return i("expecting an array or an iterable object but got "+o.classString(t));var l=new e(n);void 0!==a&&l._propagateFrom(a,3);for(var u=l._fulfill,p=l._reject,h=0,f=t.length;h<f;++h){var _=t[h];(void 0!==_||h in t)&&e.cast(_)._then(u,p,void 0,l,null)}return l}e.race=function(t){return a(t,void 0)},e.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=e._getDomain,c=t("./util"),l=c.tryCatch;function u(t,n,r,i){this.constructor$(t);var s=a();this._fn=null===s?n:c.domainBind(s,n),void 0!==r&&(r=e.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function p(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function h(t,e,n,i){return"function"!=typeof e?r("expecting a function but got "+c.classString(e)):new u(t,e,n,i).promise()}function f(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(_,void 0,void 0,this,void 0)):_.call(this,n)}function _(t){var n,r=this.array,i=r._promise,o=l(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),t,this.index,this.length):o.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=n);var a=i._popContext();return s.checkForgottenReturns(n,a,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}c.inherits(u,n),u.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},u.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},u.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},u.prototype._iterate=function(t){var n,r;this._values=t;var i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(f,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(p,p,void 0,n,this)},e.prototype.reduce=function(t,e){return h(this,t,e,null)},e.reduce=function(t,e,n,r){return h(t,e,n,r)}}},{"./util":36}],29:[function(n,r,i){"use strict";var o,s=n("./util"),a=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var c=t.setImmediate,l=e.nextTick;o=s.isRecentNode?function(e){c.call(t,e)}:function(t){l.call(e,t)}}else if("function"==typeof a&&"function"==typeof a.resolve){var u=a.resolve();o=function(t){u.then(t)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){t.classList.toggle("foo"),n=!1}).observe(r,e);return function(i){var o=new MutationObserver(function(){o.disconnect(),i()});o.observe(t,e),n||(n=!0,r.classList.toggle("foo"))}}();r.exports=o},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util").inherits(o,n),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var n=new i;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},o.prototype._promiseRejected=function(t,e){var n=new i;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new o(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=t("./errors").RangeError,s=t("./errors").AggregateError,a=i.isArray,c={};function l(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new l(t),i=n.promise();return n.setHowMany(e),n.init(),i}i.inherits(l,n),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=a(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(t){this._howMany=t},l.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new s,e=this.length();e<this._values.length;++e)this._values[e]!==c&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(t){this._values.push(t)},l.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return u(t,e)},e.prototype.some=function(t){return u(this,t)},e._SomePromiseArray=l}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util"),i=r.errorObj,o=r.isObject;var s={}.hasOwnProperty;return function(t,a){if(o(t)){if(t instanceof e)return t;var c=function(t){try{return function(t){return t.then}(t)}catch(t){return i.e=t,i}}(t);if(c===i){a&&a._pushContext();var l=e.reject(c.e);return a&&a._popContext(),l}if("function"==typeof c)return function(t){try{return s.call(t,"_promise0")}catch(t){return!1}}(t)?(l=new e(n),t._then(l._fulfill,l._reject,void 0,l,null),l):function(t,o,s){var a=new e(n),c=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var l=!0,u=r.tryCatch(o).call(t,function(t){a&&(a._resolveCallback(t),a=null)},function(t){a&&(a._rejectCallback(t,l,!0),a=null)});return l=!1,a&&u===i&&(a._rejectCallback(u.e,!0,!0),a=null),c}(t,c,a)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.TimeoutError;function s(t){this.handle=t}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,i){var o,c;return void 0!==i?(o=e.resolve(i)._then(a,null,null,t,void 0),r.cancellation()&&i instanceof e&&o._setOnCancel(i)):(o=new e(n),c=setTimeout(function(){o._fulfill()},+t),r.cancellation()&&o._setOnCancel(new s(c)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};e.prototype.delay=function(t){return c(t,this)};function l(t){return clearTimeout(this.handle),t}function u(t){throw clearTimeout(this.handle),t}e.prototype.timeout=function(t,e){var n,a;t=+t;var c=new s(setTimeout(function(){n.isPending()&&function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),i.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()}(n,e,a)},t));return r.cancellation()?(a=this.then(),(n=a._then(l,u,void 0,c,void 0))._setOnCancel(c)):n=this._then(l,u,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=t("./util"),c=t("./errors").TypeError,l=t("./util").inherits,u=a.errorObj,p=a.tryCatch,h={};function f(t){setTimeout(function(){throw t},0)}function _(t,n){var i=0,s=t.length,a=new e(o);return function o(){if(i>=s)return a._fulfill();var c=function(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[i++]);if(c instanceof e&&c._isDisposable()){try{c=r(c._getDisposer().tryDispose(n),t.promise)}catch(t){return f(t)}if(c instanceof e)return c._then(o,f,null,null,null)}o()}(),a}function d(t,e,n){this._data=t,this._promise=e,this._context=n}function v(t,e,n){this.constructor$(t,e,n)}function y(t){return d.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function m(t){this.length=t,this.promise=null,this[t-1]=null}d.prototype.data=function(){return this._data},d.prototype.promise=function(){return this._promise},d.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h},d.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==h?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},d.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},l(v,d),v.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},m.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[t-1];if("function"!=typeof o)return n("expecting a function but got "+a.classString(o));var c=!0;2===t&&Array.isArray(arguments[0])?(t=(i=arguments[0]).length,c=!1):(i=arguments,t--);for(var l=new m(t),h=0;h<t;++h){var f=i[h];if(d.isDisposer(f)){var v=f;(f=f.promise())._setDisposable(v)}else{var g=r(f);g instanceof e&&(f=g._then(y,null,null,{resources:l,index:h},void 0))}l[h]=f}var b=new Array(l.length);for(h=0;h<b.length;++h)b[h]=e.resolve(l[h]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return u.e=n.error(),u;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}C._pushContext(),o=p(o);var r=c?o.apply(void 0,t):o(t),i=C._popContext();return s.checkForgottenReturns(r,i,"Promise.using",C),r}),C=w.lastly(function(){var t=new e.PromiseInspection(w);return _(l,t)});return l.promise=C,C._setOnCancel(l),C},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new v(t,this,i());throw new c}}},{"./errors":12,"./util":36}],36:[function(n,r,i){"use strict";var o=n("./es5"),s="undefined"==typeof navigator,a={e:{}},c,l="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:void 0!==this?this:null;function u(){try{var t=c;return c=null,t.apply(this,arguments)}catch(t){return a.e=t,a}}function p(t){return c=t,u}var h=function(t,e){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype};function f(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function _(t){return"function"==typeof t||"object"==typeof t&&null!==t}function d(t){return f(t)?new Error(x(t)):t}function v(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function y(t,e,n){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function m(t,e,n){if(f(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,r),t}function g(t){throw t}var b=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(o.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var s;try{s=n(t)}catch(t){return r}for(var a=0;a<s.length;++a){var c=s[a];if(!i[c]){i[c]=!0;var l=Object.getOwnPropertyDescriptor(t,c);null!=l&&null==l.get&&null==l.set&&r.push(c)}}t=o.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),w=/this\s*\.\s*\S+\s*=/;function C(t){try{if("function"==typeof t){var e=o.names(t.prototype),n=o.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=w.test(t+"")&&o.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function j(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}var E=/^[a-z$_][a-z$_0-9]*$/i;function k(t){return E.test(t)}function F(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function x(t){try{return t+""}catch(t){return"[no string representation]"}}function T(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function P(t){try{m(t,"isOperational",!0)}catch(t){}}function R(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function S(t){return T(t)&&o.propertyIsWritable(t,"stack")}var O="stack"in new Error?function(t){return S(t)?t:new Error(x(t))}:function(t){if(S(t))return t;try{throw new Error(x(t))}catch(t){return t}};function A(t){return{}.toString.call(t)}function D(t,e,n){for(var r=o.names(t),i=0;i<r.length;++i){var s=r[i];if(n(s))try{o.defineProperty(e,s,o.getDescriptor(t,s))}catch(t){}}}var V=function(t){return o.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var I="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};V=function(t){return o.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?I(t):null}}var L=void 0!==e&&"[object process]"===A(e).toLowerCase(),H=void 0!==e&&void 0!==e.env;function N(t){return H?e.env[t]:void 0}function U(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function B(t,e){return t.bind(e)}var M={isClass:C,isIdentifier:k,inheritedDataKeys:b,getDataPropertyOrDefault:y,thrower:g,isArray:o.isArray,asArray:V,notEnumerableProp:m,isPrimitive:f,isObject:_,isError:T,canEvaluate:s,errorObj:a,tryCatch:p,inherits:h,withAppended:v,maybeWrapAsError:d,toFastProperties:j,filledRange:F,toString:x,canAttachTrace:S,ensureErrorObject:O,originatesFromRejection:R,markAsOriginatingFromRejection:P,classString:A,copyDescriptors:D,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:L,hasEnvVariables:H,env:N,global:l,getNativePromise:U,domainBind:B},q;M.isRecentNode=M.isNode&&(q=e.versions.node.split(".").map(Number),0===q[0]&&q[1]>10||q[0]>0),M.isNode&&M.toFastProperties(e);try{throw new Error}catch(t){M.lastLineError=t}r.exports=M},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);
},{"process":355}],536:[function(require,module,exports) {
"use strict";module.exports=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}};
},{}],534:[function(require,module,exports) {
"use strict";var e=require("./helpers/bind"),r=require("is-buffer"),n=Object.prototype.toString;function t(e){return"[object Array]"===n.call(e)}function i(e){return"[object ArrayBuffer]"===n.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function f(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function u(e){return"string"==typeof e}function c(e){return"number"==typeof e}function a(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function s(e){return"[object Date]"===n.call(e)}function p(e){return"[object File]"===n.call(e)}function y(e){return"[object Blob]"===n.call(e)}function d(e){return"[object Function]"===n.call(e)}function b(e){return l(e)&&d(e.pipe)}function j(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function m(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function v(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function B(e,r){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),t(e))for(var n=0,i=e.length;n<i;n++)r.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.call(null,e[o],o,e)}function A(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=A(e[n],r):e[n]=r}for(var n=0,t=arguments.length;n<t;n++)B(arguments[n],r);return e}function g(r,n,t){return B(n,function(n,i){r[i]=t&&"function"==typeof n?e(n,t):n}),r}module.exports={isArray:t,isArrayBuffer:i,isBuffer:r,isFormData:o,isArrayBufferView:f,isString:u,isNumber:c,isObject:l,isUndefined:a,isDate:s,isFile:p,isBlob:y,isFunction:d,isStream:b,isURLSearchParams:j,isStandardBrowserEnv:v,forEach:B,merge:A,extend:g,trim:m};
},{"./helpers/bind":536,"is-buffer":27}],596:[function(require,module,exports) {
"use strict";var e=require("../utils");module.exports=function(t,r){e.forEach(t,function(e,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(t[r]=e,delete t[o])})};
},{"../utils":534}],697:[function(require,module,exports) {
"use strict";module.exports=function(e,o,r,s,t){return e.config=o,r&&(e.code=r),e.request=s,e.response=t,e};
},{}],675:[function(require,module,exports) {
"use strict";var r=require("./enhanceError");module.exports=function(e,n,o,t,u){var a=new Error(e);return r(a,n,o,t,u)};
},{"./enhanceError":697}],671:[function(require,module,exports) {
"use strict";var t=require("./createError");module.exports=function(e,s,u){var a=u.config.validateStatus;u.status&&a&&!a(u.status)?s(t("Request failed with status code "+u.status,u.config,null,u.request,u)):e(u)};
},{"./createError":675}],672:[function(require,module,exports) {
"use strict";var e=require("./../utils");function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(i,n,t){if(!n)return i;var a;if(t)a=t(n);else if(e.isURLSearchParams(n))a=n.toString();else{var c=[];e.forEach(n,function(i,n){null!==i&&void 0!==i&&(e.isArray(i)&&(n+="[]"),e.isArray(i)||(i=[i]),e.forEach(i,function(i){e.isDate(i)?i=i.toISOString():e.isObject(i)&&(i=JSON.stringify(i)),c.push(r(n)+"="+r(i))}))}),a=c.join("&")}return a&&(i+=(-1===i.indexOf("?")?"?":"&")+a),i};
},{"./../utils":534}],673:[function(require,module,exports) {
"use strict";var e=require("./../utils"),t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(r){var i,o,n,s={};return r?(e.forEach(r.split("\n"),function(r){if(n=r.indexOf(":"),i=e.trim(r.substr(0,n)).toLowerCase(),o=e.trim(r.substr(n+1)),i){if(s[i]&&t.indexOf(i)>=0)return;s[i]="set-cookie"===i?(s[i]?s[i]:[]).concat([o]):s[i]?s[i]+", "+o:o}}),s):s};
},{"./../utils":534}],674:[function(require,module,exports) {
"use strict";var t=require("./../utils");module.exports=t.isStandardBrowserEnv()?function(){var r,e=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function a(t){var r=t;return e&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return r=a(window.location.href),function(e){var o=t.isString(e)?a(e):e;return o.protocol===r.protocol&&o.host===r.host}}():function(){return!0};
},{"./../utils":534}],676:[function(require,module,exports) {
"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(){this.message="String contains an invalid character"}function o(o){for(var e,a,n=String(o),c="",i=0,h=r;n.charAt(0|i)||(h="=",i%1);c+=h.charAt(63&e>>8-i%1*8)){if((a=n.charCodeAt(i+=.75))>255)throw new t;e=e<<8|a}return c}t.prototype=new Error,t.prototype.code=5,t.prototype.name="InvalidCharacterError",module.exports=o;
},{}],677:[function(require,module,exports) {
"use strict";var e=require("./../utils");module.exports=e.isStandardBrowserEnv()?{write:function(n,t,o,r,i,u){var s=[];s.push(n+"="+encodeURIComponent(t)),e.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),e.isString(r)&&s.push("path="+r),e.isString(i)&&s.push("domain="+i),!0===u&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};
},{"./../utils":534}],595:[function(require,module,exports) {
"use strict";var e=require("./../utils"),r=require("./../core/settle"),o=require("./../helpers/buildURL"),t=require("./../helpers/parseHeaders"),n=require("./../helpers/isURLSameOrigin"),s=require("../core/createError"),i="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||require("./../helpers/btoa");module.exports=function(a){return new Promise(function(u,d){var l=a.data,p=a.headers;e.isFormData(l)&&delete p["Content-Type"];var f=new XMLHttpRequest,c="onreadystatechange",w=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in f||n(a.url)||(f=new window.XDomainRequest,c="onload",w=!0,f.onprogress=function(){},f.ontimeout=function(){}),a.auth){var h=a.auth.username||"",m=a.auth.password||"";p.Authorization="Basic "+i(h+":"+m)}if(f.open(a.method.toUpperCase(),o(a.url,a.params,a.paramsSerializer),!0),f.timeout=a.timeout,f[c]=function(){if(f&&(4===f.readyState||w)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in f?t(f.getAllResponseHeaders()):null,o={data:a.responseType&&"text"!==a.responseType?f.response:f.responseText,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:e,config:a,request:f};r(u,d,o),f=null}},f.onerror=function(){d(s("Network Error",a,null,f)),f=null},f.ontimeout=function(){d(s("timeout of "+a.timeout+"ms exceeded",a,"ECONNABORTED",f)),f=null},e.isStandardBrowserEnv()){var y=require("./../helpers/cookies"),q=(a.withCredentials||n(a.url))&&a.xsrfCookieName?y.read(a.xsrfCookieName):void 0;q&&(p[a.xsrfHeaderName]=q)}if("setRequestHeader"in f&&e.forEach(p,function(e,r){void 0===l&&"content-type"===r.toLowerCase()?delete p[r]:f.setRequestHeader(r,e)}),a.withCredentials&&(f.withCredentials=!0),a.responseType)try{f.responseType=a.responseType}catch(e){if("json"!==a.responseType)throw e}"function"==typeof a.onDownloadProgress&&f.addEventListener("progress",a.onDownloadProgress),"function"==typeof a.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",a.onUploadProgress),a.cancelToken&&a.cancelToken.promise.then(function(e){f&&(f.abort(),d(e),f=null)}),void 0===l&&(l=null),f.send(l)})};
},{"./../utils":534,"./../core/settle":671,"./../helpers/buildURL":672,"./../helpers/parseHeaders":673,"./../helpers/isURLSameOrigin":674,"../core/createError":675,"./../helpers/btoa":676,"./../helpers/cookies":677}],535:[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=require("./utils"),r=require("./helpers/normalizeHeaderName"),n={"Content-Type":"application/x-www-form-urlencoded"};function a(e,r){!t.isUndefined(e)&&t.isUndefined(e["Content-Type"])&&(e["Content-Type"]=r)}function i(){var t;return"undefined"!=typeof XMLHttpRequest?t=require("./adapters/xhr"):void 0!==e&&(t=require("./adapters/http")),t}var o={adapter:i(),transformRequest:[function(e,n){return r(n,"Content-Type"),t.isFormData(e)||t.isArrayBuffer(e)||t.isBuffer(e)||t.isStream(e)||t.isFile(e)||t.isBlob(e)?e:t.isArrayBufferView(e)?e.buffer:t.isURLSearchParams(e)?(a(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):t.isObject(e)?(a(n,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};t.forEach(["delete","get","head"],function(e){o.headers[e]={}}),t.forEach(["post","put","patch"],function(e){o.headers[e]=t.merge(n)}),module.exports=o;
},{"./utils":534,"./helpers/normalizeHeaderName":596,"./adapters/xhr":595,"./adapters/http":595,"process":355}],607:[function(require,module,exports) {
"use strict";var t=require("./../utils");function e(){this.handlers=[]}e.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},e.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},e.prototype.forEach=function(e){t.forEach(this.handlers,function(t){null!==t&&e(t)})},module.exports=e;
},{"./../utils":534}],657:[function(require,module,exports) {
"use strict";var r=require("./../utils");module.exports=function(t,u,e){return r.forEach(e,function(r){t=r(t,u)}),t};
},{"./../utils":534}],540:[function(require,module,exports) {
"use strict";module.exports=function(t){return!(!t||!t.__CANCEL__)};
},{}],658:[function(require,module,exports) {
"use strict";module.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};
},{}],659:[function(require,module,exports) {
"use strict";module.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};
},{}],608:[function(require,module,exports) {
"use strict";var e=require("./../utils"),r=require("./transformData"),a=require("../cancel/isCancel"),s=require("../defaults"),t=require("./../helpers/isAbsoluteURL"),n=require("./../helpers/combineURLs");function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}module.exports=function(d){return o(d),d.baseURL&&!t(d.url)&&(d.url=n(d.baseURL,d.url)),d.headers=d.headers||{},d.data=r(d.data,d.headers,d.transformRequest),d.headers=e.merge(d.headers.common||{},d.headers[d.method]||{},d.headers||{}),e.forEach(["delete","get","head","post","put","patch","common"],function(e){delete d.headers[e]}),(d.adapter||s.adapter)(d).then(function(e){return o(d),e.data=r(e.data,e.headers,d.transformResponse),e},function(e){return a(e)||(o(d),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,d.transformResponse))),Promise.reject(e)})};
},{"./../utils":534,"./transformData":657,"../cancel/isCancel":540,"../defaults":535,"./../helpers/isAbsoluteURL":658,"./../helpers/combineURLs":659}],537:[function(require,module,exports) {
"use strict";var e=require("./../defaults"),t=require("./../utils"),r=require("./InterceptorManager"),o=require("./dispatchRequest");function s(e){this.defaults=e,this.interceptors={request:new r,response:new r}}s.prototype.request=function(r){"string"==typeof r&&(r=t.merge({url:arguments[0]},arguments[1])),(r=t.merge(e,this.defaults,{method:"get"},r)).method=r.method.toLowerCase();var s=[o,void 0],u=Promise.resolve(r);for(this.interceptors.request.forEach(function(e){s.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){s.push(e.fulfilled,e.rejected)});s.length;)u=u.then(s.shift(),s.shift());return u},t.forEach(["delete","get","head","options"],function(e){s.prototype[e]=function(r,o){return this.request(t.merge(o||{},{method:e,url:r}))}}),t.forEach(["post","put","patch"],function(e){s.prototype[e]=function(r,o,s){return this.request(t.merge(s||{},{method:e,url:r,data:o}))}}),module.exports=s;
},{"./../defaults":535,"./../utils":534,"./InterceptorManager":607,"./dispatchRequest":608}],538:[function(require,module,exports) {
"use strict";function t(t){this.message=t}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,module.exports=t;
},{}],539:[function(require,module,exports) {
"use strict";var e=require("./Cancel");function n(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(e){o=e});var r=this;n(function(n){r.reason||(r.reason=new e(n),o(r.reason))})}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(n){e=n}),cancel:e}},module.exports=n;
},{"./Cancel":538}],541:[function(require,module,exports) {
"use strict";module.exports=function(n){return function(t){return n.apply(null,t)}};
},{}],345:[function(require,module,exports) {
"use strict";var e=require("./utils"),r=require("./helpers/bind"),n=require("./core/Axios"),t=require("./defaults");function u(t){var u=new n(t),l=r(n.prototype.request,u);return e.extend(l,n.prototype,u),e.extend(l,u),l}var l=u(t);l.Axios=n,l.create=function(r){return u(e.merge(t,r))},l.Cancel=require("./cancel/Cancel"),l.CancelToken=require("./cancel/CancelToken"),l.isCancel=require("./cancel/isCancel"),l.all=function(e){return Promise.all(e)},l.spread=require("./helpers/spread"),module.exports=l,module.exports.default=l;
},{"./utils":534,"./helpers/bind":536,"./core/Axios":537,"./defaults":535,"./cancel/Cancel":538,"./cancel/CancelToken":539,"./cancel/isCancel":540,"./helpers/spread":541}],106:[function(require,module,exports) {
module.exports=require("./lib/axios");
},{"./lib/axios":345}],108:[function(require,module,exports) {
var process = require("process");
var e=require("process");(function(){var n,r,t,o,u,i;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(module.exports=function(){return(n()-u)/1e6},r=e.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),i=1e9*e.uptime(),u=o-i):Date.now?(module.exports=function(){return Date.now()-t},t=Date.now()):(module.exports=function(){return(new Date).getTime()-t},t=(new Date).getTime())}).call(this);
},{"process":355}],105:[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],21:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAX_TEXTURE_IMAGE_UNITS=exports.MAX_TEXTURE_SIZE=exports.webgl2=void 0;const e="#version 300 es\nprecision highp float;\n\nin vec3 position;\nin vec2 texcoord;\nout vec2 outTex;\n\nvoid main () {\n  gl_Position = vec4(position, 1.0);\n\toutTex = texcoord;\n}\n";class t{constructor(){if(this.isSupported=!1,this.vertexShader=null,"undefined"!=typeof window){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("webgl2");const e=this.context;e?(this.isSupported=!0,e.getExtension("EXT_color_buffer_float"),this.MAX_TEXTURE_SIZE=e.getParameter(e.MAX_TEXTURE_SIZE),this.MAX_TEXTURE_IMAGE_UNITS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.init()):console.log("Unable to initialize WebGL2 -- your browser may not support it.")}this._refs={textures:[],buffers:[]}}init(){this.createCommonVertexShader()}createCommonVertexShader(){const t=this.context,r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||(console.error(t.getShaderInfoLog(r)),t.deleteShader(r),this.isSupported=!1),this.vertexShader=r}compileProgram(e){const t=this.context,r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);let o=t.getShaderParameter(r,t.COMPILE_STATUS);o||(console.error(t.getShaderInfoLog(r)),t.deleteShader(r),this.isSupported=!1);const s=t.createProgram();return t.attachShader(s,this.vertexShader),t.attachShader(s,r),t.linkProgram(s),(o=t.getProgramParameter(s,t.LINK_STATUS))||(console.error(t.getProgramInfoLog(s)),this.isSupported=!1),this.setupVertices(s),s}setupVertices(e){const t=this.context,r=t.getAttribLocation(e,"position"),o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),this.storeRef("buffer",o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0]),t.STATIC_DRAW),t.vertexAttribPointer(r,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r);const s=t.getAttribLocation(e,"texcoord"),n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),t.STATIC_DRAW),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),this.storeRef("buffer",n);const i=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),t.STATIC_DRAW),this.storeRef("buffer",i)}selectProgram(e){this.context.useProgram(e)}bindUniforms(e,t){const r=this.context;t.forEach(({value:t,type:o,name:s})=>{const n=r.getUniformLocation(e,s);"float"===o?r.uniform1f(n,t):"int"!==o&&"bool"!==o||r.uniform1i(n,t)})}bindInputTextures(e,t,r){const o=this.context;t.forEach(({input:t,name:s},n)=>{if(o.activeTexture(o.TEXTURE0+n),t.glTextureFragments)if(t.glTextureFragmentsAsColStack){const{textureTarget:e}=this.getWebGLTextureOptions(t.glTextureType,t.glTextureFormat);o.bindTexture(e,t.glTextureFragmentsAsColStack)}else{const{textureTarget:e}=this.getWebGLTextureOptions(t.glTextureType,t.glTextureFormat);o.bindTexture(e,t.glTextureFragments[r])}else{const{textureTarget:e}=this.getWebGLTextureOptions(t.glTextureType,t.glTextureFormat);o.bindTexture(e,t.glTexture)}o.uniform1i(o.getUniformLocation(e,s),n)})}bindOutputTexture(e,t){const r=this.context;r.viewport(0,0,t[1],t[0]),this.framebuffer=this.framebuffer||r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0)}runProgram({program:e,output:t,inputs:r,uniforms:o,supportsTextureFragments:s=!1}){if(!e)throw new Error("[WebGL2] missing program");if(!t)throw new Error("[WebGL2] missing output");if(!r)throw new Error("[WebGL2] missing inputs");const n=this.context;if(this.selectProgram(e),o&&Array.isArray(o)&&this.bindUniforms(e,o),t.glTextureFragments){if(!s)throw new Error("[WebGL2] program does not support texture fragments");const o=r.filter(e=>e.input.glTextureFragments&&!e.input.glTextureFragmentsAsColStack),i=t.glTextureFragments.length;if(o.some(e=>e.input.glTextureFragments.length!==i))throw new Error("[WebGL2] number of texture fragments in inputs and output do not match");for(let o=0;o<i;o++)this.bindOutputTexture(t.glTextureFragments[o],t.glTextureFragmentShape),this.bindInputTextures(e,r,o),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}else this.bindOutputTexture(t.glTexture,t.glTextureShape),this.bindInputTextures(e,r),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}readData(e){const t=this.context,r=new ArrayBuffer(e[0]*e[1]*4*4),o=new Float32Array(r);t.readPixels(0,0,e[1],e[0],t.RGBA,t.FLOAT,o);const s=[];for(let e=0;e<o.length;e+=4)s.push(o[e]);return new Float32Array(s)}getWebGLTextureOptions(e,t){const r=this.context,o={"2d":r.TEXTURE_2D,"2d_array":r.TEXTURE_2D_ARRAY,"3d":r.TEXTURE_3D},s={float:r.R32F,int:r.R32I},n={float:r.RED,int:r.RED_INTEGER},i={float:r.FLOAT,int:r.INT};return{textureTarget:o[e],textureInternalFormat:s[t],textureFormat:n[t],textureType:i[t]}}storeRef(e,t){"texture"===e?this._refs.textures.push(t):"buffer"===e&&this._refs.buffers.push(t)}clearRefs(){const e=this.context;this._refs.textures.forEach(t=>e.deleteTexture(t)),this._refs.buffers.forEach(t=>e.deleteBuffer(t)),this._refs={textures:[],buffers:[]}}}const r=new t;exports.webgl2=r;const o=r.MAX_TEXTURE_SIZE;exports.MAX_TEXTURE_SIZE=o;const s=r.MAX_TEXTURE_IMAGE_UNITS;exports.MAX_TEXTURE_IMAGE_UNITS=s;
},{}],57:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./WebGL2");class s{constructor(s={}){this.layerClass="Layer",this.name=s.name,this.description="",this.gpu=t.webgl2.isSupported&&s.gpu,this.params=[],this.weights={},this.inbound=[],this.outbound=[]}throwError(t){throw new Error(`[${this.layerClass} layer: ${this.name||""}] ${t}`)}toggleGPU(s){const e=void 0===s?!this.gpu:s;t.webgl2.isSupported&&e?this.gpu=!0:this.gpu=!1}setWeights(t,s=!0){this.params.forEach((e,r)=>{this.weights[e]=t[r],this.gpu&&s&&this.weights[e].createGLTexture({type:"2d",format:"float"})})}call(t){return this.output=t,this.output}}exports.default=s;
},{"./WebGL2":21}],548:[function(require,module,exports) {
var r=Math.ceil,a=Math.max;function t(t,e,o,n){for(var u=-1,c=a(r((e-t)/(o||1)),0),f=Array(c);c--;)f[n?c:++u]=t,t+=o;return f}module.exports=t;
},{}],362:[function(require,module,exports) {
var e=require("./_baseRange"),r=require("./_isIterateeCall"),i=require("./toFinite");function t(t){return function(n,o,u){return u&&"number"!=typeof u&&r(n,o,u)&&(o=u=void 0),n=i(n),void 0===o?(o=n,n=0):o=i(o),u=void 0===u?n<o?1:-1:i(u),e(n,o,u,t)}}module.exports=t;
},{"./_baseRange":548,"./_isIterateeCall":431,"./toFinite":549}],130:[function(require,module,exports) {
var e=require("./_createRange"),r=e();module.exports=r;
},{"./_createRange":362}],29:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkShape=n,exports.data3DLayoutForGL=l,exports.createIndicesFor2DReshaped=u;var e=r(require("lodash/range")),t=r(require("ndarray")),a=r(require("ndarray-ops"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(e.length&&t.length&&e.length!==t.reduce((e,t)=>e*t,1))throw new Error("[Tensor] specified shape incompatible with data.")}function l(e,r,n){const l=new e(r.data.length),u=(0,t.default)(new e(n[0]*n[1]),[n[0],n[1]]);let s=0;for(let e=0;e<n[2];e++)a.default.assign(u,r.pick(null,null,e)),l.set(u.data,s),s+=n[0]*n[1];return l}function u(r,n=!1,l=-1){const u=r.reduce((e,t)=>e*t,1),s=(0,t.default)(new Int32Array(u),r);if(n){const e=Math.ceil(Math.sqrt(u)),r=(0,t.default)(new Int32Array(e**2),[e,e]),n=(0,t.default)(new Int32Array(e**2),[e,e]),l=(0,t.default)(new Int32Array(e**2),[e,e]);for(let t=0;t<e;t++)a.default.assigns(r.pick(t,null),t);for(let t=0;t<e;t++)a.default.assigns(n.pick(null,t),t);a.default.muls(l,r,e),a.default.addeq(l,n),s.data.set(l.data.subarray(0,s.size))}else{l<0&&(l=r.length+l);const n=r[l],d=(0,t.default)(new Int32Array(u),r),f=(0,t.default)(new Int32Array(u),r),i=[...r.slice(0,l),...r.slice(l+1)],o=i.reduce((e,t)=>e*t,1),c=(0,t.default)(new Int32Array((0,e.default)(o)),i),p=Array(r.length).fill(null);for(let e=0;e<n;e++)p[l]=e,a.default.assign(d.pick(...p),c),a.default.assigns(f.pick(...p),e);a.default.muls(s,d,n),a.default.addeq(s,f)}return s}
},{"lodash/range":130,"ndarray":17,"ndarray-ops":18}],30:[function(require,module,exports) {
"use strict";var r=require("ndarray");function e(e,s){var a,t=[],i=[];if(void 0!==s&&!Array.isArray(s))throw new Error("axes must be an Array list of dimensions to squeeze");for(a=0;a<e.shape.length;a++)(1!==e.shape[a]||void 0!==s&&-1===s.indexOf(a))&&(t.push(e.shape[a]),i.push(e.stride[a]));return r(e.data,t,i,e.offset)}module.exports=e;
},{"ndarray":17}],20:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./WebGL2"),t=h(require("./utils/tensorUtils")),r=i(require("ndarray")),a=i(require("ndarray-ops")),s=i(require("ndarray-squeeze"));function i(e){return e&&e.__esModule?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}class n{constructor(e,a,s={}){this.arrayType=s.type||Float32Array,e&&e.length&&(e instanceof this.arrayType||e instanceof Array)?(t.checkShape(e,a),e instanceof this.arrayType?this.tensor=(0,r.default)(e,a):e instanceof Array&&(this.tensor=(0,r.default)(new this.arrayType(e),a))):!e.length&&a.length?this.tensor=(0,r.default)(new this.arrayType(a.reduce((e,t)=>e*t,1)),a):this.tensor=(0,r.default)(new this.arrayType([]),[])}createGLTexture({type:t="2d",format:r="float",supportsTextureFragments:a=!1}){let s=[];if(1===this.tensor.shape.length)s=[1,this.tensor.shape[0]],this.is1D=!0;else if(2===this.tensor.shape.length)s=this.tensor.shape;else{if(3!==this.tensor.shape.length||"2d_array"!==t&&"3d"!==t)throw new Error("[Tensor] cannot create WebGL2 texture.");s=this.tensor.shape}if(this.glTextureShape=s,this.glTextureType=t,this.glTextureFormat=r,"2d"===t)this.glTextureShape[0]>e.MAX_TEXTURE_SIZE&&a?this._create2DRowFragmentedGLTexture():this._create2DGLTexture();else{if("2d_array"!==t&&"3d"!==t)throw new Error(`[Tensor] invalid type ${t}.`);this._create3DGLTexture()}}_create2DGLTexture(){const t=e.webgl2.context,r=e.webgl2.getWebGLTextureOptions(this.glTextureType,this.glTextureFormat),{textureTarget:a,textureInternalFormat:s,textureFormat:i,textureType:h}=r;this.glTexture=t.createTexture(),e.webgl2.storeRef("texture",this.glTexture),t.bindTexture(a,this.glTexture);const n=this.glTextureShape,T=this.tensor.data;t.texImage2D(a,0,s,n[1],n[0],0,i,h,T),t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)}_create2DRowFragmentedGLTexture(){const t=e.webgl2.context,r=e.webgl2.getWebGLTextureOptions(this.glTextureType,this.glTextureFormat),{textureTarget:a,textureInternalFormat:s,textureFormat:i,textureType:h}=r;this.glTextureFragments=[],this.glTextureFragmentShape=[e.MAX_TEXTURE_SIZE,this.glTextureShape[1]];const n=this.glTextureFragmentShape,T=Math.ceil(this.glTextureShape[0]/e.MAX_TEXTURE_SIZE);let l=0;for(let r=0;r<T;r++){const o=t.createTexture();let u;e.webgl2.storeRef("texture",o),t.bindTexture(a,o),r===T-1?(u=new this.arrayType(n[0]*n[1])).set(this.tensor.data.slice(l,l+n[0]*n[1]),0):u=this.tensor.data.slice(l,l+n[0]*n[1]),t.texImage2D(a,0,s,n[1],n[0],0,i,h,u),t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST),this.glTextureFragments.push(o),l+=n[0]*n[1]}}_create3DGLTexture(){const r=e.webgl2.context,a=e.webgl2.getWebGLTextureOptions(this.glTextureType,this.glTextureFormat),{textureTarget:s,textureInternalFormat:i,textureFormat:h,textureType:n}=a;this.glTexture=r.createTexture(),e.webgl2.storeRef("texture",this.glTexture),r.bindTexture(s,this.glTexture);const T=this.glTextureShape,l=t.data3DLayoutForGL(this.arrayType,this.tensor,this.glTextureShape);r.texImage3D(s,0,i,T[1],T[0],T[2],0,h,n,l),r.texParameteri(s,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(s,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(s,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(s,r.TEXTURE_MIN_FILTER,r.NEAREST)}convert2DRowFragmentedGLTextureToColStack(){if(!this.glTextureFragments||!this.glTextureFragmentShape)throw new Error("[Tensor] no glTextureFragments available.");const t=e.webgl2.context,r=e.webgl2.getWebGLTextureOptions(this.glTextureType,this.glTextureFormat),{textureTarget:a,textureInternalFormat:s,textureFormat:i,textureType:h}=r;if(this.glTextureFragmentsAsColStack)t.bindTexture(a,this.glTextureFragmentsAsColStack);else{this.glTextureFragmentsAsColStack=t.createTexture(),e.webgl2.storeRef("texture",this.glTextureFragmentsAsColStack),t.bindTexture(a,this.glTextureFragmentsAsColStack);const r=this.glTextureFragments.length;this.glTextureFragmentsAsColStackShape=[this.glTextureFragmentShape[0],this.glTextureFragmentShape[1]*r];const n=this.glTextureFragmentsAsColStackShape,T=new this.arrayType(n.reduce((e,t)=>e*t,1));t.texImage2D(a,0,s,n[1],n[0],0,i,h,T),t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)}const n=t.createFramebuffer();t.bindFramebuffer(t.READ_FRAMEBUFFER,n),this.glTextureFragments.forEach((e,r)=>{t.framebufferTexture2D(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.copyTexSubImage2D(a,0,r*this.glTextureFragmentShape[1],0,0,0,this.glTextureFragmentShape[1],this.glTextureFragmentShape[0])}),t.deleteFramebuffer(n)}removeGLTextureFragmentsAsColStack(){if(this.glTextureFragmentsAsColStack){e.webgl2.context.deleteTexture(this.glTextureFragmentsAsColStack),delete this.glTextureFragmentsAsColStack,delete this.glTextureFragmentsAsColStackShape}}deleteGLTexture(){const t=e.webgl2.context;this.glTexture&&(t.deleteTexture(this.glTexture),delete this.glTexture),this.glTextureFragments&&(this.glTextureFragments.forEach(e=>{t.deleteTexture(e)}),delete this.glTextureFragments)}replaceTensorData(r){if(r&&r.length&&r instanceof this.arrayType)this.tensor.data.set(r);else{if(!(r&&r.length&&r instanceof Array))throw new Error("[Tensor] invalid input for replaceTensorData method.");this.tensor.data.set(new this.arrayType(r))}if(this.glTexture){const r=e.webgl2.context,a=e.webgl2.getWebGLTextureOptions(this.glTextureType,this.glTextureFormat),{textureTarget:s,textureFormat:i,textureType:h}=a;r.bindTexture(s,this.glTexture);const n=this.glTextureShape;if("2d"===this.glTextureType){const e=this.tensor.data;r.texSubImage2D(s,0,0,0,n[1],n[0],i,h,e,0)}else if("2d_array"===this.glTextureType||"3d"===this.glTextureType){const e=t.data3DLayoutForGL(this.arrayType,this.tensor,n);r.texSubImage3D(s,0,0,0,0,n[1],n[0],n[2],i,h,e,0)}}}transferFromGLTexture(){if(this.glTextureFragments){this.tensor=(0,r.default)(new this.arrayType(this.glTextureShape[0]*this.glTextureShape[1]),this.glTextureShape);let t=0;for(let r=0;r<this.glTextureFragments.length;r++){e.webgl2.bindOutputTexture(this.glTextureFragments[r],this.glTextureFragmentShape);const a=e.webgl2.readData(this.glTextureFragmentShape);if(r===this.glTextureFragments.length-1){const e=this.tensor.data.length-t;this.tensor.data.set(a.subarray(0,e),t)}else this.tensor.data.set(a,t);t+=a.length}}else e.webgl2.bindOutputTexture(this.glTexture,this.glTextureShape),this.tensor=(0,r.default)(new this.arrayType([]),this.glTextureShape),this.tensor.data=e.webgl2.readData(this.glTextureShape);this.is1D&&1===this.glTextureShape[0]&&(this.tensor=(0,s.default)(this.tensor,[0]))}reshapeTo2D(){const e=this.tensor.shape.length-1,s=this.tensor.shape[e],i=this.tensor.shape.slice(0,e),h=i.reduce((e,t)=>e*t,1),n=(0,r.default)(new this.arrayType(h*s),[h,s]),T=(0,r.default)(new this.arrayType(h),i),l=(0,r.default)(new this.arrayType(h),[h]),o=Array(this.tensor.shape.length).fill(null);for(let t=0;t<s;t++)o[e]=t,a.default.assign(T,this.tensor.pick(...o)),l.data=T.data,a.default.assign(n.pick(null,t),l);this.originalShape=this.tensor.shape,this.indicesForReshaped=t.createIndicesFor2DReshaped(this.tensor.shape,!1,e),this.tensor=n,this.is2DReshaped=!0}reshapeFrom2D(e=-1){if(!this.is2DReshaped)throw new Error("[Tensor] not in reshaped 2D representation.");if(!this.originalShape)throw new Error("[Tensor] does not contain originalShape.");e<0&&(e=this.originalShape.length+e);const t=this.tensor.shape[0],s=this.tensor.shape[1],i=(0,r.default)(new this.arrayType(this.originalShape.reduce((e,t)=>e*t,1)),this.originalShape),h=(0,r.default)(new this.arrayType(t),[t]),n=[...this.originalShape.slice(0,e),...this.originalShape.slice(e+1)],T=(0,r.default)(new this.arrayType(n.reduce((e,t)=>e*t,1)),n),l=Array(this.originalShape.length).fill(null);for(let t=0;t<s;t++)a.default.assign(h,this.tensor.pick(null,t)),T.data=h.data,l[e]=t,a.default.assign(i.pick(...l),T);this.tensor=i}reshapeTo2DSquare(){const e=Math.ceil(Math.sqrt(this.tensor.size)),a=(0,r.default)(new this.arrayType(e**2),[e,e]);a.data.set(this.tensor.data),this.originalShape=this.tensor.shape,this.indicesForReshaped=t.createIndicesFor2DReshaped(this.tensor.shape,!0),this.tensor=a,this.is2DSquareReshaped=!0}reshapeFrom2DSquare(){if(!this.is2DSquareReshaped)throw new Error("[Tensor] not in reshaped 2D square representation.");if(!this.originalShape)throw new Error("[Tensor] does not contain originalShape.");const e=this.originalShape.reduce((e,t)=>e*t,1),t=(0,r.default)(new this.arrayType(e),this.originalShape);t.data.set(this.tensor.data.subarray(0,e)),this.tensor=t}}exports.default=n;
},{"./WebGL2":21,"./utils/tensorUtils":29,"ndarray":17,"ndarray-ops":18,"ndarray-squeeze":30}],34:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("lodash/isEqual")),t=a(require("../Layer")),s=a(require("../Tensor"));function a(e){return e&&e.__esModule?e:{default:e}}class h extends t.default{constructor(e={}){super(e),this.layerClass="InputLayer";const{shape:t=[]}=e;this.shape=e.batch_input_shape&&e.batch_input_shape.length?e.batch_input_shape.slice(1):t,this.description=`shape: ${JSON.stringify(this.shape)}`}call(e){return this.gpu?this._callGPU(e):this._callCPU(e),this.output}_callCPU(t){this.inputShape=t.tensor.shape,(0,e.default)(this.inputShape,this.shape)||this.throwError(`input tensor shape ${t.tensor.shape} does not match specified shape ${this.shape}.`),this.output=new s.default(t.tensor.data,t.tensor.shape)}_callGPU(t){(t.glTexture||t.glTextureFragments)&&(t.is2DReshaped||t.is2DSquareReshaped)?this.inputShape=t.originalShape:this.inputShape=t.tensor.shape,(0,e.default)(this.inputShape,this.shape)||this.throwError(`input tensor shape ${t.tensor.shape} does not match specified shape ${this.shape}.`),t.glTexture||(t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}):t.tensor.shape.length>2&&(t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}))),this.output=t}}exports.default=h;
},{"lodash/isEqual":60,"../Layer":57,"../Tensor":20}],35:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=t(require("ndarray-ops"));function t(e){return e&&e.__esModule?e:{default:e}}function s(t){if(1===t.tensor.shape.length){const s=e.default.sup(t.tensor);e.default.subseq(t.tensor,s),e.default.expeq(t.tensor);const n=e.default.sum(t.tensor);e.default.divseq(t.tensor,n)}else{if(2!==t.tensor.shape.length)throw new Error(`[activations.softmax] tensor shape ${t.tensor.shape} not supported.`);for(let s=0;s<t.tensor.shape[0];s++){const n=e.default.sup(t.tensor.pick(s,null));e.default.subseq(t.tensor.pick(s,null),n),e.default.expeq(t.tensor.pick(s,null));const o=e.default.sum(t.tensor.pick(s,null));e.default.divseq(t.tensor.pick(s,null),o)}}}
},{"ndarray-ops":18}],365:[function(require,module,exports) {
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):"undefined"!=typeof exports?t(exports):t(e.esprima={})}(this,function(e){"use strict";var t,n,r,a,i,o,c,l,s,u,m,d,p,f,h,y,S,g;function v(e,t){if(!e)throw new Error("ASSERT: "+t)}function k(e){return e>=48&&e<=57}function b(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function E(e){return"01234567".indexOf(e)>=0}function x(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function C(e){return 10===e||13===e||8232===e||8233===e}function w(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&c.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function I(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&c.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function L(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function A(e){return"eval"===e||"arguments"===e}function P(e,t,n,r,a){var i;v("number"==typeof n,"Comment must have valid position"),S.lastCommentStart>=n||(S.lastCommentStart=n,i={type:e,value:t},g.range&&(i.range=[n,r]),g.loc&&(i.loc=a),g.comments.push(i),g.attachComment&&(g.leadingComments.push(i),g.trailingComments.push(i)))}function N(e){var t,n,r,a;for(t=m-e,n={start:{line:d,column:m-p-e}};m<f;)if(r=s.charCodeAt(m),++m,C(r))return g.comments&&(a=s.slice(t+e,m-1),n.end={line:d,column:m-p-1},P("Line",a,t,m-1,n)),13===r&&10===s.charCodeAt(m)&&++m,++d,void(p=m);g.comments&&(a=s.slice(t+e,m),n.end={line:d,column:m-p},P("Line",a,t,m,n))}function O(){var e,t,n,r;for(g.comments&&(e=m-2,t={start:{line:d,column:m-p-2}});m<f;)if(C(n=s.charCodeAt(m)))13===n&&10===s.charCodeAt(m+1)&&++m,++d,p=++m,m>=f&&z({},o.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===s.charCodeAt(m+1))return++m,++m,void(g.comments&&(r=s.slice(e+2,m-2),t.end={line:d,column:m-p},P("Block",r,e,m,t)));++m}else++m;z({},o.UnexpectedToken,"ILLEGAL")}function U(){var e,t;for(t=0===m;m<f;)if(x(e=s.charCodeAt(m)))++m;else if(C(e))++m,13===e&&10===s.charCodeAt(m)&&++m,++d,p=m,t=!0;else if(47===e)if(47===(e=s.charCodeAt(m+1)))++m,++m,N(2),t=!0;else{if(42!==e)break;++m,++m,O()}else if(t&&45===e){if(45!==s.charCodeAt(m+1)||62!==s.charCodeAt(m+2))break;m+=3,N(3)}else{if(60!==e)break;if("!--"!==s.slice(m+1,m+4))break;++m,++m,++m,++m,N(4)}}function R(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t){if(!(m<f&&b(s[m])))return"";r=s[m++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(a)}function F(){var e,t;for(e=s.charCodeAt(m++),t=String.fromCharCode(e),92===e&&(117!==s.charCodeAt(m)&&z({},o.UnexpectedToken,"ILLEGAL"),++m,(e=R("u"))&&"\\"!==e&&w(e.charCodeAt(0))||z({},o.UnexpectedToken,"ILLEGAL"),t=e);m<f&&I(e=s.charCodeAt(m));)++m,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==s.charCodeAt(m)&&z({},o.UnexpectedToken,"ILLEGAL"),++m,(e=R("u"))&&"\\"!==e&&I(e.charCodeAt(0))||z({},o.UnexpectedToken,"ILLEGAL"),t+=e);return t}function T(){var e,n;return e=m,{type:1===(n=92===s.charCodeAt(m)?F():function(){var e,t;for(e=m++;m<f;){if(92===(t=s.charCodeAt(m)))return m=e,F();if(!I(t))break;++m}return s.slice(e,m)}()).length?t.Identifier:function(e){if(u&&L(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(n)?t.Keyword:"null"===n?t.NullLiteral:"true"===n||"false"===n?t.BooleanLiteral:t.Identifier,value:n,lineNumber:d,lineStart:p,start:e,end:m}}function D(){var e,n,r,a,i=m,c=s.charCodeAt(m),l=s[m];switch(c){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++m,g.tokenize&&(40===c?g.openParenToken=g.tokens.length:123===c&&(g.openCurlyToken=g.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(c),lineNumber:d,lineStart:p,start:i,end:m};default:if(61===(e=s.charCodeAt(m+1)))switch(c){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return m+=2,{type:t.Punctuator,value:String.fromCharCode(c)+String.fromCharCode(e),lineNumber:d,lineStart:p,start:i,end:m};case 33:case 61:return m+=2,61===s.charCodeAt(m)&&++m,{type:t.Punctuator,value:s.slice(i,m),lineNumber:d,lineStart:p,start:i,end:m}}}return">>>="===(a=s.substr(m,4))?(m+=4,{type:t.Punctuator,value:a,lineNumber:d,lineStart:p,start:i,end:m}):">>>"===(r=a.substr(0,3))||"<<="===r||">>="===r?(m+=3,{type:t.Punctuator,value:r,lineNumber:d,lineStart:p,start:i,end:m}):l===(n=r.substr(0,2))[1]&&"+-<>&|".indexOf(l)>=0||"=>"===n?(m+=2,{type:t.Punctuator,value:n,lineNumber:d,lineStart:p,start:i,end:m}):"<>=!+-*%&|^/".indexOf(l)>=0?(++m,{type:t.Punctuator,value:l,lineNumber:d,lineStart:p,start:i,end:m}):void z({},o.UnexpectedToken,"ILLEGAL")}function B(){var e,n,r;if(v(k((r=s[m]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),n=m,e="","."!==r){if(e=s[m++],r=s[m],"0"===e){if("x"===r||"X"===r)return++m,function(e){for(var n="";m<f&&b(s[m]);)n+=s[m++];return 0===n.length&&z({},o.UnexpectedToken,"ILLEGAL"),w(s.charCodeAt(m))&&z({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:d,lineStart:p,start:e,end:m}}(n);if(E(r)&&function(){var e,t;for(e=m+1;e<f;++e){if("8"===(t=s[e])||"9"===t)return!1;if(!E(t))return!0}return!0}())return function(e){for(var n="0"+s[m++];m<f&&E(s[m]);)n+=s[m++];return(w(s.charCodeAt(m))||k(s.charCodeAt(m)))&&z({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:d,lineStart:p,start:e,end:m}}(n)}for(;k(s.charCodeAt(m));)e+=s[m++];r=s[m]}if("."===r){for(e+=s[m++];k(s.charCodeAt(m));)e+=s[m++];r=s[m]}if("e"===r||"E"===r)if(e+=s[m++],"+"!==(r=s[m])&&"-"!==r||(e+=s[m++]),k(s.charCodeAt(m)))for(;k(s.charCodeAt(m));)e+=s[m++];else z({},o.UnexpectedToken,"ILLEGAL");return w(s.charCodeAt(m))&&z({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:d,lineStart:p,start:n,end:m}}function W(){var e,n,r,a;return y=null,U(),e=m,n=function(){var e,t,n,r;for(v("/"===(e=s[m]),"Regular expression literal must start with a slash"),t=s[m++],n=!1,r=!1;m<f;)if(t+=e=s[m++],"\\"===e)C((e=s[m++]).charCodeAt(0))&&z({},o.UnterminatedRegExp),t+=e;else if(C(e.charCodeAt(0)))z({},o.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||z({},o.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}(),r=function(){var e,t,n,r;for(t="",n="";m<f&&I((e=s[m]).charCodeAt(0));)if(++m,"\\"===e&&m<f)if("u"===(e=s[m])){if(r=++m,e=R("u"))for(n+=e,t+="\\u";r<m;++r)t+=s[r];else m=r,n+="u",t+="\\u";$({},o.UnexpectedToken,"ILLEGAL")}else t+="\\",$({},o.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}(),a=function(e,t){var n;try{n=new RegExp(e,t)}catch(e){z({},o.InvalidRegExp)}return n}(n.value,r.value),g.tokenize?{type:t.RegularExpression,value:a,lineNumber:d,lineStart:p,start:e,end:m}:{literal:n.literal+r.literal,value:a,start:e,end:m}}function j(){var e,t,n,r;return U(),e=m,t={start:{line:d,column:m-p}},n=W(),t.end={line:d,column:m-p},g.tokenize||(g.tokens.length>0&&(r=g.tokens[g.tokens.length-1]).range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||g.tokens.pop()),g.tokens.push({type:"RegularExpression",value:n.literal,range:[e,m],loc:t})),n}function G(){var e;return U(),m>=f?{type:t.EOF,lineNumber:d,lineStart:p,start:m,end:m}:w(e=s.charCodeAt(m))?T():40===e||41===e||59===e?D():39===e||34===e?function(){var e,n,r,a,i,c,l,u,h="",y=!1;for(l=d,u=p,v("'"===(e=s[m])||'"'===e,"String literal must starts with a quote"),n=m,++m;m<f;){if((r=s[m++])===e){e="";break}if("\\"===r)if((r=s[m++])&&C(r.charCodeAt(0)))++d,"\r"===r&&"\n"===s[m]&&++m,p=m;else switch(r){case"u":case"x":c=m,(i=R(r))?h+=i:(m=c,h+=r);break;case"n":h+="\n";break;case"r":h+="\r";break;case"t":h+="\t";break;case"b":h+="\b";break;case"f":h+="\f";break;case"v":h+="\v";break;default:E(r)?(0!==(a="01234567".indexOf(r))&&(y=!0),m<f&&E(s[m])&&(y=!0,a=8*a+"01234567".indexOf(s[m++]),"0123".indexOf(r)>=0&&m<f&&E(s[m])&&(a=8*a+"01234567".indexOf(s[m++]))),h+=String.fromCharCode(a)):h+=r}else{if(C(r.charCodeAt(0)))break;h+=r}}return""!==e&&z({},o.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:h,octal:y,startLineNumber:l,startLineStart:u,lineNumber:d,lineStart:p,start:n,end:m}}():46===e?k(s.charCodeAt(m+1))?B():D():k(e)?B():g.tokenize&&47===e?function(){var e,t;if(!(e=g.tokens[g.tokens.length-1]))return j();if("Punctuator"===e.type){if("]"===e.value)return D();if(")"===e.value)return!(t=g.tokens[g.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?D():j();if("}"===e.value){if(g.tokens[g.openCurlyToken-3]&&"Keyword"===g.tokens[g.openCurlyToken-3].type){if(!(t=g.tokens[g.openCurlyToken-4]))return D()}else{if(!g.tokens[g.openCurlyToken-4]||"Keyword"!==g.tokens[g.openCurlyToken-4].type)return D();if(!(t=g.tokens[g.openCurlyToken-5]))return j()}return r.indexOf(t.value)>=0?D():j()}return j()}return"Keyword"===e.type&&"this"!==e.value?j():D()}():D()}function K(){var e,r,a;return U(),e={start:{line:d,column:m-p}},r=G(),e.end={line:d,column:m-p},r.type!==t.EOF&&(a=s.slice(r.start,r.end),g.tokens.push({type:n[r.type],value:a,range:[r.start,r.end],loc:e})),r}function V(){var e;return m=(e=y).end,d=e.lineNumber,p=e.lineStart,y=void 0!==g.tokens?K():G(),m=e.end,d=e.lineNumber,p=e.lineStart,e}function M(){var e,t,n;e=m,t=d,n=p,y=void 0!==g.tokens?K():G(),m=e,d=t,p=n}function H(e,t){this.line=e,this.column=t}function q(){var e,t,n,r;return e=m,t=d,n=p,U(),r=d!==t,m=e,d=t,p=n,r}function z(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,function(e,t){return v(t<r.length,"Message reference must be in range"),r[t]});throw"number"==typeof e.lineNumber?((n=new Error("Line "+e.lineNumber+": "+a)).index=e.start,n.lineNumber=e.lineNumber,n.column=e.start-p+1):((n=new Error("Line "+d+": "+a)).index=m,n.lineNumber=d,n.column=m-p+1),n.description=a,n}function $(){try{z.apply(null,arguments)}catch(e){if(!g.errors)throw e;g.errors.push(e)}}function X(e){if(e.type===t.EOF&&z(e,o.UnexpectedEOS),e.type===t.NumericLiteral&&z(e,o.UnexpectedNumber),e.type===t.StringLiteral&&z(e,o.UnexpectedString),e.type===t.Identifier&&z(e,o.UnexpectedIdentifier),e.type===t.Keyword){if(function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(e.value))z(e,o.UnexpectedReserved);else if(u&&L(e.value))return void $(e,o.StrictReservedWord);z(e,o.UnexpectedToken,e.value)}z(e,o.UnexpectedToken,e.value)}function J(e){var n=V();n.type===t.Punctuator&&n.value===e||X(n)}function Q(e){var n=V();n.type===t.Keyword&&n.value===e||X(n)}function Y(e){return y.type===t.Punctuator&&y.value===e}function Z(e){return y.type===t.Keyword&&y.value===e}function _(){var e,n=m,r=d,a=p,i=y;if(59===s.charCodeAt(m)||Y(";"))V();else{if(e=d,U(),d!==e)return m=n,d=r,p=a,void(y=i);y.type===t.EOF||Y("}")||X(y)}}function ee(e){return e.type===a.Identifier||e.type===a.MemberExpression}function te(e,t){var n,r,a;return n=u,a=y,r=Ce(),t&&u&&A(e[0].name)&&$(t,o.StrictParamName),u=n,h.markEnd(h.createFunctionExpression(null,e,[],r),a)}function ne(){var e,n;return n=y,(e=V()).type===t.StringLiteral||e.type===t.NumericLiteral?(u&&e.octal&&$(e,o.StrictOctalLiteral),h.markEnd(h.createLiteral(e),n)):h.markEnd(h.createIdentifier(e.value),n)}function re(){var e,n,r,a,i,c;return c=y,(e=y).type===t.Identifier?(r=ne(),"get"!==e.value||Y(":")?"set"!==e.value||Y(":")?(J(":"),a=fe(),h.markEnd(h.createProperty("init",r,a),c)):(n=ne(),J("("),(e=y).type!==t.Identifier?(J(")"),$(e,o.UnexpectedToken,e.value),a=te([])):(i=[Se()],J(")"),a=te(i,e)),h.markEnd(h.createProperty("set",n,a),c)):(n=ne(),J("("),J(")"),a=te([]),h.markEnd(h.createProperty("get",n,a),c))):e.type!==t.EOF&&e.type!==t.Punctuator?(n=ne(),J(":"),a=fe(),h.markEnd(h.createProperty("init",n,a),c)):void X(e)}function ae(){var e,n,r,c;if(Y("("))return function(){var e;return J("("),e=he(),J(")"),e}();if(Y("["))return function(){var e,t=[];for(e=y,J("[");!Y("]");)Y(",")?(V(),t.push(null)):(t.push(fe()),Y("]")||J(","));return V(),h.markEnd(h.createArrayExpression(t),e)}();if(Y("{"))return function(){var e,t,n,r,c,l=[],s={},m=String;for(c=y,J("{");!Y("}");)t=(e=re()).key.type===a.Identifier?e.key.name:m(e.key.value),r="init"===e.kind?i.Data:"get"===e.kind?i.Get:i.Set,n="$"+t,Object.prototype.hasOwnProperty.call(s,n)?(s[n]===i.Data?u&&r===i.Data?$({},o.StrictDuplicateProperty):r!==i.Data&&$({},o.AccessorDataProperty):r===i.Data?$({},o.AccessorDataProperty):s[n]&r&&$({},o.AccessorGetSet),s[n]|=r):s[n]=r,l.push(e),Y("}")||J(",");return J("}"),h.markEnd(h.createObjectExpression(l),c)}();if(e=y.type,c=y,e===t.Identifier)r=h.createIdentifier(V().value);else if(e===t.StringLiteral||e===t.NumericLiteral)u&&y.octal&&$(y,o.StrictOctalLiteral),r=h.createLiteral(V());else if(e===t.Keyword){if(Z("function"))return function(){var e,t,n,r,a,i,c,l,s=null,m=[];l=y,Q("function"),Y("(")||(e=y,s=Se(),u?A(e.value)&&$(e,o.StrictFunctionName):A(e.value)?(n=e,r=o.StrictFunctionName):L(e.value)&&(n=e,r=o.StrictReservedWord));a=we(n),m=a.params,t=a.stricted,n=a.firstRestricted,a.message&&(r=a.message);c=u,i=Ce(),u&&n&&z(n,r);u&&t&&$(t,r);return u=c,h.markEnd(h.createFunctionExpression(s,m,[],i),l)}();Z("this")?(V(),r=h.createThisExpression()):X(V())}else e===t.BooleanLiteral?((n=V()).value="true"===n.value,r=h.createLiteral(n)):e===t.NullLiteral?((n=V()).value=null,r=h.createLiteral(n)):Y("/")||Y("/=")?(r=void 0!==g.tokens?h.createLiteral(j()):h.createLiteral(W()),M()):X(V());return h.markEnd(r,c)}function ie(){var e=[];if(J("("),!Y(")"))for(;m<f&&(e.push(fe()),!Y(")"));)J(",");return J(")"),e}function oe(){var e,n;return n=y,function(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}(e=V())||X(e),h.markEnd(h.createIdentifier(e.value),n)}function ce(){return J("."),oe()}function le(){var e;return J("["),e=he(),J("]"),e}function se(){var e,t,n;return n=y,Q("new"),e=function(){var e,t,n;v(S.allowIn,"callee of new expression always allow in keyword."),n=y,e=Z("new")?se():ae();for(;Y(".")||Y("[");)Y("[")?(t=le(),e=h.createMemberExpression("[",e,t)):(t=ce(),e=h.createMemberExpression(".",e,t)),h.markEnd(e,n);return e}(),t=Y("(")?ie():[],h.markEnd(h.createNewExpression(e,t),n)}function ue(){var e,n,r=y;return e=function(){var e,t,n,r,a=S.allowIn;for(r=y,S.allowIn=!0,e=Z("new")?se():ae();;){if(Y("."))n=ce(),e=h.createMemberExpression(".",e,n);else if(Y("("))t=ie(),e=h.createCallExpression(e,t);else{if(!Y("["))break;n=le(),e=h.createMemberExpression("[",e,n)}h.markEnd(e,r)}return S.allowIn=a,e}(),y.type===t.Punctuator&&(!Y("++")&&!Y("--")||q()||(u&&e.type===a.Identifier&&A(e.name)&&$({},o.StrictLHSPostfix),ee(e)||$({},o.InvalidLHSInAssignment),n=V(),e=h.markEnd(h.createPostfixExpression(n.value,e),r))),e}function me(){var e,n,r;return y.type!==t.Punctuator&&y.type!==t.Keyword?n=ue():Y("++")||Y("--")?(r=y,e=V(),n=me(),u&&n.type===a.Identifier&&A(n.name)&&$({},o.StrictLHSPrefix),ee(n)||$({},o.InvalidLHSInAssignment),n=h.createUnaryExpression(e.value,n),n=h.markEnd(n,r)):Y("+")||Y("-")||Y("~")||Y("!")?(r=y,e=V(),n=me(),n=h.createUnaryExpression(e.value,n),n=h.markEnd(n,r)):Z("delete")||Z("void")||Z("typeof")?(r=y,e=V(),n=me(),n=h.createUnaryExpression(e.value,n),n=h.markEnd(n,r),u&&"delete"===n.operator&&n.argument.type===a.Identifier&&$({},o.StrictDelete)):n=ue(),n}function de(e,n){var r=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function pe(){var e,t,n,r,a;return a=y,e=function(){var e,t,n,r,a,i,o,c,l,s;if(e=y,l=me(),0===(a=de(r=y,S.allowIn)))return l;for(r.prec=a,V(),t=[e,y],i=[l,r,o=me()];(a=de(y,S.allowIn))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),c=i.pop().value,l=i.pop(),n=h.createBinaryExpression(c,l,o),t.pop(),e=t[t.length-1],h.markEnd(n,e),i.push(n);(r=V()).prec=a,i.push(r),t.push(y),n=me(),i.push(n)}for(n=i[s=i.length-1],t.pop();s>1;)n=h.createBinaryExpression(i[s-1].value,i[s-2],n),s-=2,e=t.pop(),h.markEnd(n,e);return n}(),Y("?")&&(V(),t=S.allowIn,S.allowIn=!0,n=fe(),S.allowIn=t,J(":"),r=fe(),e=h.createConditionalExpression(e,n,r),h.markEnd(e,a)),e}function fe(){var e,n,r,i,c,l;return e=y,c=y,i=n=pe(),y.type!==t.Punctuator||"="!==(l=y.value)&&"*="!==l&&"/="!==l&&"%="!==l&&"+="!==l&&"-="!==l&&"<<="!==l&&">>="!==l&&">>>="!==l&&"&="!==l&&"^="!==l&&"|="!==l||(ee(n)||$({},o.InvalidLHSInAssignment),u&&n.type===a.Identifier&&A(n.name)&&$(e,o.StrictLHSAssignment),e=V(),r=fe(),i=h.markEnd(h.createAssignmentExpression(e.value,n,r),c)),i}function he(){var e,t=y;if(e=fe(),Y(",")){for(e=h.createSequenceExpression([e]);m<f&&Y(",");)V(),e.expressions.push(fe());h.markEnd(e,t)}return e}function ye(){var e,t;return t=y,J("{"),e=function(){for(var e,t=[];m<f&&!Y("}")&&void 0!==(e=Le());)t.push(e);return t}(),J("}"),h.markEnd(h.createBlockStatement(e),t)}function Se(){var e,n;return n=y,(e=V()).type!==t.Identifier&&X(e),h.markEnd(h.createIdentifier(e.value),n)}function ge(e){var t,n,r=null;return n=y,t=Se(),u&&A(t.name)&&$({},o.StrictVarName),"const"===e?(J("="),r=fe()):Y("=")&&(V(),r=fe()),h.markEnd(h.createVariableDeclarator(t,r),n)}function ve(e){var t=[];do{if(t.push(ge(e)),!Y(","))break;V()}while(m<f);return t}function ke(){var e,t,n,r,a,i,c,l,s,u,m=S.allowIn;return e=t=n=null,Q("for"),J("("),Y(";")?V():(Z("var")||Z("let")?(S.allowIn=!1,u=y,l=V(),s=ve(),e=h.markEnd(h.createVariableDeclaration(s,l.value),u),S.allowIn=m,1===e.declarations.length&&Z("in")&&(V(),r=e,a=he(),e=null)):(S.allowIn=!1,e=he(),S.allowIn=m,Z("in")&&(ee(e)||$({},o.InvalidLHSInForIn),V(),r=e,a=he(),e=null)),void 0===r&&J(";")),void 0===r&&(Y(";")||(t=he()),J(";"),Y(")")||(n=he())),J(")"),c=S.inIteration,S.inIteration=!0,i=xe(),S.inIteration=c,void 0===r?h.createForStatement(e,t,n,i):h.createForInStatement(r,a,i)}function be(){var e,t,n,r=[];for(n=y,Z("default")?(V(),e=null):(Q("case"),e=he()),J(":");m<f&&!(Y("}")||Z("default")||Z("case"));)t=xe(),r.push(t);return h.markEnd(h.createSwitchCase(e,r),n)}function Ee(){var e,t,n,r,a=[],i=null;return Q("try"),e=ye(),Z("catch")&&a.push((r=y,Q("catch"),J("("),Y(")")&&X(y),t=Se(),u&&A(t.name)&&$({},o.StrictCatchVariable),J(")"),n=ye(),h.markEnd(h.createCatchClause(t,n),r))),Z("finally")&&(V(),i=ye()),0!==a.length||i||z({},o.NoCatchOrFinally),h.createTryStatement(e,[],a,i)}function xe(){var e,n,r,i,c,l,d,p,g,v=y.type;if(v===t.EOF&&X(y),v===t.Punctuator&&"{"===y.value)return ye();if(i=y,v===t.Punctuator)switch(y.value){case";":return h.markEnd((J(";"),h.createEmptyStatement()),i);case"(":return h.markEnd(function(){var e=he();return _(),h.createExpressionStatement(e)}(),i)}if(v===t.Keyword)switch(y.value){case"break":return h.markEnd(function(){var e,n=null;return Q("break"),59===s.charCodeAt(m)?(V(),S.inIteration||S.inSwitch||z({},o.IllegalBreak),h.createBreakStatement(null)):q()?(S.inIteration||S.inSwitch||z({},o.IllegalBreak),h.createBreakStatement(null)):(y.type===t.Identifier&&(e="$"+(n=Se()).name,Object.prototype.hasOwnProperty.call(S.labelSet,e)||z({},o.UnknownLabel,n.name)),_(),null!==n||S.inIteration||S.inSwitch||z({},o.IllegalBreak),h.createBreakStatement(n))}(),i);case"continue":return h.markEnd(function(){var e,n=null;return Q("continue"),59===s.charCodeAt(m)?(V(),S.inIteration||z({},o.IllegalContinue),h.createContinueStatement(null)):q()?(S.inIteration||z({},o.IllegalContinue),h.createContinueStatement(null)):(y.type===t.Identifier&&(e="$"+(n=Se()).name,Object.prototype.hasOwnProperty.call(S.labelSet,e)||z({},o.UnknownLabel,n.name)),_(),null!==n||S.inIteration||z({},o.IllegalContinue),h.createContinueStatement(n))}(),i);case"debugger":return h.markEnd((Q("debugger"),_(),h.createDebuggerStatement()),i);case"do":return h.markEnd((Q("do"),g=S.inIteration,S.inIteration=!0,d=xe(),S.inIteration=g,Q("while"),J("("),p=he(),J(")"),Y(";")&&V(),h.createDoWhileStatement(d,p)),i);case"for":return h.markEnd(ke(),i);case"function":return h.markEnd(Ie(),i);case"if":return h.markEnd(function(){var e,t,n;return Q("if"),J("("),e=he(),J(")"),t=xe(),Z("else")?(V(),n=xe()):n=null,h.createIfStatement(e,t,n)}(),i);case"return":return h.markEnd((l=null,Q("return"),S.inFunctionBody||$({},o.IllegalReturn),32===s.charCodeAt(m)&&w(s.charCodeAt(m+1))?(l=he(),_(),h.createReturnStatement(l)):q()?h.createReturnStatement(null):(Y(";")||Y("}")||y.type===t.EOF||(l=he()),_(),h.createReturnStatement(l))),i);case"switch":return h.markEnd(function(){var e,t,n,r,a;if(Q("switch"),J("("),e=he(),J(")"),J("{"),t=[],Y("}"))return V(),h.createSwitchStatement(e,t);for(r=S.inSwitch,S.inSwitch=!0,a=!1;m<f&&!Y("}");)null===(n=be()).test&&(a&&z({},o.MultipleDefaultsInSwitch),a=!0),t.push(n);return S.inSwitch=r,J("}"),h.createSwitchStatement(e,t)}(),i);case"throw":return h.markEnd(function(){var e;return Q("throw"),q()&&z({},o.NewlineAfterThrow),e=he(),_(),h.createThrowStatement(e)}(),i);case"try":return h.markEnd(Ee(),i);case"var":return h.markEnd((Q("var"),c=ve(),_(),h.createVariableDeclaration(c,"var")),i);case"while":return h.markEnd(function(){var e,t,n;return Q("while"),J("("),e=he(),J(")"),n=S.inIteration,S.inIteration=!0,t=xe(),S.inIteration=n,h.createWhileStatement(e,t)}(),i);case"with":return h.markEnd(function(){var e,t;return u&&(U(),$({},o.StrictModeWith)),Q("with"),J("("),e=he(),J(")"),t=xe(),h.createWithStatement(e,t)}(),i)}return(e=he()).type===a.Identifier&&Y(":")?(V(),r="$"+e.name,Object.prototype.hasOwnProperty.call(S.labelSet,r)&&z({},o.Redeclaration,"Label",e.name),S.labelSet[r]=!0,n=xe(),delete S.labelSet[r],h.markEnd(h.createLabeledStatement(e,n),i)):(_(),h.markEnd(h.createExpressionStatement(e),i))}function Ce(){var e,n,r,i,c,l,d,p,g=[];for(p=y,J("{");m<f&&y.type===t.StringLiteral&&(n=y,e=Le(),g.push(e),e.expression.type===a.Literal);)"use strict"===s.slice(n.start+1,n.end-1)?(u=!0,r&&$(r,o.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(i=S.labelSet,c=S.inIteration,l=S.inSwitch,d=S.inFunctionBody,S.labelSet={},S.inIteration=!1,S.inSwitch=!1,S.inFunctionBody=!0;m<f&&!Y("}")&&void 0!==(e=Le());)g.push(e);return J("}"),S.labelSet=i,S.inIteration=c,S.inSwitch=l,S.inFunctionBody=d,h.markEnd(h.createBlockStatement(g),p)}function we(e){var t,n,r,a,i,c,l=[];if(J("("),!Y(")"))for(a={};m<f&&(n=y,t=Se(),i="$"+n.value,u?(A(n.value)&&(r=n,c=o.StrictParamName),Object.prototype.hasOwnProperty.call(a,i)&&(r=n,c=o.StrictParamDupe)):e||(A(n.value)?(e=n,c=o.StrictParamName):L(n.value)?(e=n,c=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(a,i)&&(e=n,c=o.StrictParamDupe)),l.push(t),a[i]=!0,!Y(")"));)J(",");return J(")"),{params:l,stricted:r,firstRestricted:e,message:c}}function Ie(){var e,t,n,r,a,i,c,l,s,m;return m=y,Q("function"),r=y,e=Se(),u?A(r.value)&&$(r,o.StrictFunctionName):A(r.value)?(c=r,l=o.StrictFunctionName):L(r.value)&&(c=r,l=o.StrictReservedWord),t=(i=we(c)).params,a=i.stricted,c=i.firstRestricted,i.message&&(l=i.message),s=u,n=Ce(),u&&c&&z(c,l),u&&a&&$(a,l),u=s,h.markEnd(h.createFunctionDeclaration(e,t,[],n),m)}function Le(){if(y.type===t.Keyword)switch(y.value){case"const":case"let":return e=y.value,r=y,Q(e),n=ve(e),_(),h.markEnd(h.createVariableDeclaration(n,e),r);case"function":return Ie();default:return xe()}var e,n,r;if(y.type!==t.EOF)return xe()}function Ae(){var e,n;return U(),M(),n=y,u=!1,e=function(){for(var e,n,r,i=[];m<f&&(n=y).type===t.StringLiteral&&(e=Le(),i.push(e),e.expression.type===a.Literal);)"use strict"===s.slice(n.start+1,n.end-1)?(u=!0,r&&$(r,o.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(;m<f&&void 0!==(e=Le());)i.push(e);return i}(),h.markEnd(h.createProgram(e),n)}function Pe(){var e,t,n,r=[];for(e=0;e<g.tokens.length;++e)n={type:(t=g.tokens[e]).type,value:t.value},g.range&&(n.range=t.range),g.loc&&(n.loc=t.loc),r.push(n);g.tokens=r}(n={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",n[t.EOF]="<end>",n[t.Identifier]="Identifier",n[t.Keyword]="Keyword",n[t.NullLiteral]="Null",n[t.NumericLiteral]="Numeric",n[t.Punctuator]="Punctuator",n[t.StringLiteral]="String",n[t.RegularExpression]="RegularExpression",r=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},i={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},c={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},l={name:"SyntaxTree",processComment:function(e){var t,n;if(!(e.type===a.Program&&e.body.length>0)){for(g.trailingComments.length>0?g.trailingComments[0].range[0]>=e.range[1]?(n=g.trailingComments,g.trailingComments=[]):g.trailingComments.length=0:g.bottomRightStack.length>0&&g.bottomRightStack[g.bottomRightStack.length-1].trailingComments&&g.bottomRightStack[g.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(n=g.bottomRightStack[g.bottomRightStack.length-1].trailingComments,delete g.bottomRightStack[g.bottomRightStack.length-1].trailingComments);g.bottomRightStack.length>0&&g.bottomRightStack[g.bottomRightStack.length-1].range[0]>=e.range[0];)t=g.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):g.leadingComments.length>0&&g.leadingComments[g.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=g.leadingComments,g.leadingComments=[]),n&&(e.trailingComments=n),g.bottomRightStack.push(e)}},markEnd:function(e,t){return g.range&&(e.range=[t.start,m]),g.loc&&(e.loc=new function(e,t,n,r){this.start=new H(e,t),this.end=new H(n,r)}(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),d,m-p),this.postProcess(e)),g.attachComment&&this.processComment(e),e},postProcess:function(e){return g.source&&(e.loc.source=g.source),e},createArrayExpression:function(e){return{type:a.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:a.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){return{type:"||"===e||"&&"===e?a.LogicalExpression:a.BinaryExpression,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:a.BlockStatement,body:e}},createBreakStatement:function(e){return{type:a.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:a.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:a.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:a.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:a.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:a.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(e){return{type:a.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,r){return{type:a.ForStatement,init:e,test:t,update:n,body:r}},createForInStatement:function(e,t,n){return{type:a.ForInStatement,left:e,right:t,body:n,each:!1}},createFunctionDeclaration:function(e,t,n,r){return{type:a.FunctionDeclaration,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,n,r){return{type:a.FunctionExpression,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:a.Identifier,name:e}},createIfStatement:function(e,t,n){return{type:a.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:a.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:a.Literal,value:e.value,raw:s.slice(e.start,e.end)}},createMemberExpression:function(e,t,n){return{type:a.MemberExpression,computed:"["===e,object:t,property:n}},createNewExpression:function(e,t){return{type:a.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:a.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:a.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:a.Program,body:e}},createProperty:function(e,t,n){return{type:a.Property,key:t,value:n,kind:e}},createReturnStatement:function(e){return{type:a.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:a.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:a.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:a.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(e){return{type:a.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,r){return{type:a.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:r}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:a.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:a.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:a.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:a.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:a.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:a.WithStatement,object:e,body:t}}},e.version="1.2.5",e.tokenize=function(e,n){var r,a;r=String,"string"==typeof e||e instanceof String||(e=r(e)),h=l,m=0,d=(s=e).length>0?1:0,p=0,f=s.length,y=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},g={},(n=n||{}).tokens=!0,g.tokens=[],g.tokenize=!0,g.openParenToken=-1,g.openCurlyToken=-1,g.range="boolean"==typeof n.range&&n.range,g.loc="boolean"==typeof n.loc&&n.loc,"boolean"==typeof n.comment&&n.comment&&(g.comments=[]),"boolean"==typeof n.tolerant&&n.tolerant&&(g.errors=[]);try{if(M(),y.type===t.EOF)return g.tokens;for(V();y.type!==t.EOF;)try{V()}catch(e){if(g.errors){g.errors.push(e);break}throw e}Pe(),a=g.tokens,void 0!==g.comments&&(a.comments=g.comments),void 0!==g.errors&&(a.errors=g.errors)}catch(e){throw e}finally{g={}}return a},e.parse=function(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),h=l,m=0,d=(s=e).length>0?1:0,p=0,f=s.length,y=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},g={},void 0!==t&&(g.range="boolean"==typeof t.range&&t.range,g.loc="boolean"==typeof t.loc&&t.loc,g.attachComment="boolean"==typeof t.attachComment&&t.attachComment,g.loc&&null!==t.source&&void 0!==t.source&&(g.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(g.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(g.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(g.errors=[]),g.attachComment&&(g.range=!0,g.comments=[],g.bottomRightStack=[],g.trailingComments=[],g.leadingComments=[]));try{n=Ae(),void 0!==g.comments&&(n.comments=g.comments),void 0!==g.tokens&&(Pe(),n.tokens=g.tokens),void 0!==g.errors&&(n.errors=g.errors)}catch(e){throw e}finally{g={}}return n},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),a)a.hasOwnProperty(e)&&(t[e]=a[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()});
},{}],131:[function(require,module,exports) {
var global = (1,eval)("this");
var e=(0,eval)("this"),r=require("esprima"),n=require("uniq"),t=0;function i(e,r,n){this.name=e,this.lvalue=r,this.rvalue=n,this.count=0}function a(e,r,n,t){this.body=e,this.args=r,this.thisVars=n,this.localVars=t}function o(r){if("eval"===r)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?r in window:void 0!==e?r in e:"undefined"!=typeof self&&r in self}function s(e){for(var r=e.body[0].expression.callee.params,n=new Array(r.length),t=0;t<r.length;++t)n[t]=r[t].name;return n}function p(e){for(var p=["(",e,")()"].join(""),l=r.parse(p,{range:!0}),f="_inline_"+t+++"_",u=s(l),c=new Array(u.length),h=0;h<u.length;++h)c[h]=new i([f,"arg",h,"_"].join(""),!1,!1);for(var y=new Array(p.length),v=(h=0,p.length);h<v;++h)y[h]=p.charAt(h);var d=[],g=[];function w(e,r){for(var n=e.range[0],t=e.range[1],i=n+1;i<t;++i)y[i]="";y[n]=r}var m,_=1,b=2;return function e(r,n){if(r.parent=n,"MemberExpression"===r.type)r.computed?(e(r.object,r),e(r.property,r)):"ThisExpression"===r.object.type?w(r,(m=r.property.name,x="this_"+m.replace(/\_/g,"__"),g.push(x),x)):e(r.object,r);else{if("ThisExpression"===r.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===r.type){var t=r.name,i=u.indexOf(t);if(i>=0){var a=c[i],s=function(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?_:_|b:"UpdateExpression"===e.parent.type?_|b:b}(r);s&_&&(a.lvalue=!0),s&b&&(a.rvalue=!0),++a.count,w(r,a.name)}else o(t)||w(r,function(e){var r=f+e.replace(/\_/g,"__");return d.push(r),r}(t))}else if("Literal"===r.type)"string"==typeof r.value&&w(r,"'"+r.value.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'");else{if("WithStatement"===r.type)throw new Error("cwise-parser: with() statements not allowed");for(var p=Object.keys(r),l=0,h=p.length;l<h;++l)if("parent"!==p[l]){var y=r[p[l]];if(y)if(y instanceof Array)for(var v=0;v<y.length;++v)y[v]&&"string"==typeof y[v].type&&e(y[v],r);else"string"==typeof y.type&&e(y,r)}}}var m,x}(l.body[0].expression.callee.body,void 0),n(d),n(g),new a((m=l.body[0].expression.callee.body,y.slice(m.range[0],m.range[1]).join("")),c,g,d)}module.exports=p;
},{"esprima":365,"uniq":336}],61:[function(require,module,exports) {
"use strict";var e=require("cwise-parser"),r=require("cwise-compiler"),o=["args","body"],n=["pre","post","printCode","funcName","blockSize"];function i(i){for(var s in i)o.indexOf(s)<0&&n.indexOf(s)<0&&console.warn("cwise: Unknown argument '"+s+"' passed to expression compiler");for(var c=0;c<o.length;++c)if(!i[o[c]])throw new Error("cwise: Missing argument: "+o[c]);return r({args:i.args,pre:e(i.pre||function(){}),body:e(i.body),post:e(i.post||function(){}),debug:!!i.printCode,funcName:i.funcName||i.body.name||"cwise",blockSize:i.blockSize||64})}module.exports=i;
},{"cwise-parser":131,"cwise-compiler":26}],36:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("cwise"));function t(e){return e&&e.__esModule?e:{default:e}}const a=(0,e.default)({args:["array","scalar"],body:function(e,t){e=Math.max(e,0)+t*(Math.exp(Math.min(e,0))-1)}});function r(e,t={}){const{alpha:r=1}=t;a(e.tensor,r)}
},{"cwise":61}],37:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=t(require("cwise"));function t(e){return e&&e.__esModule?e:{default:e}}const r=(0,e.default)({args:["array","scalar"],body:function(e){e=1.0507009873554805*(Math.max(e,0)+1.6732632423543772*(Math.exp(Math.min(e,0))-1))}});function a(e){r(e.tensor)}
},{"cwise":61}],38:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=t(require("cwise"));function t(e){return e&&e.__esModule?e:{default:e}}const r=(0,e.default)({args:["array"],body:function(e){e=Math.log(Math.exp(e)+1)}});function o(e){r(e.tensor)}
},{"cwise":61}],39:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("cwise"));function t(e){return e&&e.__esModule?e:{default:e}}const r=(0,e.default)({args:["array"],body:function(e){e/=1+Math.abs(e)}});function u(e){r(e.tensor)}
},{"cwise":61}],40:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=r(require("ndarray-ops")),t=r(require("../Tensor"));function r(e){return e&&e.__esModule?e:{default:e}}function s(r,s={}){const{alpha:n=0,maxValue:u=null}=s;let a;0!==n&&(a=new t.default([],r.tensor.shape),e.default.mins(a.tensor,r.tensor,0),e.default.mulseq(a.tensor,n)),e.default.maxseq(r.tensor,0),u&&e.default.minseq(r.tensor,u),a&&e.default.addeq(r.tensor,a.tensor)}
},{"ndarray-ops":18,"../Tensor":20}],41:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("cwise"));function t(e){return e&&e.__esModule?e:{default:e}}const r=(0,e.default)({args:["array"],body:function(e){e=Math.tanh(e)}});function u(e){r(e.tensor)}
},{"cwise":61}],42:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("cwise"));function t(e){return e&&e.__esModule?e:{default:e}}const r=(0,e.default)({args:["array"],body:function(e){e=1/(1+Math.exp(-e))}});function u(e){r(e.tensor)}
},{"cwise":61}],43:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("cwise"));function t(e){return e&&e.__esModule?e:{default:e}}const r=(0,e.default)({args:["array"],body:function(e){(e=.2*e+.5)<=0?e=0:e>=1&&(e=1)}});function u(e){r(e.tensor)}
},{"cwise":61}],44:[function(require,module,exports) {
"use strict";function e(e){return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],23:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"softmax",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"elu",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"selu",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"softplus",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"softsign",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"relu",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"tanh",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"sigmoid",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"hard_sigmoid",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"linear",{enumerable:!0,get:function(){return a.default}});var e=s(require("./softmax")),r=s(require("./elu")),t=s(require("./selu")),u=s(require("./softplus")),n=s(require("./softsign")),i=s(require("./relu")),o=s(require("./tanh")),f=s(require("./sigmoid")),l=s(require("./hard_sigmoid")),a=s(require("./linear"));function s(e){return e&&e.__esModule?e:{default:e}}
},{"./softmax":35,"./elu":36,"./selu":37,"./softplus":38,"./softsign":39,"./relu":40,"./tanh":41,"./sigmoid":42,"./hard_sigmoid":43,"./linear":44}],63:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../../Layer")),t=a(require("../../Tensor")),s=require("../../WebGL2"),u=require("../../activations");function a(e){return e&&e.__esModule?e:{default:e}}const r="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform float alpha;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = max(v, 0.0) + alpha * min(v, 0.0);\n}\n";class i extends e.default{constructor(e={}){super(e),this.layerClass="LeakyReLU";const{alpha:t=.3}=e;this.description=`alpha: ${t}`,this.alpha=t,this.gpu&&(this.program=s.webgl2.compileProgram(r))}call(e){return this.gpu?this._callGPU(e):this._callCPU(e),this.output}_callCPU(e){this.output=e,(0,u.relu)(this.output,{alpha:this.alpha})}_callGPU(e){e.glTexture||e.glTextureFragments||e.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output||(this.output=new t.default([],e.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),e.is1D?this.output.is1D=e.is1D:(e.is2DReshaped||e.is2DSquareReshaped)&&(e.is2DReshaped?this.output.is2DReshaped=e.is2DReshaped:e.is2DSquareReshaped&&(this.output.is2DSquareReshaped=e.is2DSquareReshaped),this.output.originalShape=e.originalShape,this.output.indicesForReshaped=e.indicesForReshaped)),s.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:e,name:"x"}],uniforms:[{value:this.alpha,type:"float",name:"alpha"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=i;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"../../activations":23}],64:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../../Layer")),t=r(require("../../Tensor")),s=require("../../WebGL2"),u=r(require("cwise"));function r(e){return e&&e.__esModule?e:{default:e}}const a="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform sampler2D alpha;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  vec4 a = texture(alpha, vec2(outTex.x, outTex.y));\n  outColor = max(v, 0.0) + a * min(v, 0.0);\n}\n";class i extends e.default{constructor(e={}){super(e),Object.defineProperty(this,"_compute",{configurable:!0,enumerable:!0,writable:!0,value:(0,u.default)({args:["array","array"],body:function(e,t){e=Math.max(e,0)+t*Math.min(e,0)}})}),this.layerClass="PReLU",this.params=["alpha"],this.gpu&&(this.program=s.webgl2.compileProgram(a))}call(e){return this.gpu?this._callGPU(e):this._callCPU(e),this.output}_callCPU(e){this.output=e,this._compute(this.output.tensor,this.weights.alpha.tensor)}_callGPU(e){e.glTexture||e.glTextureFragments||e.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output||(this.output=new t.default([],e.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),e.is1D?this.output.is1D=e.is1D:(e.is2DReshaped||e.is2DSquareReshaped)&&(e.is2DReshaped?this.output.is2DReshaped=e.is2DReshaped:e.is2DSquareReshaped&&(this.output.is2DSquareReshaped=e.is2DSquareReshaped),this.output.originalShape=e.originalShape,this.output.indicesForReshaped=e.indicesForReshaped)),s.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:e,name:"x"},{input:this.weights.alpha,name:"alpha"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=i;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"cwise":61}],65:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../../Layer")),t=u(require("../../Tensor")),s=require("../../WebGL2"),a=u(require("cwise"));function u(e){return e&&e.__esModule?e:{default:e}}const r="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform float alpha;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = max(v, 0.0) + alpha * (exp(min(v, 0.0)) - 1.0);\n}\n";class i extends e.default{constructor(e={}){super(e),o.call(this),this.layerClass="ELU";const{alpha:t=1}=e;this.description=`alpha: ${t}`,this.alpha=t,this.gpu&&(this.program=s.webgl2.compileProgram(r))}call(e){return this.gpu?this._callGPU(e):this._callCPU(e),this.output}_callCPU(e){this.output=e,this._compute(this.output.tensor,this.alpha)}_callGPU(e){e.glTexture||e.glTextureFragments||e.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output||(this.output=new t.default([],e.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),e.is1D?this.output.is1D=e.is1D:(e.is2DReshaped||e.is2DSquareReshaped)&&(e.is2DReshaped?this.output.is2DReshaped=e.is2DReshaped:e.is2DSquareReshaped&&(this.output.is2DSquareReshaped=e.is2DSquareReshaped),this.output.originalShape=e.originalShape,this.output.indicesForReshaped=e.indicesForReshaped)),s.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:e,name:"x"}],uniforms:[{value:this.alpha,type:"float",name:"alpha"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=i;var o=function(){Object.defineProperty(this,"_compute",{configurable:!0,enumerable:!0,writable:!0,value:(0,a.default)({args:["array","scalar"],body:function(e,t){e=Math.max(e,0)+t*(Math.exp(Math.min(e,0))-1)}})})};
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"cwise":61}],66:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../../Layer")),e=r(require("../../Tensor")),s=require("../../WebGL2"),u=r(require("cwise"));function r(t){return t&&t.__esModule?t:{default:t}}const a="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform float theta;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = v * float(greaterThan(v, vec4(theta)));\n}\n";class o extends t.default{constructor(t={}){super(t),i.call(this),this.layerClass="ThresholdedReLU";const{theta:e=1}=t;this.description=`theta: ${e}`,this.theta=e,this.gpu&&(this.program=s.webgl2.compileProgram(a))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){this.output=t,this._compute(this.output.tensor,this.theta)}_callGPU(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output||(this.output=new e.default([],t.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),t.is1D?this.output.is1D=t.is1D:(t.is2DReshaped||t.is2DSquareReshaped)&&(t.is2DReshaped?this.output.is2DReshaped=t.is2DReshaped:t.is2DSquareReshaped&&(this.output.is2DSquareReshaped=t.is2DSquareReshaped),this.output.originalShape=t.originalShape,this.output.indicesForReshaped=t.indicesForReshaped)),s.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.theta,type:"float",name:"theta"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=o;var i=function(){Object.defineProperty(this,"_compute",{configurable:!0,enumerable:!0,writable:!0,value:(0,u.default)({args:["array","scalar"],body:function(t,e){t*=Number(t>e)}})})};
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"cwise":61}],46:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"LeakyReLU",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"PReLU",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"ELU",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"ThresholdedReLU",{enumerable:!0,get:function(){return u.default}});var e=n(require("./LeakyReLU")),r=n(require("./PReLU")),t=n(require("./ELU")),u=n(require("./ThresholdedReLU"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./LeakyReLU":63,"./PReLU":64,"./ELU":65,"./ThresholdedReLU":66}],524:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=t(require("lodash/range"));function t(e){return e&&e.__esModule?e:{default:e}}function n(t,n){return`#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[${t}];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${n[0]}) * outTex.y);\n  int out_x = int(float(${n[1]}) * outTex.x);\n  \n  outColor = vec4(${(0,e.default)(t).map(e=>`texelFetch(inputs[${e}], ivec2(out_x, out_y), 0).r`).join(" + ")});\n}\n`}
},{"lodash/range":130}],525:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=e(require("lodash/range"));function e(t){return t&&t.__esModule?t:{default:t}}function n(e,n){return`#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[${e}];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${n[0]}) * outTex.y);\n  int out_x = int(float(${n[1]}) * outTex.x);\n  \n  outColor = vec4((${(0,t.default)(e).map(t=>`texelFetch(inputs[${t}], ivec2(out_x, out_y), 0).r`).join(" + ")}) / float(${e}));\n}\n`}
},{"lodash/range":130}],636:[function(require,module,exports) {
function r(r,e,n){var o=-1,t=r.length;e<0&&(e=-e>t?0:t+e),(n=n>t?t:n)<0&&(n+=t),t=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(t);++o<t;)a[o]=r[o+e];return a}module.exports=r;
},{}],606:[function(require,module,exports) {
var e=require("./_baseSlice"),r=require("./toInteger");function t(t,i,n){return t&&t.length?(i=n||void 0===i?1:r(i),e(t,0,i<0?0:i)):[]}module.exports=t;
},{"./_baseSlice":636,"./toInteger":558}],501:[function(require,module,exports) {
function o(o,r){for(var e,n=-1,t=o.length;++n<t;){var v=r(o[n]);void 0!==v&&(e=void 0===e?v:e+v)}return e}module.exports=o;
},{}],350:[function(require,module,exports) {
var e=require("./_baseSum"),r=require("./identity");function t(t){return t&&t.length?e(t,r):0}module.exports=t;
},{"./_baseSum":501,"./identity":502}],526:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var n=o(require("lodash/take")),e=o(require("lodash/sum")),t=o(require("lodash/range"));function o(n){return n&&n.__esModule?n:{default:n}}function u(o,u,i,l){const r=u.map(n=>n[l]),$=(0,t.default)(o+1).map(t=>(0,e.default)((0,n.default)(r,t))),f=0===l?"out_y":"out_x";let s=`\n  int n = 0;\n  int offset = 0;\n  if (${f} >= ${$[1]} && ${f} < ${$[2]}) {\n    n = 1;\n    offset = ${$[1]};\n  }`;o>2&&(s+=`${(0,t.default)(2,o).map(n=>` else if (${f} >= ${$[n]} && ${f} < ${$[n+1]}) {\n    n = ${n};\n    offset = ${$[n]};\n  }`).join("")}\n`);let a="outColor = vec4(0.0);";if(0===l||1===l){const n=n=>`out_x${1===l?` - ${$[n]}`:""}`,e=n=>`out_y${0===l?` - ${$[n]}`:""}`;a=`\n  if (n == 0) {\n    outColor = vec4(texelFetch(inputs[0], ivec2(out_x, out_y), 0).r);\n  }${(0,t.default)(1,o).map(t=>` else if (n == ${t}) {\n    outColor = vec4(texelFetch(inputs[${t}], ivec2(${n(t)}, ${e(t)}), 0).r);\n  }`).join("")}\n`}return`#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[${o}];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${i[0]}) * outTex.y);\n  int out_x = int(float(${i[1]}) * outTex.x);\n${s}\n${a}\n}\n`}
},{"lodash/take":606,"lodash/sum":350,"lodash/range":130}],527:[function(require,module,exports) {
"use strict";function t(t,n){return`#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[${t}];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${n[0]}) * outTex.y);\n  int out_x = int(float(${n[1]}) * outTex.x);\n\n  float val = texelFetch(inputs[0], ivec2(out_x, out_y), 0).r;\n  for (int i = 1; i < ${t}; i++) {\n    val = max(val, texelFetch(inputs[i], ivec2(out_x, out_y), 0).r);\n  }\n\n  outColor = vec4(val);\n}\n`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],528:[function(require,module,exports) {
"use strict";function t(t,n){return`#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[${t}];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${n[0]}) * outTex.y);\n  int out_x = int(float(${n[1]}) * outTex.x);\n\n  float val = texelFetch(inputs[0], ivec2(out_x, out_y), 0).r;\n  for (int i = 1; i < ${t}; i++) {\n    val = min(val, texelFetch(inputs[i], ivec2(out_x, out_y), 0).r);\n  }\n\n  outColor = vec4(val);\n}\n`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],529:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=t(require("lodash/range"));function t(e){return e&&e.__esModule?e:{default:e}}function n(t,n){return`#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[${t}];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${n[0]}) * outTex.y);\n  int out_x = int(float(${n[1]}) * outTex.x);\n\n  outColor = vec4(${(0,e.default)(t).map(e=>`texelFetch(inputs[${e}], ivec2(out_x, out_y), 0).r`).join(" * ")});\n}\n`}
},{"lodash/range":130}],530:[function(require,module,exports) {
"use strict";function t(t,e){return`#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[2];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${e[0]}) * outTex.y);\n  int out_x = int(float(${e[1]}) * outTex.x);\n  \n  outColor = vec4(texelFetch(inputs[0], ivec2(out_x, out_y), 0).r - texelFetch(inputs[1], ivec2(out_x, out_y), 0).r);\n}\n`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],531:[function(require,module,exports) {
"use strict";function n(n,e,o,t,i){const r=t?"sum += texelFetch(bias, ivec2(out_x, 0), 0).r;":"",l=i?`int fragmentIndex = int(floor(float(rowIndex) / float(${e[0]})));\n      rowIndex = int(mod(float(rowIndex), float(${e[0]})));\n      colIndex += fragmentIndex * ${e[1]};`:"";return`#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform sampler2D kernel;\nuniform sampler2D bias;\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${n[0]}) * outTex.y);\n  int out_x = int(float(${n[1]}) * outTex.x);\n\n  float sum = 0.;\n  for (int i = 0; i < ${o[1]}; ++i) {\n    int index = texelFetch(indexMap, ivec2(i, out_y), 0).r;    \n    if (index != -1) {\n      int rowIndex = int(floor(float(index) / float(${e[1]})));\n      int colIndex = int(mod(float(index), float(${e[1]})));\n      ${l}\n      sum += texelFetch(x, ivec2(colIndex, rowIndex), 0).r * texelFetch(kernel, ivec2(out_x, i), 0).r;\n    }\n  }\n\n  ${r}\n  outColor = vec4(sum);\n}   \n`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],532:[function(require,module,exports) {
"use strict";function n(n,e,t,o,i){const l=o?"sum += texelFetch(bias, ivec2(out_x, 0), 0).r;":"",r=i?`int fragmentIndex = int(floor(float(rowIndex) / float(${e[0]})));\n      rowIndex = int(mod(float(rowIndex), float(${e[0]})));\n      colIndex += fragmentIndex * ${e[1]};`:"";return`#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D matMulResult;\nuniform isampler2D indexMap;\nuniform sampler2D bias;\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${n[0]}) * outTex.y);\n  int out_x = int(float(${n[1]}) * outTex.x);\n\n  float sum = 0.;\n  for (int n = 0; n < ${t[1]}; ++n) {\n    int index = texelFetch(indexMap, ivec2(n, out_y), 0).r;\n    if (index != -1) {\n      int rowIndex = int(floor(float(index) / float(${e[1]})));\n      int colIndex = int(mod(float(index), float(${e[1]})));\n      ${r}\n      sum += texelFetch(matMulResult, ivec2(colIndex + out_x, rowIndex), 0).r;\n    }\n  }\n\n  ${l}\n  outColor = vec4(sum);\n}  \n`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],533:[function(require,module,exports) {
"use strict";function n(n,t,e){let o;return o=e?`#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D featureMaps;\nuniform sampler2D weights;\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${n[0]}) * outTex.y);\n  int out_x = int(float(${n[1]}) * outTex.x);\n\n  int featureMapsRow = out_x + ${n[0]} * out_y;\n\n  float sum = 0.;\n  for (int k = 0; k < ${t}; ++k) {\n    float f = texelFetch(featureMaps, ivec2(k, featureMapsRow), 0).r;\n    float w = texelFetch(weights, ivec2(k, 0), 0).r;\n    sum += f * w;\n  }\n\n  outColor = vec4(max(sum, 0.0));\n}  \n`:`#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D featureMaps;\nuniform sampler2D weights;\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(${n[0]}) * outTex.y);\n  int out_x = int(float(${n[1]}) * outTex.x);\n\n  float sum = 0.;\n  for (int k = 0; k < ${t}; ++k) {\n    float f = texelFetch(featureMaps, ivec2(k, out_y), 0).r;\n    float w = texelFetch(weights, ivec2(out_x, k), 0).r;\n    sum += f * w;\n  }\n\n  outColor = vec4(max(sum, 0.0));\n}  \n`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],339:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=l(require("./merge/add")),r=l(require("./merge/average")),u=l(require("./merge/concatenate")),a=l(require("./merge/maximum")),t=l(require("./merge/minimum")),n=l(require("./merge/multiply")),c=l(require("./merge/subtract")),i=l(require("./convolutional/conv2d")),o=l(require("./convolutional/conv2dTranspose")),d=l(require("./visualizations/cam"));function l(e){return e&&e.__esModule?e:{default:e}}function s(l,...s){switch(l){case"add":return(0,e.default)(...s);case"average":return(0,r.default)(...s);case"concatenate":return(0,u.default)(...s);case"maximum":return(0,a.default)(...s);case"minimum":return(0,t.default)(...s);case"multiply":return(0,n.default)(...s);case"subtract":return(0,c.default)(...s);case"conv2d":return(0,i.default)(...s);case"conv2dTranspose":return(0,o.default)(...s);case"cam":return(0,d.default)(...s);default:throw new Error("GLSL program not found")}}
},{"./merge/add":524,"./merge/average":525,"./merge/concatenate":526,"./merge/maximum":527,"./merge/minimum":528,"./merge/multiply":529,"./merge/subtract":530,"./convolutional/conv2d":531,"./convolutional/conv2dTranspose":532,"./visualizations/cam":533}],500:[function(require,module,exports) {
"use strict";module.exports=e;var p=32;function s(p){return"r"===p?[1,0]:[0,1]}function u(p,s){return"native"===s[1]?[p,"d0=",p,".length,",p,"d1=",p,"[0].length,"].join(""):[p,"d0=",p,".shape[0],",p,"d1=",p,".shape[1],",p,"s0=",p,".stride[0],",p,"s1=",p,".stride[1],",p,"o=",p,".offset,",p,"d=",p,".data,"].join("")}function i(p,s,u,i,r,a){var h=[];return"native"===u[1]?p[0]&&(i?h.push("var ",s,"p=",s,"[",i,"];"):h.push("var ",s,"p=",s,"[0];")):i&&r?a?h.push("var ",s,"t0=",s,"s",p[0],",",s,"t1=",s,"s",p[1],"-",s,"s",p[0],"*",a,",",s,"p=",s,"o+",i,"*",s,"s0+",r,"*",s,"s1;"):h.push("var ",s,"t0=",s,"s",p[0],",",s,"p=",s,"o+",i,"*",s,"s0+",r,"*",s,"s1;"):i?h.push("var ",s,"t0=",s,"s",p[0],",",s,"p=",s,"o+",i,"*",s,"s0;"):r?h.push("var ",s,"t0=",s,"s",p[0],",",s,"p=",s,"o+",r,"*",s,"s1;"):h.push("var ",s,"t0=",s,"s",p[0],",",s,"t1=",s,"s",p[1],"-",s,"s",p[0],"*",s,"d",p[0],",",s,"p=",s,"o;"),h}function r(p,s,u,i,r){var a=[];return"native"===u[1]?p[0]&&1===i&&a.push(s,"p=",s,"[",r,"+1]"):a.push(s,"p+=",s,"t",i,";"),a}function a(p,s,u,i,r,a){var h=[];return"native"===u[1]?p[0]?h.push(s,"p[",r,"]=",a,";"):h.push(s,"[",i,"][",r,"]=",a,";"):"generic"===u[1]?h.push(s,"d.set(",s,"p,",a,");"):h.push(s,"d[",s,"p]=",a,";"),h}function h(p,s,u,i,r){var a=[];return"native"===u[1]?p[0]?a.push(s,"p[",r,"]"):a.push(s,"[",i,"][",r,"]"):"generic"===u[1]?a.push(s,"d.get(",s,"p)"):a.push(s,"d[",s,"p]"),a.join("")}function o(p,s,u,o,n){var t=[],e="r"===p[0]?[1,0]:[0,1],j=[1,0],f=[0,1],l=["i","j"];return t.push.apply(t,i(e,"o",p)),e[1]?(t.push("for(j=0;j<od1;++j){"),t.push("for(i=0;i<od0;++i){")):(t.push("for(i=0;i<od0;++i){"),t.push("for(j=0;j<od1;++j){")),t.push.apply(t,i(j,"a",s,"i")),t.push.apply(t,i(f,"b",u,void 0,"j")),t.push("var r=0.0;","for(k=0;k<ad1;++k){","r+=",h(j,"a",s,"i","k"),"*",h(f,"b",u,"k","j"),";"),t.push.apply(t,r(j,"a",s,0,"k")),t.push.apply(t,r(f,"b",u,0,"k")),t.push("}"),o&&t.push("r*=A;"),n&&t.push("r+=B*",h(e,"o",p,"i","j"),";"),t.push.apply(t,a(e,"o",p,"i","j","r")),t.push.apply(t,r(e,"o",p,0,l[1])),t.push("}"),t.push.apply(t,r(e,"o",p,1,l[0])),t.push("}"),t}function n(p,s){var u,o=[],n="r"===p[0]?[1,0]:[0,1];return s&&o.push("if(B!==1.0){"),o.push.apply(o,i(n,"o",p)),n[0]?(o.push("for(i=0;i<od0;++i){for(j=0;j<od1;++j){"),u=["i","j"]):(o.push("for(j=0;j<od1;++j){for(i=0;i<od0;++i){"),u=["j","i"]),s?o.push.apply(o,a(n,"o",p,"i","j","B*"+h(n,"o",p,"i","j"))):o.push.apply(o,a(n,"o",p,"i","j","0")),o.push.apply(o,r(n,"o",p,0,u[1])),o.push("}"),o.push.apply(o,r(n,"o",p,1,u[0])),o.push("}"),s&&o.push("}"),o}function t(s,u,o,t,e){var j=[],f=["od0","od1","ad1"],l=[1,0],v=[1,0],d=[0,1];j.push.apply(j,n(s,e));for(var y=0;y<3;++y)j.push("for(var i",y,"=",f[y],";i",y,">0;){","var w",y,"=",p,";","if(i",y,"<",p,"){","w",y,"=i",y,";","i",y,"=0;","}else{","i",y,"-=",p,";","}");j.push.apply(j,i(l,"o",s,"i0","i1","w1")),j.push("for(i=0;i<w0;++i){for(j=0;j<w1;++j){var r=0.0;"),j.push.apply(j,i(v,"a",u,"(i0+i)","i2")),j.push.apply(j,i(d,"b",o,"i2","(i1+j)")),j.push("for(k=0;k<w2;++k){"),j.push("r+=",h(v,"a",u,"(i0+i)","(i2+k)"),"*",h(d,"b",o,"(i2+k)","(i1+j)"),";"),j.push.apply(j,r(v,"a",u,0,"(i2+k)")),j.push.apply(j,r(d,"b",o,0,"(i2+k)")),j.push("}");var c="r";return t&&(c="A*r"),j.push.apply(j,a(l,"o",s,"(i0+i)","(i1+j)",c+"+"+h(l,"o",s,"(i0+i)","(i1+j)"))),j.push.apply(j,r(l,"o",s,0,"(i1+j)")),j.push("}"),j.push.apply(j,r(l,"o",s,1,"(i0+i)")),j.push("}}}}"),j}function e(p,s,i,r,a){var h=["gemm",p[0],p[1],"a",s[0],s[1],"b",i[0],i[1],r?"alpha":"",a?"beta":""].join(""),n=["function ",h,"(o,a,b,A,B){","var ",u("o",p),u("a",s),u("b",i),"i,j,k;"];return"r"===s[0]&&"c"===i[0]?n.push.apply(n,o(p,s,i,r,a)):n.push.apply(n,t(p,s,i,r,a)),n.push("}return ",h),new Function(n.join(""))()}
},{}],340:[function(require,module,exports) {
"use strict";module.exports=i;var r=require("./lib/planner.js");function e(r){return Array.isArray(r)?[r.length,r[0].length]:r.shape}function t(r,t,a){var n=e(r),i=e(t),o=e(a);if(n[0]!==i[0]||n[1]!==o[1]||i[1]!==o[0])throw new Error("Mismatched array shapes for matrix product")}function a(r){if(Array.isArray(r)){if(Array.isArray(r))return["r","native"]}else if(r.shape&&2===r.shape.length)return r.order[0]?["r",r.dtype]:["c",r.dtype];throw new Error("Unrecognized data type")}var n={};function i(e,i,o,s,u){void 0===s&&(s=1),void 0===u&&(u=0);var d=1!==s,h=0!==u,p=a(e),y=a(i),c=a(o);t(e,i,o);var f=[p,y,c,d,h].join(":"),v=n[f];return v||(v=n[f]=r(p,y,c,d,h)),v(e,i,o,s,u)}
},{"./lib/planner.js":500}],338:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linear=exports.hard_sigmoid=exports.sigmoid=exports.tanh=exports.relu=exports.softsign=exports.softplus=exports.selu=exports.elu=exports.softmax=void 0;const o="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float maxval = 0.0;\n  for (int i = 0; i < int(size[0]); ++i) {\n    float val = texelFetch(x, ivec2(i, out_y), 0).r;\n    if (i == 0 || val > maxval) {\n      maxval = val;\n    }\n  }\n\n  float sum = 0.0;\n  for (int i = 0; i < int(size[0]); ++i) {\n    float val = texelFetch(x, ivec2(i, out_y), 0).r;\n    sum += exp(val - maxval);\n  }\n\n  outColor = exp(texture(x, vec2(outTex.x, outTex.y)) - maxval) / sum;\n}\n";exports.softmax=o;const n="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  float alpha = 1.0;\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = max(v, 0.0) + alpha * (exp(min(v, 0.0)) - 1.0);\n}\n";exports.elu=n;const e="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  float alpha = 1.6732632423543772848170429916717;\n  float scale = 1.0507009873554804934193349852946;\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = scale * (max(v, 0.0) + alpha * (exp(min(v, 0.0)) - 1.0));\n}\n";exports.selu=e;const t="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  outColor = log(1.0 + exp(texture(x, vec2(outTex.x, outTex.y))));\n}\n";exports.softplus=t;const i="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  v /= 1.0 + abs(v);\n  outColor = v;\n}\n";exports.softsign=i;const x="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = max(v, 0.0);\n}\n";exports.relu=x;const r="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = tanh(v);\n}\n";exports.tanh=r;const s="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  outColor = 1.0 / (1.0 + exp(-1.0 * texture(x, vec2(outTex.x, outTex.y))));\n}\n";exports.sigmoid=s;const u="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  v = v * 0.2 + 0.5;\n  v = max(v, 0.0);\n  v = min(v, 1.0);\n  outColor = v;\n}\n";exports.hard_sigmoid=u;const v="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(x, vec2(outTex.x, outTex.y));\n}\n";exports.linear=v;
},{}],70:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("../../Layer")),e=l(require("../../Tensor")),i=u(require("../../activations")),s=require("../../WebGL2"),a=l(require("../../webgl/dynamic/createGLSLProgram")),n=u(require("../../utils/tensorUtils")),r=l(require("ndarray-ops")),o=l(require("ndarray-gemm")),h=u(require("../../activations/programSources"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};s.get||s.set?Object.defineProperty(e,i,s):e[i]=t[i]}return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}const p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 inputSize = textureSize(x, 0);\n  ivec2 outputSize = textureSize(indexMap, 0);\n  int out_x = int(float(outputSize[0]) * outTex.x);\n  int out_y = int(float(outputSize[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    int fragmentIndex = int(floor(float(rowIndex) / float(inputSize[1])));\n    rowIndex = int(mod(float(rowIndex), float(inputSize[1])));\n    colIndex = fragmentIndex * inputCols + colIndex;\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",c="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n";class m extends t.default{constructor(t={}){super(t),this.layerClass="Conv2D";const{filters:e=1,kernel_size:a=[3,3],strides:n=[1,1],padding:r="valid",data_format:o="channels_last",dilation_rate:u=[1,1],activation:l="linear",use_bias:m=!0}=t;Array.isArray(a)?this.kernelShape=[e,...a]:this.kernelShape=[e,a,a],Array.isArray(n)?this.strides=n:this.strides=[n,n],"valid"===r||"same"===r?this.padding=r:this.throwError("Invalid padding."),"channels_last"===o||"channels_first"===o?this.dataFormat=o:this.throwError("Only channels_last and channels_first data formats are allowed."),Array.isArray(u)?this.dilationRate=u:this.dilationRate=[u,u],1===this.dilationRate[0]&&1===this.dilationRate[1]||1===this.strides[0]&&1===this.strides[1]||this.throwError("Incompatible combination of dilation_rate with strides."),this.activation=l,this.activationFunc=i[l],this.useBias=m,this.params=this.useBias?["kernel","bias"]:["kernel"],this.description=`${this.kernelShape[0]} ${this.kernelShape.slice(1).join("x")} filters`,this.description+=this.strides.some(t=>t>1)?`, ${this.strides.join("x")} striding`:"",this.description+="valid"===this.padding?", no border padding":", pad to same borders",this.description+=this.dilationRate.some(t=>t>1)?`, ${this.dilationRate.join("x")} dilation`:"",this.description+="linear"!==this.activation?`, ${this.activation} activation`:"",this.gpu&&(this.mapInputProgram=s.webgl2.compileProgram(p),this.mapInputFragmentsProgram=s.webgl2.compileProgram(d),this.matMulProgram=s.webgl2.compileProgram(c),this.activationProgram=s.webgl2.compileProgram(h[this.activation]))}setWeights(t){"channels_first"===this.dataFormat&&(t[0].tensor=t[0].tensor.transpose(2,3,1,0)),super.setWeights(t,!1),this._w2row(),this.gpu&&(this.weights.kernel=this.wRowsMat,this.weights.kernel.createGLTexture({type:"2d",format:"float"}),this.useBias&&this.weights.bias.createGLTexture({type:"2d",format:"float"}))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_calcOutputShape(t){if(this.outputShape&&this.inputPadding)return;const e=t[0],i=t[1],[s,a,n]=this.kernelShape,r=a+(a-1)*(this.dilationRate[0]-1),o=n+(n-1)*(this.dilationRate[1]-1),h="same"===this.padding?Math.floor((e+this.strides[0]-1)/this.strides[0]):Math.floor((e-r+this.strides[0])/this.strides[0]),u="same"===this.padding?Math.floor((i+this.strides[1]-1)/this.strides[1]):Math.floor((i-o+this.strides[1])/this.strides[1]),l=s,p="same"===this.padding?Math.max(0,Math.floor((h-1)*this.strides[0]+r-e)):0,d="same"===this.padding?Math.max(0,Math.floor((u-1)*this.strides[1]+o-i)):0,c=Math.floor(p/2),m=p-c,f=Math.floor(d/2),g=d-f;this.outputShape=[h,u,l],this.inputPadding=[c,m,f,g]}_padInput(t,i=0){if("same"===this.padding){const[s,a,n]=t.tensor.shape,[o,h,u,l]=this.inputPadding,p=s+o+h,d=a+u+l,c=new e.default([],[p,d,n]);return 0!==i&&r.default.assigns(c.tensor,i),r.default.assign(c.tensor.hi(s+o,a+u,n).lo(o,u,0),t.tensor),c}return t}_im2col(t){const[i,s,a]=t.tensor.shape,n=this.kernelShape[1],o=this.kernelShape[2],h=this.outputShape[0]*this.outputShape[1],u=n*o*a,l=n+(n-1)*(this.dilationRate[0]-1),p=o+(o-1)*(this.dilationRate[1]-1);if(this.imColsMat||(this.imColsMat=new e.default([],[h,u])),1===l&&1===p&&1===this.strides[0]&&1===this.strides[1])return this.imColsMat.replaceTensorData(t.tensor.data),this.imColsMat;const d=new e.default([],[n,o,a]);let c=0;for(let e=0,n=i-l;e<=n;e+=this.strides[0])for(let i=0,n=s-p;i<=n;i+=this.strides[1])r.default.assign(d.tensor,t.tensor.hi(e+l,i+p,a).lo(e,i,0).step(this.dilationRate[0],this.dilationRate[1],1)),this.imColsMat.tensor.data.set(d.tensor.data,c),c+=u;return this.imColsMat}_w2row(){const t=this.weights.kernel.tensor.shape[2],[i,s,a]=this.kernelShape,n=s*a*t;this.wRowsMat=new e.default([],[n,i]);const o=new e.default([],[s,a,t]),h=new e.default([],[n]);for(let t=0;t<i;t++)r.default.assign(o.tensor,this.weights.kernel.tensor.pick(null,null,null,t)),h.replaceTensorData(o.tensor.data),r.default.assign(this.wRowsMat.tensor.pick(null,t),h.tensor);return this.wRowsMat}_callCPU(t){this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),t=this._padInput(t),this._im2col(t);const i=this.kernelShape[0],s=this.outputShape[0],a=this.outputShape[1],n=s*a,h=new e.default([],[n,i]);if(this.useBias)for(let t=0;t<i;t++)r.default.assigns(h.tensor.pick(null,t),this.weights.bias.tensor.get(t));(0,o.default)(h.tensor,this.imColsMat.tensor,this.wRowsMat.tensor,1,1),this.output=new e.default([],this.outputShape);let u=new e.default([],[s*a]),l=new e.default([],[s,a]);for(let t=0;t<i;t++)r.default.assign(u.tensor,h.tensor.pick(null,t)),l.replaceTensorData(u.tensor.data),r.default.assign(this.output.tensor.pick(null,null,t),l.tensor);this.activationFunc(this.output),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1))}_createIndexMap(t){if(this.indexMap)return;let[i,s,a]=this.inputShape,n=new e.default(t.data,t.shape,{type:Int32Array});if("same"===this.padding){const[t,e,a,r]=this.inputPadding;i=i+t+e,s=s+a+r;const o=-1;n=this._padInput(n,o)}const o=this.kernelShape[1],h=this.kernelShape[2],u=this.outputShape[0]*this.outputShape[1],l=o*h*a,p=o+(o-1)*(this.dilationRate[0]-1),d=h+(h-1)*(this.dilationRate[1]-1);this.indexMap=new e.default([],[u,l],{type:Int32Array});const c=new e.default([],[o,h,a]);let m=0;for(let t=0,e=i-p;t<=e;t+=this.strides[0])for(let e=0,i=s-d;e<=i;e+=this.strides[1])r.default.assign(c.tensor,n.tensor.hi(t+p,e+d,a).lo(t,e,0).step(this.dilationRate[0],this.dilationRate[1],1)),this.indexMap.tensor.data.set(c.tensor.data,m),m+=l;this.indexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}_callGPU(t){let i;if(t.is2DReshaped||t.is2DSquareReshaped?(this.inputShape=t.originalShape,this._calcOutputShape(this.inputShape),this._createIndexMap(t.indicesForReshaped),i=[this.indexMap.glTextureShape[0],this.weights.kernel.glTextureShape[1]]):(this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),t=this._padInput(t),this._im2col(t),this.imColsMat.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),i=[this.imColsMat.glTextureShape[0],this.weights.kernel.glTextureShape[1]]),"linear"===this.activation||this.outputPreactiv||(this.outputPreactiv=new e.default([],i),this.outputPreactiv.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.outputPreactiv.is2DReshaped=!0,this.outputPreactiv.originalShape=this.outputShape,this.outputPreactiv.indicesForReshaped=n.createIndicesFor2DReshaped(this.outputShape,!1,-1)),this.output||(this.output=new e.default([],i),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this.outputShape,this.output.indicesForReshaped=n.createIndicesFor2DReshaped(this.outputShape,!1,-1)),t.is2DReshaped||t.is2DSquareReshaped){const e=Boolean(t.glTextureFragments);if(e&&t.convert2DRowFragmentedGLTextureToColStack(),!this.convProgram){const i=(0,a.default)("conv2d",this.output.glTextureFragmentShape?this.output.glTextureFragmentShape:this.output.glTextureShape,t.glTextureFragmentShape?t.glTextureFragmentShape:t.glTextureShape,this.indexMap.glTextureFragmentShape?this.indexMap.glTextureFragmentShape:this.indexMap.glTextureShape,this.useBias,e);this.convProgram=s.webgl2.compileProgram(i)}s.webgl2.runProgram({program:this.convProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"},{input:this.weights.kernel,name:"kernel"},...this.useBias?[{input:this.weights.bias,name:"bias"}]:[]],supportsTextureFragments:!0}),e&&t.removeGLTextureFragmentsAsColStack()}else{const t=[{input:this.imColsMat,name:"A"},{input:this.weights.kernel,name:"B"}];this.useBias&&t.push({input:this.weights.bias,name:"C"}),s.webgl2.runProgram({program:this.matMulProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:t,uniforms:[{value:this.useBias?1:0,type:"bool",name:"addC"}],supportsTextureFragments:!0})}"linear"!==this.activation&&s.webgl2.runProgram({program:this.activationProgram,output:this.output,inputs:[{input:this.outputPreactiv,name:"x"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1)))}}exports.default=m;
},{"../../Layer":57,"../../Tensor":20,"../../activations":23,"../../WebGL2":21,"../../webgl/dynamic/createGLSLProgram":339,"../../utils/tensorUtils":29,"ndarray-ops":18,"ndarray-gemm":340,"../../activations/programSources":338}],337:[function(require,module,exports) {
"use strict";var e=require("ndarray");function i(i,r){var s,t;if(void 0!==r&&(!Number.isFinite(r)||r%1!==r))throw new Error("axis of dimension to unsqueeze must be an integer");return r=void 0===r?i.shape.length:r,s=i.shape.slice(0),t=i.stride.slice(0),s.splice(r||0,0,1),t.splice(r||0,0,(t[r]||1)*(s[r+1]||1)),e(i.data,s,t,i.offset)}module.exports=i;
},{"ndarray":17}],69:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../../Layer")),t=u(require("../../Tensor")),s=u(require("./Conv2D")),r=o(require("../../utils/tensorUtils")),i=u(require("ndarray-ops")),a=u(require("ndarray-squeeze")),n=u(require("ndarray-unsqueeze"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,s):{};r.get||r.set?Object.defineProperty(t,s,r):t[s]=e[s]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}class d extends e.default{constructor(e={}){super(e),this.layerClass="Conv1D";const{filters:t=1,kernel_size:r=1,strides:i=1,padding:a="valid",dilation_rate:n=1,activation:o="linear",use_bias:u=!0}=e;this.description=`${t} filters of size ${r}, striding ${i}`,this.description+="valid"===a?", no border padding":", pad to same borders",this.description+=n>1?`, dilation rate ${n}`:"",this.description+="linear"!==o?`, ${o} activation`:"","valid"!==a&&"same"!==a&&this.throwError("Invalid padding."),1!==n&&1!==i&&this.throwError("Incompatible combination of dilation_rate with strides."),this.use_bias=u,this.params=this.use_bias?["kernel","bias"]:["kernel"];const d={filters:t,kernel_size:[r,1],strides:[i,1],padding:a,data_format:"channels_first",dilation_rate:n,activation:o,use_bias:u};this._conv2dAttrs=d,this._conv2d=new s.default(Object.assign(d,{gpu:e.gpu}))}setWeights(e){e[0].tensor=(0,n.default)(e[0].tensor).transpose(2,1,0,3),this._conv2d.setWeights(e)}call(e){return this.gpu?this._callGPU(e):this._callCPU(e),this.output}_callCPU(e){const s=new t.default(e.tensor.data,e.tensor.shape);s.tensor=(0,n.default)(s.tensor).transpose(0,2,1);const r=this._conv2d.call(s);this.outputShape=[0,2].map(e=>this._conv2d.outputShape[e]),this.output=new t.default([],this.outputShape),i.default.assign(this.output.tensor,(0,a.default)(r.tensor).transpose(1,0,2))}_callGPU(e){e.glTexture||e.createGLTexture({type:"2d",format:"float"});const s=e.tensor.shape,i=new t.default([],s);Object.assign(i,e),i.glTextureShape=s,i.is2DReshaped=!0,i.originalShape=[s[0],1,s[1]],i.indicesForReshaped=r.createIndicesFor2DReshaped(i.originalShape,!1,-1),this.output=this._conv2d.call(i),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=d;
},{"../../Layer":57,"../../Tensor":20,"./Conv2D":70,"../../utils/tensorUtils":29,"ndarray-ops":18,"ndarray-squeeze":30,"ndarray-unsqueeze":337}],71:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../../Layer")),e=h(require("../../Tensor")),s=u(require("../../activations")),i=require("../../WebGL2"),a=u(require("../../utils/tensorUtils")),r=h(require("ndarray-ops")),n=h(require("ndarray-gemm")),o=h(require("./Conv2D")),p=u(require("../../activations/programSources"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,s):{};i.get||i.set?Object.defineProperty(e,s,i):e[s]=t[s]}return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}class l extends o.default{constructor(t={}){super(t)}_calcOutputShape(t){super._calcOutputShape(t);const e=this.kernelShape[0],s=t[2];this.outputShape[2]=e*s}_im2col(t){const[s,i,a]=t.tensor.shape,n=this.kernelShape[1],o=this.kernelShape[2],p=this.outputShape[0]*this.outputShape[1],u=n*o;this.imColsMat||(this.imColsMat=new e.default([],[p*a,u]));let h=new e.default([],[n,o,1]),l=0;for(let e=0;e<a;e++)for(let a=0,p=s-n;a<=p;a+=this.strides[0])for(let s=0,p=i-o;s<=p;s+=this.strides[1])r.default.assign(h.tensor,t.tensor.hi(a+n,s+o,e+1).lo(a,s,e)),this.imColsMat.tensor.data.set(h.tensor.data,l),l+=u;return this.imColsMat}_w2row(){const t=this.weights.kernel.tensor.shape[2],[s,i,a]=this.kernelShape,n=i*a;this.wRowsMat=new e.default([],[n,s*t]);let o=new e.default([],[i,a]),p=new e.default([],[n]),u=0;for(let e=0;e<t;e++)for(let t=0;t<s;t++)r.default.assign(o.tensor,this.weights.kernel.tensor.pick(null,null,e,t)),p.replaceTensorData(o.tensor.data),r.default.assign(this.wRowsMat.tensor.pick(null,u),p.tensor),u+=1;return this.wRowsMat}_callCPU(t){this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),t=this._padInput(t),this._im2col(t);const s=this.kernelShape[0],i=this.outputShape[0],a=this.outputShape[1],r=i*a,o=this.inputShape[2],p=new e.default([],[r*o,s*o]);(0,n.default)(p.tensor,this.imColsMat.tensor,this.wRowsMat.tensor,1,1),this.output=new e.default([],this.outputShape);const u=i*a*s*o;let h=new Float32Array(u);for(let t=0;t<o;t++)for(let e=t*u+t*s;e<(t+1)*u;e+=s*o)for(let i=0;i<s;i++)h[e+i-t*u]=p.tensor.data[e+i];this.output.replaceTensorData(h)}_createIndexMap(t){if(this.indexMap)return;let[s,i,a]=this.inputShape,n=new e.default(t.data,t.shape,{type:Int32Array});if("same"===this.padding){const[t,e,a,r]=this.inputPadding;s=s+t+e,i=i+a+r;const o=-1;n=this._padInput(n,o)}const o=this.kernelShape[1],p=this.kernelShape[2],u=this.outputShape[0]*this.outputShape[1],h=o*p;this.indexMap=new e.default([],[u*a,h],{type:Int32Array});const l=new e.default([],[o,p,1]);let d=0;for(let t=0;t<a;t++)for(let e=0,a=s-o;e<=a;e+=this.strides[0])for(let s=0,a=i-p;s<=a;s+=this.strides[1])r.default.assign(l.tensor,n.tensor.hi(e+o,s+p,t+1).lo(e,s,t)),this.indexMap.tensor.data.set(l.tensor.data,d),d+=h;this.indexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}_createOutputReshapeIndexMap(){if(this.reshapeIndexMap)return;const t=this.kernelShape[0],s=[this.outputShape[0]*this.outputShape[1],this.outputShape[2]],i=new e.default([],s,{type:Int32Array}),a=new e.default([],s,{type:Int32Array});this.reshapeIndexMap=new e.default([],s,{type:Int32Array});for(let e=0;e<s[1];e++)for(let a=0;a<s[0];a++)r.default.assigns(i.tensor.pick(a,e),a+Math.floor(e/t)*s[0]);for(let t=0;t<s[1];t++)r.default.assigns(a.tensor.pick(null,t),t);r.default.muls(this.reshapeIndexMap.tensor,i.tensor,s[1]),r.default.addeq(this.reshapeIndexMap.tensor,a.tensor),this.reshapeIndexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}_callGPU(t){if(super._callGPU(t),this._createOutputReshapeIndexMap(),!this.outputReshaped){const t=[this.outputShape[0]*this.outputShape[1],this.outputShape[2]];this.outputReshaped=new e.default([],t),this.outputReshaped.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.outputReshaped.is2DReshaped=!0,this.outputReshaped.originalShape=this.outputShape,this.outputReshaped.indicesForReshaped=a.createIndicesFor2DReshaped(this.outputShape,!1,-1)}this.output.glTextureFragments&&this.output.convert2DRowFragmentedGLTextureToColStack(),i.webgl2.runProgram({program:this.output.glTextureFragments?this.mapInputFragmentsProgram:this.mapInputProgram,output:this.outputReshaped,inputs:[{input:this.output,name:"x"},{input:this.reshapeIndexMap,name:"indexMap"}],uniforms:[{value:this.output.glTextureShape[1],type:"int",name:"inputCols"}],supportsTextureFragments:!0}),this.output.glTextureFragments&&this.output.removeGLTextureFragmentsAsColStack()}}class d extends t.default{constructor(t={}){super(t),this.layerClass="SeparableConv2D";const{filters:e=1,kernel_size:a=[1,1],strides:r=[1,1],padding:n="valid",data_format:o="channels_last",depth_multiplier:u=1,activation:h="linear",use_bias:l=!0}=t;Array.isArray(a)?this.kernelShape=[e,...a]:this.kernelShape=[e,a,a],Array.isArray(r)?this.strides=r:this.strides=[r,r],"valid"===n||"same"===n?this.padding=n:this.throwError("Invalid padding."),"channels_last"===o||"channels_first"===o?this.dataFormat=o:this.throwError("Only channels_last and channels_first data formats are allowed."),this.activation=h,this.activationFunc=s[h],"valid"===n||"same"===n?this.padding=n:this.throwError("Invalid padding."),this.useBias=l,this.params=this.useBias?["depthwise_kernel","pointwise_kernel","bias"]:["depthwise_kernel","pointwise_kernel"],this.depthwiseConvAttrs={filters:u,kernel_size:[this.kernelShape[1],this.kernelShape[2]],strides:this.strides,padding:n,data_format:o,activation:"linear",use_bias:!1,gpu:t.gpu},this.pointwiseConvAttrs={filters:e,kernel_size:[1,1],strides:[1,1],padding:n,data_format:o,activation:"linear",use_bias:l,gpu:t.gpu},this.description=`${this.kernelShape[0]} ${this.kernelShape.slice(1).join("x")} filters`,this.description+=this.strides.some(t=>t>1)?`, ${this.strides.join("x")} striding`:"",this.description+="valid"===this.padding?", no border padding":", pad to same borders",this.description+=u>1?`, depth multiplier: ${u}`:"",this.description+="linear"!==this.activation?`, ${this.activation} activation`:"",this.gpu&&(this.activationProgram=i.webgl2.compileProgram(p[this.activation]))}setWeights(t){this._depthwiseConv=new l(this.depthwiseConvAttrs),this._depthwiseConv.setWeights(t.slice(0,1)),this._pointwiseConv=new o.default(this.pointwiseConvAttrs),this._pointwiseConv.setWeights(t.slice(1,3))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){this._depthwiseConv._callCPU(t),this._pointwiseConv._callCPU(this._depthwiseConv.output),this.output=this._pointwiseConv.output,this.activationFunc(this.output)}_callGPU(t){this._depthwiseConv.outbound=[null],this._pointwiseConv.outbound=[null],this._depthwiseConv._callGPU(t),this._pointwiseConv._callGPU(this._depthwiseConv.outputReshaped),"linear"===this.activation?this.output=this._pointwiseConv.output:(this.output||(this.output=new e.default([],this._pointwiseConv.output.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this._pointwiseConv.output.originalShape,this.output.indicesForReshaped=a.createIndicesFor2DReshaped(this._pointwiseConv.output.originalShape,!1,-1)),this.outputPreactiv=this._pointwiseConv.output,i.webgl2.runProgram({program:this.activationProgram,output:this.output,inputs:[{input:this.outputPreactiv,name:"x"}],supportsTextureFragments:!0})),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1)))}}exports.default=d;
},{"../../Layer":57,"../../Tensor":20,"../../activations":23,"../../WebGL2":21,"../../utils/tensorUtils":29,"ndarray-ops":18,"ndarray-gemm":340,"./Conv2D":70,"../../activations/programSources":338}],72:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("../../Layer")),e=l(require("../../Tensor")),s=p(require("../../activations")),i=require("../../WebGL2"),a=l(require("../../webgl/dynamic/createGLSLProgram")),r=p(require("../../utils/tensorUtils")),o=l(require("cwise")),n=l(require("ndarray-ops")),u=l(require("ndarray-gemm")),h=p(require("../../activations/programSources"));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,s):{};i.get||i.set?Object.defineProperty(e,s,i):e[s]=t[s]}return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}const d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",c=(0,o.default)({args:[{blockIndices:-1},"scalar","scalar"],body:function(t,e,s){for(let i=0;i<s;i++)if(-1===t[i]){t[i]=e;break}}}),m=(0,o.default)({args:[{blockIndices:-1},"array","scalar"],body:function(t,e,s){for(let i=0;i<s;i++)if(-1===t[i]){t[i]=e;break}}});class f extends t.default{constructor(t={}){super(t),this.layerClass="Conv2DTranspose";const{filters:e=1,kernel_size:a=[3,3],strides:r=[1,1],padding:o="valid",data_format:n="channels_last",activation:u="linear",use_bias:p=!0}=t;Array.isArray(a)?this.kernelShape=[e,...a]:this.kernelShape=[e,a,a],Array.isArray(r)?this.strides=r:this.strides=[r,r],"valid"===o||"same"===o?this.padding=o:this.throwError("Invalid padding."),"channels_last"===n||"channels_first"===n?this.dataFormat=n:this.throwError("Only channels_last and channels_first data formats are allowed."),this.activation=u,this.activationFunc=s[u],this.useBias=p,this.params=this.useBias?["kernel","bias"]:["kernel"],this.description=`${this.kernelShape[0]} ${this.kernelShape.slice(1).join("x")} filters`,this.description+=this.strides.some(t=>t>1)?`, ${this.strides.join("x")} striding`:"",this.description+="valid"===this.padding?", no border padding":", pad to same borders",this.description+="linear"!==this.activation?`, ${this.activation} activation`:"",this.gpu&&(this.matMulProgram=i.webgl2.compileProgram(d),this.activationProgram=i.webgl2.compileProgram(h[this.activation]))}setWeights(t){"channels_first"===this.dataFormat&&(t[0].tensor=t[0].tensor.transpose(2,3,1,0)),super.setWeights(t,!1),this._w2row(),this.gpu&&(this.weights.kernel=this.wRowsMat,this.weights.kernel.createGLTexture({type:"2d",format:"float"}),this.useBias&&this.weights.bias.createGLTexture({type:"2d",format:"float"}))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_calcOutputShape(t){if(this.outputShape&&this.outputPadding)return;const e=t[0],s=t[1],[i,a,r]=this.kernelShape,o="same"===this.padding?e*this.strides[0]:e*this.strides[0]+Math.max(a-this.strides[0],0),n="same"===this.padding?s*this.strides[1]:s*this.strides[1]+Math.max(r-this.strides[1],0),u=i,h="same"===this.padding?Math.max(0,Math.floor((e-1)*this.strides[0]+a-o)):0,p="same"===this.padding?Math.max(0,Math.floor((s-1)*this.strides[1]+r-n)):0,l=Math.floor(h/2),d=h-l,c=Math.floor(p/2),m=p-c;this.outputShape=[o,n,u],this.outputPadding=[l,d,c,m]}_im2col(t){const[s,i,a]=t.tensor.shape;this.imColsMat||(this.imColsMat=new e.default([],[s*i,a]));const r=new e.default([],[s*i]),o=new e.default([],[s,i]);for(let e=0;e<a;e++)n.default.assign(o.tensor,t.tensor.pick(null,null,e)),r.replaceTensorData(o.tensor.data),n.default.assign(this.imColsMat.tensor.pick(null,e),r.tensor);return this.imColsMat}_w2row(){const[t,s,i,a]=this.weights.kernel.tensor.shape;this.wRowsMat=new e.default([],[a,t*s*i]);const r=new e.default([],[t*s*i]),o=new e.default([],[t,s,i]);for(let t=0;t<a;t++)n.default.assign(o.tensor,this.weights.kernel.tensor.pick(null,null,null,t)),r.replaceTensorData(o.tensor.data),n.default.assign(this.wRowsMat.tensor.pick(t,null),r.tensor);return this.wRowsMat}_callCPU(t){this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),this._im2col(t);const s=t.tensor.shape[0],i=t.tensor.shape[1],[a,r,o]=this.kernelShape,h=new e.default([],[s*i,r*o*a]);(0,u.default)(h.tensor,this.imColsMat.tensor,this.wRowsMat.tensor,1,1);const[p,l,d,c]=this.outputPadding;this.output=new e.default([],this.outputShape);let m=new e.default([],[this.outputShape[0]+p+l,this.outputShape[1]+d+c,this.outputShape[2]]);const f=[r,o,a];let g=new e.default([],f),S=new e.default([],[r*o*a]),x=0;for(let t=0;t<s;t++)for(let e=0;e<i;e++){n.default.assign(S.tensor,h.tensor.pick(x,null)),g.replaceTensorData(S.tensor.data);const s=t*this.strides[0],i=e*this.strides[1];n.default.addeq(m.tensor.hi(s+r,i+o,this.outputShape[2]).lo(s,i,0),g.tensor),x+=1}if(n.default.assign(this.output.tensor,m.tensor.hi(this.outputShape[0]+p,this.outputShape[1]+d,this.outputShape[2]).lo(p,d,0)),this.useBias)for(let t=0;t<a;t++)n.default.addseq(this.output.tensor.pick(null,null,t),this.weights.bias.tensor.get(t));this.activationFunc(this.output),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1))}_createIndexMap(){if(this.indexMap)return;const t=this.inputShape[0],s=this.inputShape[1],[i,a,r]=this.kernelShape,[o,u,h,p]=this.outputPadding,l=(a-this.strides[0]+1)*(r-this.strides[1]+1),d=[this.outputShape[0],this.outputShape[1],l],f=[this.outputShape[0]+o+u,this.outputShape[1]+h+p,l],g=new e.default([],d,{type:Int32Array}),S=new e.default([],d,{type:Int32Array}),x=new e.default([],f,{type:Int32Array}),w=new e.default([],f,{type:Int32Array});n.default.assigns(g.tensor,-1),n.default.assigns(S.tensor,-1),n.default.assigns(x.tensor,-1),n.default.assigns(w.tensor,-1);const v=new e.default([],[a,r,i],{type:Int32Array});for(let t=0;t<a*r*i;t++)v.tensor.data[t]=t;for(let e=0;e<t;e++)for(let t=0;t<s;t++){const i=e*s+t,o=e*this.strides[0],n=t*this.strides[1];c(x.tensor.hi(o+a,n+r,l).lo(o,n,0),i,l),m(w.tensor.hi(o+a,n+r,l).lo(o,n,0),v.tensor.pick(null,null,0),l)}n.default.assign(g.tensor,x.tensor.hi(this.outputShape[0]+o,this.outputShape[1]+h,l).lo(o,h,0)),n.default.assign(S.tensor,w.tensor.hi(this.outputShape[0]+o,this.outputShape[1]+h,l).lo(o,h,0));const M=[this.outputShape[0]*this.outputShape[1],l];this.indexMap=new e.default([],M,{type:Int32Array});const y=new e.default([],[l],{type:Int32Array});for(let t=0;t<this.outputShape[0];t++)for(let e=0;e<this.outputShape[1];e++){for(let s=0;s<l;s++){const i=g.tensor.get(t,e,s),a=S.tensor.get(t,e,s);-1!==i&&-1!==a?y.tensor.set(s,i*this.weights.kernel.glTextureShape[1]+a):y.tensor.set(s,-1)}n.default.assign(this.indexMap.tensor.pick(t*this.outputShape[1]+e,null),y.tensor)}this.indexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}_callGPU(t){t.is2DReshaped||t.is2DSquareReshaped?(this.inputShape=t.originalShape,this._calcOutputShape(this.inputShape)):(this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),this._im2col(t),this.imColsMat.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}));const s=t.is2DReshaped||t.is2DSquareReshaped?t:this.imColsMat;if(!this.matMulResult){const t=[s.glTextureShape[0],this.weights.kernel.glTextureShape[1]];this.matMulResult=new e.default([],t),this.matMulResult.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0})}if("linear"!==this.activation&&!this.outputPreactiv){const t=[this.outputShape[0]*this.outputShape[1],this.outputShape[2]];this.outputPreactiv=new e.default([],t),this.outputPreactiv.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.outputPreactiv.is2DReshaped=!0,this.outputPreactiv.originalShape=this.outputShape,this.outputPreactiv.indicesForReshaped=r.createIndicesFor2DReshaped(this.outputShape,!1,-1)}if(!this.output){const t=[this.outputShape[0]*this.outputShape[1],this.outputShape[2]];this.output=new e.default([],t),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this.outputShape,this.output.indicesForReshaped=r.createIndicesFor2DReshaped(this.outputShape,!1,-1)}i.webgl2.runProgram({program:this.matMulProgram,output:this.matMulResult,inputs:[{input:s,name:"A"},{input:this.weights.kernel,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}],supportsTextureFragments:!0}),this._createIndexMap();const o=Boolean(this.matMulResult.glTextureFragments);if(o&&this.matMulResult.convert2DRowFragmentedGLTextureToColStack(),!this.convTransposeProgram){const t=(0,a.default)("conv2dTranspose",this.output.glTextureFragmentShape?this.output.glTextureFragmentShape:this.output.glTextureShape,this.matMulResult.glTextureFragmentShape?this.matMulResult.glTextureFragmentShape:this.matMulResult.glTextureShape,this.indexMap.glTextureFragmentShape?this.indexMap.glTextureFragmentShape:this.indexMap.glTextureShape,this.useBias,o);this.convTransposeProgram=i.webgl2.compileProgram(t)}i.webgl2.runProgram({program:this.convTransposeProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:[{input:this.matMulResult,name:"matMulResult"},{input:this.indexMap,name:"indexMap"},...this.useBias?[{input:this.weights.bias,name:"bias"}]:[]],supportsTextureFragments:!0}),o&&this.matMulResult.removeGLTextureFragmentsAsColStack(),"linear"!==this.activation&&i.webgl2.runProgram({program:this.activationProgram,output:this.output,inputs:[{input:this.outputPreactiv,name:"x"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1)))}}exports.default=f;
},{"../../Layer":57,"../../Tensor":20,"../../activations":23,"../../WebGL2":21,"../../webgl/dynamic/createGLSLProgram":339,"../../utils/tensorUtils":29,"cwise":61,"ndarray-ops":18,"ndarray-gemm":340,"../../activations/programSources":338}],73:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("../../Layer")),e=l(require("../../Tensor")),i=u(require("../../activations")),s=require("../../WebGL2"),a=l(require("../../webgl/dynamic/createGLSLProgram")),n=u(require("../../utils/tensorUtils")),o=l(require("ndarray-ops")),r=l(require("ndarray-gemm")),h=u(require("../../activations/programSources"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};s.get||s.set?Object.defineProperty(e,i,s):e[i]=t[i]}return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}const p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 inputSize = textureSize(x, 0);\n  ivec2 outputSize = textureSize(indexMap, 0);\n  int out_x = int(float(outputSize[0]) * outTex.x);\n  int out_y = int(float(outputSize[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    int fragmentIndex = int(floor(float(rowIndex) / float(inputSize[1])));\n    rowIndex = int(mod(float(rowIndex), float(inputSize[1])));\n    colIndex = fragmentIndex * inputCols + colIndex;\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",c="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n";class f extends t.default{constructor(t={}){super(t),this.layerClass="Conv3D";const{filters:e=1,kernel_size:a=[1,1,1],strides:n=[1,1,1],padding:o="valid",data_format:r="channels_last",dilation_rate:u=[1,1,1],activation:l="linear",use_bias:f=!0}=t;Array.isArray(a)?this.kernelShape=[e,...a]:this.kernelShape=[e,a,a,a],Array.isArray(n)?this.strides=n:this.strides=[n,n,n],"valid"===o||"same"===o?this.padding=o:this.throwError("Invalid padding."),"channels_last"===r||"channels_first"===r?this.dataFormat=r:this.throwError("Only channels_last and channels_first data formats are allowed."),Array.isArray(u)?this.dilationRate=u:this.dilationRate=[u,u,u],1===this.dilationRate[0]&&1===this.dilationRate[1]&&1===this.dilationRate[2]||1===this.strides[0]&&1===this.strides[1]&&1===this.strides[2]||this.throwError("Incompatible combination of dilation_rate with strides."),this.activation=l,this.activationFunc=i[l],this.useBias=f,this.params=this.useBias?["kernel","bias"]:["kernel"],this.description=`${this.kernelShape[0]} ${this.kernelShape.slice(1).join("x")} filters`,this.description+=this.strides.some(t=>t>1)?`, ${this.strides.join("x")} striding`:"",this.description+="valid"===this.padding?", no border padding":", pad to same borders",this.description+=this.dilationRate.some(t=>t>1)?`, ${this.dilationRate.join("x")} dilation`:"",this.description+="linear"!==this.activation?`, ${this.activation} activation`:"",this.gpu&&(this.mapInputProgram=s.webgl2.compileProgram(p),this.mapInputFragmentsProgram=s.webgl2.compileProgram(d),this.matMulProgram=s.webgl2.compileProgram(c),this.activationProgram=s.webgl2.compileProgram(h[this.activation]))}setWeights(t){"channels_first"===this.dataFormat&&(t[0].tensor=t[0].tensor.transpose(2,3,4,1,0)),super.setWeights(t,!1),this._w2row(),this.gpu&&(this.weights.kernel=this.wRowsMat,this.weights.kernel.createGLTexture({type:"2d",format:"float"}),this.useBias&&this.weights.bias.createGLTexture({type:"2d",format:"float"}))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_calcOutputShape(t){if(this.outputShape&&this.inputPadding)return;const e=t[0],i=t[1],s=t[2],[a,n,o,r]=this.kernelShape,h=n+(n-1)*(this.dilationRate[0]-1),u=o+(o-1)*(this.dilationRate[1]-1),l=r+(r-1)*(this.dilationRate[2]-1),p="same"===this.padding?Math.floor((e+this.strides[0]-1)/this.strides[0]):Math.floor((e-h+this.strides[0])/this.strides[0]),d="same"===this.padding?Math.floor((i+this.strides[1]-1)/this.strides[1]):Math.floor((i-u+this.strides[1])/this.strides[1]),c="same"===this.padding?Math.floor((s+this.strides[2]-1)/this.strides[2]):Math.floor((s-l+this.strides[2])/this.strides[2]),f=a,m="same"===this.padding?Math.max(0,Math.floor((p-1)*this.strides[0]+h-e)):0,g="same"===this.padding?Math.max(0,Math.floor((d-1)*this.strides[1]+u-i)):0,x="same"===this.padding?Math.max(0,Math.floor((c-1)*this.strides[2]+l-s)):0,v=Math.floor(m/2),S=m-v,w=Math.floor(g/2),_=g-w,M=Math.floor(x/2),T=x-M;this.outputShape=[p,d,c,f],this.inputPadding=[v,S,w,_,M,T]}_padInput(t,i=0){if("same"===this.padding){const[s,a,n,r]=t.tensor.shape,[h,u,l,p,d,c]=this.inputPadding,f=s+h+u,m=a+l+p,g=n+d+c,x=new e.default([],[f,m,g,r]);return 0!==i&&o.default.assigns(x.tensor,i),o.default.assign(x.tensor.hi(s+h,a+l,n+d,r).lo(h,l,d,0),t.tensor),x}return t}_vol2col(t){const[i,s,a,n]=t.tensor.shape,r=this.kernelShape[1],h=this.kernelShape[2],u=this.kernelShape[3],l=this.outputShape[0]*this.outputShape[1]*this.outputShape[2],p=r*h*u*n,d=r+(r-1)*(this.dilationRate[0]-1),c=h+(h-1)*(this.dilationRate[1]-1),f=u+(u-1)*(this.dilationRate[2]-1);if(this.volColsMat||(this.volColsMat=new e.default([],[l,p])),1===d&&1===c&&1===f&&1===this.strides[0]&&1===this.strides[1]&&1===this.strides[2])return this.volColsMat.replaceTensorData(t.tensor.data),this.volColsMat;const m=new e.default([],[r,h,u,n]);let g=0;for(let e=0,r=i-d;e<=r;e+=this.strides[0])for(let i=0,r=s-c;i<=r;i+=this.strides[1])for(let s=0,r=a-f;s<=r;s+=this.strides[2])o.default.assign(m.tensor,t.tensor.hi(e+d,i+c,s+f,n).lo(e,i,s,0).step(this.dilationRate[0],this.dilationRate[1],this.dilationRate[2],1)),this.volColsMat.tensor.data.set(m.tensor.data,g),g+=p;return this.volColsMat}_w2row(){const t=this.weights.kernel.tensor.shape[3],[i,s,a,n]=this.kernelShape,r=s*a*n*t;this.wRowsMat=new e.default([],[r,i]);const h=new e.default([],[s,a,n,t]),u=new e.default([],[r]);for(let t=0;t<i;t++)o.default.assign(h.tensor,this.weights.kernel.tensor.pick(null,null,null,null,t)),u.replaceTensorData(h.tensor.data),o.default.assign(this.wRowsMat.tensor.pick(null,t),u.tensor);return this.wRowsMat}_callCPU(t){this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),t=this._padInput(t),this._vol2col(t);const i=this.kernelShape[0],s=this.outputShape[0],a=this.outputShape[1],n=this.outputShape[2],h=s*a*n,u=new e.default([],[h,i]);if(this.useBias)for(let t=0;t<i;t++)o.default.assigns(u.tensor.pick(null,t),this.weights.bias.tensor.get(t));(0,r.default)(u.tensor,this.volColsMat.tensor,this.wRowsMat.tensor,1,1),this.output=new e.default([],this.outputShape);let l=new e.default([],[s*a*n]),p=new e.default([],[s,a,n]);for(let t=0;t<i;t++)o.default.assign(l.tensor,u.tensor.pick(null,t)),p.replaceTensorData(l.tensor.data),o.default.assign(this.output.tensor.pick(null,null,null,t),p.tensor);this.activationFunc(this.output),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(3,0,1,2))}_createIndexMap(t){if(this.indexMap)return;let[i,s,a,n]=this.inputShape,r=new e.default(t.data,t.shape,{type:Int32Array});if("same"===this.padding){const[t,e,n,o,h,u]=this.inputPadding;i=i+t+e,s=s+n+o,a=a+h+u;const l=-1;r=this._padInput(r,l)}const h=this.kernelShape[1],u=this.kernelShape[2],l=this.kernelShape[3],p=this.outputShape[0]*this.outputShape[1]*this.outputShape[2],d=h*u*l*n,c=h+(h-1)*(this.dilationRate[0]-1),f=u+(u-1)*(this.dilationRate[1]-1),m=l+(l-1)*(this.dilationRate[2]-1);this.indexMap=new e.default([],[p,d],{type:Int32Array});const g=new e.default([],[h,u,l,n]);let x=0;for(let t=0,e=i-c;t<=e;t+=this.strides[0])for(let e=0,i=s-f;e<=i;e+=this.strides[1])for(let i=0,s=a-m;i<=s;i+=this.strides[2])o.default.assign(g.tensor,r.tensor.hi(t+c,e+f,i+m,n).lo(t,e,i,0).step(this.dilationRate[0],this.dilationRate[1],this.dilationRate[2],1)),this.indexMap.tensor.data.set(g.tensor.data,x),x+=d;this.indexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}_callGPU(t){let i;if(t.is2DReshaped||t.is2DSquareReshaped?(this.inputShape=t.originalShape,this._calcOutputShape(this.inputShape),this._createIndexMap(t.indicesForReshaped),i=[this.indexMap.glTextureShape[0],this.weights.kernel.glTextureShape[1]]):(this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),t=this._padInput(t),this._vol2col(t),this.volColsMat.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),i=[this.volColsMat.glTextureShape[0],this.weights.kernel.glTextureShape[1]]),"linear"===this.activation||this.outputPreactiv||(this.outputPreactiv=new e.default([],i),this.outputPreactiv.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.outputPreactiv.is2DReshaped=!0,this.outputPreactiv.originalShape=this.outputShape,this.outputPreactiv.indicesForReshaped=n.createIndicesFor2DReshaped(this.outputShape,!1,-1)),this.output||(this.output=new e.default([],i),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this.outputShape,this.output.indicesForReshaped=n.createIndicesFor2DReshaped(this.outputShape,!1,-1)),t.is2DReshaped||t.is2DSquareReshaped){const e=Boolean(t.glTextureFragments);if(e&&t.convert2DRowFragmentedGLTextureToColStack(),!this.convProgram){const i=(0,a.default)("conv2d",this.output.glTextureFragmentShape?this.output.glTextureFragmentShape:this.output.glTextureShape,t.glTextureFragmentShape?t.glTextureFragmentShape:t.glTextureShape,this.indexMap.glTextureFragmentShape?this.indexMap.glTextureFragmentShape:this.indexMap.glTextureShape,this.useBias,e);this.convProgram=s.webgl2.compileProgram(i)}s.webgl2.runProgram({program:this.convProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"},{input:this.weights.kernel,name:"kernel"},...this.useBias?[{input:this.weights.bias,name:"bias"}]:[]],supportsTextureFragments:!0}),e&&t.removeGLTextureFragmentsAsColStack()}else{const t=[{input:this.volColsMat,name:"A"},{input:this.weights.kernel,name:"B"}];this.useBias&&t.push({input:this.weights.bias,name:"C"}),s.webgl2.runProgram({program:this.matMulProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:t,uniforms:[{value:this.useBias?1:0,type:"bool",name:"addC"}],supportsTextureFragments:!0})}"linear"!==this.activation&&s.webgl2.runProgram({program:this.activationProgram,output:this.output,inputs:[{input:this.outputPreactiv,name:"x"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(3,0,1,2)))}}exports.default=f;
},{"../../Layer":57,"../../Tensor":20,"../../activations":23,"../../WebGL2":21,"../../webgl/dynamic/createGLSLProgram":339,"../../utils/tensorUtils":29,"ndarray-ops":18,"ndarray-gemm":340,"../../activations/programSources":338}],74:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p(require("../../Layer")),e=p(require("../../Tensor")),i=require("../../WebGL2"),n=p(require("ndarray-ops"));function p(t){return t&&t.__esModule?t:{default:t}}const s="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class o extends t.default{constructor(t={}){super(t),this.layerClass="Cropping1D";const{cropping:e=[0,0]}=t;Array.isArray(e)?this.cropping=e:this.cropping=[e,e],this.description=`${JSON.stringify(this.cropping)}`,this.gpu&&(this.mapInputProgram=i.webgl2.compileProgram(s))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]-this.cropping[0]-this.cropping[1],this.inputShape[1]],this.output=new e.default([],this.outputShape),n.default.assign(this.output.tensor,t.tensor.hi(this.inputShape[0]-this.cropping[1],this.inputShape[2]).lo(this.cropping[0],0))}_createIndexMap(){if(this.indexMap)return;const t=new e.default([],this.inputShape,{type:Int32Array}),i=new e.default([],this.inputShape,{type:Int32Array}),p=new e.default([],this.inputShape,{type:Int32Array});for(let t=0;t<this.inputShape[0];t++)n.default.assigns(i.tensor.pick(t,null),t);for(let t=0;t<this.inputShape[1];t++)n.default.assigns(p.tensor.pick(null,t),t);n.default.muls(t.tensor,i.tensor,this.inputShape[1]),n.default.addeq(t.tensor,p.tensor),this.indexMap=new e.default([],this.outputShape,{type:Int32Array});const s=[this.cropping[0],0],o=[this.inputShape[0]-this.cropping[1],this.inputShape[2]];n.default.assign(this.indexMap.tensor,t.tensor.hi(...o).lo(...s)),this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]-this.cropping[0]-this.cropping[1],this.inputShape[1]],this._createIndexMap(),this.output||(this.output=new e.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float"})),i.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=o;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],75:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../../Layer")),i=n(require("../../Tensor")),e=require("../../WebGL2"),p=n(require("ndarray-ops"));function n(t){return t&&t.__esModule?t:{default:t}}const s="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class r extends t.default{constructor(t={}){super(t),this.layerClass="Cropping2D";const{cropping:i=[[0,0],[0,0]],data_format:p="channels_last"}=t;Array.isArray(i)?Array.isArray(i[0])?this.cropping=i:this.cropping=[[i[0],i[0]],[i[1],i[1]]]:this.cropping=[[i,i],[i,i]],this.dataFormat=p,this.description=`${JSON.stringify(this.cropping)}`,this.gpu&&(this.mapInputProgram=e.webgl2.compileProgram(s))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][0]-this.cropping[1][1],this.inputShape[2]],this.output=new i.default([],this.outputShape),p.default.assign(this.output.tensor,t.tensor.hi(this.inputShape[0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][1],this.inputShape[2]).lo(this.cropping[0][0],this.cropping[1][0],0)),"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(2,0,1),this.output.tensor=this.output.tensor.transpose(2,0,1))}_createIndexMap(t,e){if(this.indexMap)return;const n=new i.default(t.data,t.shape,{type:Int32Array});this.indexMap=new i.default([],this.outputShape,{type:Int32Array});const s="channels_first"===this.dataFormat?[0,this.cropping[0][0],this.cropping[1][0]]:[this.cropping[0][0],this.cropping[1][0],0],r="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]-this.cropping[0][1],this.inputShape[2]-this.cropping[1][1]]:[this.inputShape[0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][1],this.inputShape[2]];p.default.assign(this.indexMap.tensor,n.tensor.hi(...r).lo(...s)),e?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[2]-this.cropping[1][0]-this.cropping[1][1]]:[this.inputShape[0]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][0]-this.cropping[1][1],this.inputShape[2]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new i.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),e.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}exports.default=r;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],76:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../../Layer")),i=n(require("../../Tensor")),p=require("../../WebGL2"),e=n(require("ndarray-ops"));function n(t){return t&&t.__esModule?t:{default:t}}const s="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class r extends t.default{constructor(t={}){super(t),this.layerClass="Cropping3D";const{cropping:i=[[0,0],[0,0],[0,0]],data_format:e="channels_last"}=t;Array.isArray(i)?Array.isArray(i[0])?this.cropping=i:this.cropping=[[i[0],i[0]],[i[1],i[1]],[i[2],i[2]]]:this.cropping=[[i,i],[i,i],[i,i]],this.dataFormat=e,this.description=`${JSON.stringify(this.cropping)}`,this.gpu&&(this.mapInputProgram=p.webgl2.compileProgram(s))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][0]-this.cropping[1][1],this.inputShape[2]-this.cropping[2][0]-this.cropping[2][1],this.inputShape[3]],this.output=new i.default([],this.outputShape),e.default.assign(this.output.tensor,t.tensor.hi(this.inputShape[0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][1],this.inputShape[2]-this.cropping[2][1],this.inputShape[3]).lo(this.cropping[0][0],this.cropping[1][0],this.cropping[2][0],0)),"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(3,0,1,2),this.output.tensor=this.output.tensor.transpose(3,0,1,2))}_createIndexMap(t,p){if(this.indexMap)return;const n=new i.default(t.data,t.shape,{type:Int32Array});this.indexMap=new i.default([],this.outputShape,{type:Int32Array});const s="channels_first"===this.dataFormat?[0,this.cropping[0][0],this.cropping[1][0],this.cropping[2][0]]:[this.cropping[0][0],this.cropping[1][0],this.cropping[2][0],0],r="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]-this.cropping[0][1],this.inputShape[2]-this.cropping[1][1],this.inputShape[3]-this.cropping[2][1]]:[this.inputShape[0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][1],this.inputShape[2]-this.cropping[2][1],this.inputShape[3]];e.default.assign(this.indexMap.tensor,n.tensor.hi(...r).lo(...s)),p?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[2]-this.cropping[1][0]-this.cropping[1][1],this.inputShape[3]-this.cropping[2][0]-this.cropping[2][1]]:[this.inputShape[0]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][0]-this.cropping[1][1],this.inputShape[2]-this.cropping[2][0]-this.cropping[2][1],this.inputShape[3]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new i.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),p.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}exports.default=r;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],77:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../../Layer")),e=s(require("../../Tensor")),i=require("../../WebGL2"),n=s(require("ndarray-ops"));function s(t){return t&&t.__esModule?t:{default:t}}const u="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class a extends t.default{constructor(t={}){super(t),this.layerClass="UpSampling1D";const{size:e=2}=t;this.size=e,this.description=`size ${e}`,this.gpu&&(this.mapInputProgram=i.webgl2.compileProgram(u))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]*this.size,this.inputShape[1]],this.output=new e.default([],this.outputShape);for(let e=0;e<this.size;e++)n.default.assign(this.output.tensor.lo(e,0).step(this.size,1),t.tensor)}_createIndexMap(){if(this.indexMap)return;const t=new e.default([],this.inputShape,{type:Int32Array}),i=new e.default([],this.inputShape,{type:Int32Array}),s=new e.default([],this.inputShape,{type:Int32Array});for(let t=0;t<this.inputShape[0];t++)n.default.assigns(i.tensor.pick(t,null),t);for(let t=0;t<this.inputShape[1];t++)n.default.assigns(s.tensor.pick(null,t),t);n.default.muls(t.tensor,i.tensor,this.inputShape[1]),n.default.addeq(t.tensor,s.tensor),this.indexMap=new e.default([],this.outputShape,{type:Int32Array});for(let e=0;e<this.size;e++)n.default.assign(this.indexMap.tensor.lo(e,0).step(this.size,1),t.tensor);this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]*this.size,this.inputShape[1]],this._createIndexMap(),this.output||(this.output=new e.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float"})),i.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=a;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],78:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../Layer")),e=a(require("../../Tensor")),i=require("../../WebGL2"),s=a(require("ndarray-ops"));function a(t){return t&&t.__esModule?t:{default:t}}const n="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class o extends t.default{constructor(t={}){super(t),this.layerClass="UpSampling2D";const{size:e=[2,2],data_format:s="channels_last"}=t;Array.isArray(e)?this.size=e:this.size=[e,e],this.dataFormat=s,this.description=`size ${this.size.join("x")}`,this.gpu&&(this.mapInputProgram=i.webgl2.compileProgram(n))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]*this.size[0],this.inputShape[1]*this.size[1],this.inputShape[2]],this.output=new e.default([],this.outputShape);for(let e=0;e<this.size[0];e++)for(let i=0;i<this.size[1];i++)s.default.assign(this.output.tensor.lo(e,i,0).step(this.size[0],this.size[1],1),t.tensor);"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(2,0,1),this.output.tensor=this.output.tensor.transpose(2,0,1))}_createIndexMap(t,i){if(this.indexMap)return;const a=new e.default(t.data,t.shape,{type:Int32Array});this.indexMap=new e.default([],this.outputShape,{type:Int32Array});for(let t=0;t<this.size[0];t++)for(let e=0;e<this.size[1];e++){const i="channels_first"===this.dataFormat?[0,t,e]:[t,e,0],n="channels_first"===this.dataFormat?[1,this.size[0],this.size[1]]:[this.size[0],this.size[1],1];s.default.assign(this.indexMap.tensor.lo(...i).step(...n),a.tensor)}i?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]*this.size[0],this.inputShape[2]*this.size[1]]:[this.inputShape[0]*this.size[0],this.inputShape[1]*this.size[1],this.inputShape[2]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new e.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),i.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}exports.default=o;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],79:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../Layer")),e=a(require("../../Tensor")),i=require("../../WebGL2"),s=a(require("ndarray-ops"));function a(t){return t&&t.__esModule?t:{default:t}}const n="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class o extends t.default{constructor(t={}){super(t),this.layerClass="UpSampling3D";const{size:e=[2,2,2],data_format:s="channels_last"}=t;Array.isArray(e)?this.size=e:this.size=[e,e,e],this.dataFormat=s,this.description=`size ${this.size.join("x")}`,this.gpu&&(this.mapInputProgram=i.webgl2.compileProgram(n))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]*this.size[0],this.inputShape[1]*this.size[1],this.inputShape[2]*this.size[2],this.inputShape[3]],this.output=new e.default([],this.outputShape);for(let e=0;e<this.size[0];e++)for(let i=0;i<this.size[1];i++)for(let a=0;a<this.size[2];a++)s.default.assign(this.output.tensor.lo(e,i,a,0).step(this.size[0],this.size[1],this.size[2],1),t.tensor);"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(3,0,1,2),this.output.tensor=this.output.tensor.transpose(3,0,1,2))}_createIndexMap(t,i){if(this.indexMap)return;const a=new e.default(t.data,t.shape,{type:Int32Array});this.indexMap=new e.default([],this.outputShape,{type:Int32Array});for(let t=0;t<this.size[0];t++)for(let e=0;e<this.size[1];e++)for(let i=0;i<this.size[2];i++){const n="channels_first"===this.dataFormat?[0,t,e,i]:[t,e,i,0],o="channels_first"===this.dataFormat?[1,this.size[0],this.size[1],this.size[2]]:[this.size[0],this.size[1],this.size[2],1];s.default.assign(this.indexMap.tensor.lo(...n).step(...o),a.tensor)}i?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]*this.size[0],this.inputShape[2]*this.size[1],this.inputShape[3]*this.size[2]]:[this.inputShape[0]*this.size[0],this.inputShape[1]*this.size[1],this.inputShape[2]*this.size[2],this.inputShape[3]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new e.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),i.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}exports.default=o;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],80:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../Layer")),e=a(require("../../Tensor")),i=require("../../WebGL2"),n=a(require("ndarray-ops"));function a(t){return t&&t.__esModule?t:{default:t}}const s="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class p extends t.default{constructor(t={}){super(t),this.layerClass="ZeroPadding1D";const{padding:e=[1,1]}=t;Array.isArray(e)?this.padding=e:this.padding=[e,e],this.description=`${JSON.stringify(this.padding)}`,this.gpu&&(this.mapInputProgram=i.webgl2.compileProgram(s))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]+this.padding[0]+this.padding[1],this.inputShape[1]],this.output=new e.default([],this.outputShape),n.default.assign(this.output.tensor.hi(this.inputShape[0]+this.padding[0],this.inputShape[1]).lo(this.padding[0],0),t.tensor)}_createIndexMap(){if(this.indexMap)return;const t=new e.default([],this.inputShape,{type:Int32Array}),i=new e.default([],this.inputShape,{type:Int32Array}),a=new e.default([],this.inputShape,{type:Int32Array});for(let t=0;t<this.inputShape[0];t++)n.default.assigns(i.tensor.pick(t,null),t);for(let t=0;t<this.inputShape[1];t++)n.default.assigns(a.tensor.pick(null,t),t);n.default.muls(t.tensor,i.tensor,this.inputShape[1]),n.default.addeq(t.tensor,a.tensor),this.indexMap=new e.default([],this.outputShape,{type:Int32Array});const s=[this.padding[0],0],p=[this.inputShape[0]+this.padding[0],this.inputShape[1]];n.default.assigns(this.indexMap.tensor,-1),n.default.assign(this.indexMap.tensor.hi(...p).lo(...s),t.tensor),this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]+this.padding[0]+this.padding[1],this.inputShape[1]],this._createIndexMap(),this.output||(this.output=new e.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float"})),i.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=p;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],81:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../../Layer")),i=n(require("../../Tensor")),e=require("../../WebGL2"),a=n(require("ndarray-ops"));function n(t){return t&&t.__esModule?t:{default:t}}const s="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class p extends t.default{constructor(t={}){super(t),this.layerClass="ZeroPadding2D";const{padding:i=[[1,1],[1,1]],data_format:a="channels_last"}=t;Array.isArray(i)?Array.isArray(i[0])?this.padding=i:this.padding=[[i[0],i[0]],[i[1],i[1]]]:this.padding=[[i,i],[i,i]],this.dataFormat=a,this.description=`${JSON.stringify(this.padding)}`,this.gpu&&(this.mapInputProgram=e.webgl2.compileProgram(s))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]+this.padding[0][0]+this.padding[0][1],this.inputShape[1]+this.padding[1][0]+this.padding[1][1],this.inputShape[2]],this.output=new i.default([],this.outputShape),a.default.assign(this.output.tensor.hi(this.inputShape[0]+this.padding[0][0],this.inputShape[1]+this.padding[1][0],this.inputShape[2]).lo(this.padding[0][0],this.padding[1][0],0),t.tensor),"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(2,0,1),this.output.tensor=this.output.tensor.transpose(2,0,1))}_createIndexMap(t,e){if(this.indexMap)return;const n=new i.default(t.data,t.shape,{type:Int32Array});this.indexMap=new i.default([],this.outputShape,{type:Int32Array});const s="channels_first"===this.dataFormat?[0,this.padding[0][0],this.padding[1][0]]:[this.padding[0][0],this.padding[1][0],0],p="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]+this.padding[0][0],this.inputShape[2]+this.padding[1][0]]:[this.inputShape[0]+this.padding[0][0],this.inputShape[1]+this.padding[1][0],this.inputShape[2]];a.default.assigns(this.indexMap.tensor,-1),a.default.assign(this.indexMap.tensor.hi(...p).lo(...s),n.tensor),e?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]+this.padding[0][0]+this.padding[0][1],this.inputShape[2]+this.padding[1][0]+this.padding[1][1]]:[this.inputShape[0]+this.padding[0][0]+this.padding[0][1],this.inputShape[1]+this.padding[1][0]+this.padding[1][1],this.inputShape[2]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new i.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),e.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}exports.default=p;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],82:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../../Layer")),i=n(require("../../Tensor")),e=require("../../WebGL2"),a=n(require("ndarray-ops"));function n(t){return t&&t.__esModule?t:{default:t}}const s="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class p extends t.default{constructor(t={}){super(t),this.layerClass="ZeroPadding3D";const{padding:i=[[1,1],[1,1],[1,1]],data_format:a="channels_last"}=t;Array.isArray(i)?Array.isArray(i[0])?this.padding=i:this.padding=[[i[0],i[0]],[i[1],i[1]],[i[2],i[2]]]:this.padding=[[i,i],[i,i],[i,i]],this.dataFormat=a,this.description=`${JSON.stringify(this.padding)}`,this.gpu&&(this.mapInputProgram=e.webgl2.compileProgram(s))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]+this.padding[0][0]+this.padding[0][1],this.inputShape[1]+this.padding[1][0]+this.padding[1][1],this.inputShape[2]+this.padding[2][0]+this.padding[2][1],this.inputShape[3]],this.output=new i.default([],this.outputShape),a.default.assign(this.output.tensor.hi(this.inputShape[0]+this.padding[0][0],this.inputShape[1]+this.padding[1][0],this.inputShape[2]+this.padding[2][0],this.inputShape[3]).lo(this.padding[0][0],this.padding[1][0],this.padding[2][0],0),t.tensor),"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(3,0,1,2),this.output.tensor=this.output.tensor.transpose(3,0,1,2))}_createIndexMap(t,e){if(this.indexMap)return;const n=new i.default(t.data,t.shape,{type:Int32Array});this.indexMap=new i.default([],this.outputShape,{type:Int32Array});const s="channels_first"===this.dataFormat?[0,this.padding[0][0],this.padding[1][0],this.padding[2][0]]:[this.padding[0][0],this.padding[1][0],this.padding[2][0],0],p="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]+this.padding[0][0],this.inputShape[2]+this.padding[1][0],this.inputShape[3]+this.padding[2][0]]:[this.inputShape[0]+this.padding[0][0],this.inputShape[1]+this.padding[1][0],this.inputShape[2]+this.padding[2][0],this.inputShape[3]];a.default.assigns(this.indexMap.tensor,-1),a.default.assign(this.indexMap.tensor.hi(...p).lo(...s),n.tensor),e?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]+this.padding[0][0]+this.padding[0][1],this.inputShape[2]+this.padding[1][0]+this.padding[1][1],this.inputShape[3]+this.padding[2][0]+this.padding[2][1]]:[this.inputShape[0]+this.padding[0][0]+this.padding[0][1],this.inputShape[1]+this.padding[1][0]+this.padding[1][1],this.inputShape[2]+this.padding[2][0]+this.padding[2][1],this.inputShape[3]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new i.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),e.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}exports.default=p;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],47:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Conv1D",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Conv2D",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"SeparableConv2D",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Conv2DTranspose",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Conv3D",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Cropping1D",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Cropping2D",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Cropping3D",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"UpSampling1D",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"UpSampling2D",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"UpSampling3D",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"ZeroPadding1D",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ZeroPadding2D",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"ZeroPadding3D",{enumerable:!0,get:function(){return b.default}});var e=c(require("./Conv1D")),r=c(require("./Conv2D")),t=c(require("./SeparableConv2D")),n=c(require("./Conv2DTranspose")),u=c(require("./Conv3D")),o=c(require("./Cropping1D")),i=c(require("./Cropping2D")),p=c(require("./Cropping3D")),a=c(require("./UpSampling1D")),f=c(require("./UpSampling2D")),d=c(require("./UpSampling3D")),l=c(require("./ZeroPadding1D")),g=c(require("./ZeroPadding2D")),b=c(require("./ZeroPadding3D"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./Conv1D":69,"./Conv2D":70,"./SeparableConv2D":71,"./Conv2DTranspose":72,"./Conv3D":73,"./Cropping1D":74,"./Cropping2D":75,"./Cropping3D":76,"./UpSampling1D":77,"./UpSampling2D":78,"./UpSampling3D":79,"./ZeroPadding1D":80,"./ZeroPadding2D":81,"./ZeroPadding3D":82}],644:[function(require,module,exports) {
"use strict";module.exports=function(t,e){var s,a,f=t.data,o=e.data,r=t.stride[0],d=e.stride[0],i=t.offset,u=e.offset;for(s=t.shape[0]-1;s>=0;s--,i+=r,u+=d)a=f[i],f[i]=o[u],o[u]=a};
},{}],645:[function(require,module,exports) {
"use strict";module.exports=function(t,e){var s,o=e.data,r=e.stride[0],a=e.offset;for(s=e.shape[0]-1;s>=0;s--,a+=r)o[a]*=t};
},{}],646:[function(require,module,exports) {
"use strict";module.exports=function(t,e){var s,a=t.data,f=e.data,o=t.stride[0],r=e.stride[0],d=t.offset,i=e.offset;for(s=t.shape[0]-1;s>=0;s--,d+=o,i+=r)f[i]=a[d]};
},{}],647:[function(require,module,exports) {
"use strict";module.exports=function(t,e,s){var a,f=e.data,o=s.data,r=e.stride[0],d=s.stride[0],i=e.offset,u=s.offset;for(a=e.shape[0]-1;a>=0;a--,i+=r,u+=d)o[u]+=t*f[i]};
},{}],648:[function(require,module,exports) {
"use strict";module.exports=function(e,t){var r,s,a=e.data,f=e.stride[0],o=e.offset,d=0;if(e===t)for(r=e.shape[0]-1;r>=0;r--,o+=f)d+=(s=a[o])*s;else{var i=t.data,u=t.stride[0],n=t.offset;for(r=e.shape[0]-1;r>=0;r--,o+=f,n+=u)d+=i[n]*a[o]}return d};
},{}],649:[function(require,module,exports) {
"use strict";module.exports=function(t,e,s){var a,f=e.data,o=s.data,r=e.stride[0],d=s.stride[0],i=e.offset,u=s.offset;for(a=e.shape[0]-1;a>=0;a--,i+=r,u+=d)o[u]=t*f[i]};
},{}],650:[function(require,module,exports) {
"use strict";var t=function(t,a){if(0===t&&0===a)return 0;var r=Math.abs(t),e=Math.abs(a),s=Math.min(r,e),n=Math.max(r,e);return s/=n,n*Math.sqrt(1+s*s)};module.exports=function(a){var r,e,s=a.data,n=a.stride[0],u=a.offset,f=0;for(r=a.shape[0]-1;r>=0;r--,u+=n)e=s[u],f=t(f,e);return f};
},{}],651:[function(require,module,exports) {
"use strict";module.exports=function(t){var e,r=t.data,s=t.stride[0],a=t.offset,o=0;for(e=t.shape[0]-1;e>=0;e--,a+=s)o+=Math.abs(r[a]);return o};
},{}],652:[function(require,module,exports) {
"use strict";module.exports=function(t){var e,r,s,a=-1/0,o=t.data,f=t.stride[0],u=t.offset,d=t.shape[0];for(e=0;e<d;e++,u+=f)(r=Math.abs(o[u]))>a&&(a=r,s=e);return s};
},{}],653:[function(require,module,exports) {
"use strict";Math.sign=Math.sign||function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1},module.exports=function(t,a,s){var h=0,n=0,i=0,M=0,r=0;if(0===a?(h=Math.sign(t),n=0,i=Math.abs(t)):0===t?(h=0,n=Math.sign(a),i=Math.abs(a)):Math.abs(t)>Math.abs(a)?(n=(M=a/t)*(h=1/(r=Math.sign(t)*Math.sqrt(1+M*M))),i=t*r):(h=(M=t/a)*(n=1/(r=Math.sign(t)*Math.sqrt(1+M*M))),i=a*r),!(void 0!==s&&s.length>2))return[h,n,i];s[0]=h,s[1]=n,s[2]=i};
},{}],593:[function(require,module,exports) {
"use strict";module.exports.swap=require("./swap"),module.exports.scal=require("./scal"),module.exports.copy=require("./copy"),module.exports.axpy=require("./axpy"),module.exports.dot=require("./dot"),module.exports.cpsc=require("./cpsc"),module.exports.nrm2=require("./nrm2"),module.exports.asum=require("./asum"),module.exports.iamax=require("./iamax"),module.exports.rotg=require("./rotg");
},{"./swap":644,"./scal":645,"./copy":646,"./axpy":647,"./dot":648,"./cpsc":649,"./nrm2":650,"./asum":651,"./iamax":652,"./rotg":653}],509:[function(require,module,exports) {
"use strict";var e=require("ndarray-blas-level1");function r(r,t,a,l,s){for(var u=e.dot,n=t.shape[0]-1;n>=0;n--)s.set(n,s.get(n)*l+r*u(t.pick(n,null),a));return!0}module.exports=r;
},{"ndarray-blas-level1":593}],510:[function(require,module,exports) {
"use strict";function e(e,t,r,f,i,o,a){for(var g=0,s=0,n=0,h=0,m=0,u=e.shape[0],v=e.shape[1],d=Math.min(t,u-1),p=Math.min(r,v-1),M=void 0===o?1:o,b=void 0===a?0:a;g<=d;){h=0;var c=Math.min(g+p,v-1);for(n=0;n<=c;n++)h+=e.get(g,n)*f.get(n);i.set(g,h*M+b*i.get(g)),g++}if(g<u)for(s=0;g+p<v;){for(h=0,n=0;n<=d+p;n++)m=s+n+1,h+=e.get(g,m)*f.get(m);if(i.set(g,h*M+b*i.get(g)),s++,++g===u)break}if(g<u)for(s++;g-d<v;){for(h=0,n=s;n<v;n++)h+=e.get(g,n)*f.get(n);if(i.set(g,h*M+b*i.get(g)),s++,++g===u)break}return!0}module.exports=e;
},{}],511:[function(require,module,exports) {
"use strict";var e=require("ndarray-blas-level1");function t(t,g,s,r,f,o){var i=t.shape[0],l=r||!0,a=void 0===f?1:f,u=void 0===o?0:o,n=0,v=0,d=0,c=0;if(0===u)for(n=0;n<s.shape[0];++n)s.set(n,0);else 1!==u&&e.scal(u,s);if(0===a)return!0;if(1===a)if(l)for(v=0;v<i;++v){for(d=g.get(v),c=0,s.set(v,s.get(v)+d*t.get(v,v)),n=v+1;n<i;++n)s.set(n,s.get(n)+d*t.get(n,v)),c+=t.get(n,v)*g.get(n);s.set(v,s.get(v)+c)}else for(v=0;v<i;++v){for(d=g.get(v),c=0,n=0;n<=v-1;++n)s.set(n,s.get(n)+d*t.get(n,v)),c+=t.get(n,v)*g.get(n);s.set(v,s.get(v)+d*t.get(v,v)+c)}else if(l)for(v=0;v<i;++v){for(d=a*g.get(v),c=0,s.set(v,s.get(v)+d*t.get(v,v)),n=v+1;n<i;++n)s.set(n,s.get(n)+d*t.get(n,v)),c+=t.get(n,v)*g.get(n);s.set(v,s.get(v)+a*c)}else for(v=0;v<i;++v){for(d=a*g.get(v),c=0,n=0;n<=v-1;++n)s.set(n,s.get(n)+d*t.get(n,v)),c+=t.get(n,v)*g.get(n);s.set(v,s.get(v)+d*t.get(v,v)+a*c)}return!0}module.exports=t;
},{"ndarray-blas-level1":593}],512:[function(require,module,exports) {
"use strict";function e(){console.error("SBMV (symmetric banded matrix vector multiply) not yet implemented")}module.exports=e;
},{}],513:[function(require,module,exports) {
"use strict";function e(){console.error("SPMV (symmetric packed matrix vector multiply) not yet implemented")}module.exporst=e;
},{}],514:[function(require,module,exports) {
"use strict";var e=require("ndarray-blas-level1");function r(r,l,i){var o=e.dot,s=r.shape[1],t=0;if(i)for(t=s-1;t>=0;t--)l.set(t,o(r.pick(t,null).hi(t+1),l.hi(t+1)));else for(t=0;t<s;t++)l.set(t,o(r.pick(t,null).lo(t),l.lo(t)));return!0}module.exports=r;
},{"ndarray-blas-level1":593}],515:[function(require,module,exports) {
"use strict";function e(){console.error("TBMV (triangular banded matrix vector multiply) not yet implemented")}module.exports=e;
},{}],516:[function(require,module,exports) {
"use strict";var e=require("ndarray-blas-level1");function t(t,r,l){var s=e.dot,g=t.shape[1],i=0;if(l)for(r.set(0,r.get(0)/t.get(0,0)),i=1;i<g;i++)r.set(i,(r.get(i)-s(t.pick(i,null).hi(i),r.hi(i)))/t.get(i,i));else for(r.set(g-1,r.get(g-1)/t.get(g-1,g-1)),i=g-2;i>=0;i--)r.set(i,(r.get(i)-s(t.pick(i,null).lo(i+1),r.lo(i+1)))/t.get(i,i));return!0}module.exports=t;
},{"ndarray-blas-level1":593}],517:[function(require,module,exports) {
"use strict";function e(){console.error("TBSV (triangular banded matrix solver) not yet implemented")}module.exporst=e;
},{}],518:[function(require,module,exports) {
"use strict";function e(){console.error("TPSV (triangular packed matrix solver) not yet implemented")}module.exports=e;
},{}],519:[function(require,module,exports) {
"use strict";function e(){console.error("GER (rank 1 operation A := alpha*x*y' + A) not yet implemented")}module.exports=e;
},{}],520:[function(require,module,exports) {
"use strict";function e(){console.error("SYR (symmetric rank 1 operation A := alpha*x*y' + A) not yet implemented")}module.exports=e;
},{}],521:[function(require,module,exports) {
"use strict";function e(){console.error("SPR (symmetric packed rank 1 operation A := alpha*x*y' + A) not yet implemented")}module.exports=e;
},{}],522:[function(require,module,exports) {
"use strict";function e(){console.error("SYR (symmetric rank 2 operation A := alpha*x*y' + alpha*y*x' + A) not yet implemented")}module.exports=e;
},{}],523:[function(require,module,exports) {
"use strict";function e(){console.error("SPR (symmetric packed rank 2 operation A := alpha*x*y' + alpha*y*x' + A) not yet implemented")}module.exports=e;
},{}],356:[function(require,module,exports) {
"use strict";module.exports.gemv=require("./gemv"),module.exports.gbmv=require("./gbmv"),module.exports.symv=require("./symv"),module.exports.sbmv=require("./sbmv"),module.exports.spmv=require("./spmv"),module.exports.trmv=require("./trmv"),module.exports.tbmv=require("./tbmv"),module.exports.trsv=require("./trsv"),module.exports.tbsv=require("./tbsv"),module.exports.tpsv=require("./tpsv"),module.exports.ger=require("./ger"),module.exports.syr=require("./syr"),module.exports.spr=require("./spr"),module.exports.syr2=require("./syr2"),module.exports.spr2=require("./spr2"),module.exports.trmv_lower=function(e,r){return console.warn("trmv_lower is deprecated. Please use the 'isLower' flag with trmv."),module.exports.trmv(e,r,!0)},module.exports.trsv_lower=function(e,r){return console.warn("trsv_lower is deprecated. Please use the 'isLower' flag with trsv."),module.exports.trsv(e,r,!0)};
},{"./gemv":509,"./gbmv":510,"./symv":511,"./sbmv":512,"./spmv":513,"./trmv":514,"./tbmv":515,"./trsv":516,"./tbsv":517,"./tpsv":518,"./ger":519,"./syr":520,"./spr":521,"./syr2":522,"./spr2":523}],84:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../Layer")),i=a(require("../../Tensor")),e=o(require("../../activations")),s=require("../../WebGL2"),n=require("ndarray-blas-level2"),r=a(require("ndarray-ops")),u=o(require("../../activations/programSources"));function o(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};s.get||s.set?Object.defineProperty(i,e,s):i[e]=t[e]}return i.default=t,i}function a(t){return t&&t.__esModule?t:{default:t}}const l="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n";class h extends t.default{constructor(t={}){super(t),this.layerClass="Dense";const{units:i=1,activation:n="linear",input_dim:r=null,use_bias:o=!0}=t;this.description=`${n} activation, output dimensions: ${i}`,this.activation=n,this.activationFunc=e[this.activation],this.units=i,this.input_dim=r,this.use_bias=o,this.params=this.use_bias?["kernel","bias"]:["kernel"],this.input_dim&&(this.inputShape=[this.input_dim]),this.gpu&&(this.matMulProgram=s.webgl2.compileProgram(l),this.activationProgram=s.webgl2.compileProgram(u[this.activation]))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){this.output=new i.default([],[this.units]),this.use_bias&&r.default.assign(this.output.tensor,this.weights.bias.tensor),(0,n.gemv)(1,this.weights.kernel.tensor.transpose(1,0),t.tensor,1,this.output.tensor),this.activationFunc(this.output)}_callGPU(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),"linear"===this.activation||this.outputPreactiv||(this.outputPreactiv=new i.default([],[this.units]),this.outputPreactiv.createGLTexture({type:"2d",format:"float"})),this.output||(this.output=new i.default([],[this.units]),this.output.createGLTexture({type:"2d",format:"float"}));const e=[{input:t,name:"A"},{input:this.weights.kernel,name:"B"}];this.use_bias&&e.push({input:this.weights.bias,name:"C"}),s.webgl2.runProgram({program:this.matMulProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:e,uniforms:[{value:this.use_bias?1:0,type:"bool",name:"addC"}]}),"linear"!==this.activation&&s.webgl2.runProgram({program:this.activationProgram,output:this.output,inputs:[{input:this.outputPreactiv,name:"x"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=h;
},{"../../Layer":57,"../../Tensor":20,"../../activations":23,"../../WebGL2":21,"ndarray-blas-level2":356,"ndarray-ops":18,"../../activations/programSources":338}],85:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../Layer")),e=a(require("../../Tensor")),r=require("../../WebGL2"),s=u(require("../../activations")),i=u(require("../../activations/programSources"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};s.get||s.set?Object.defineProperty(e,r,s):e[r]=t[r]}return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}class o extends t.default{constructor(t={}){super(t),this.layerClass="Activation";const{activation:e="linear"}=t;this.activation=e,this.activationFunc=s[e],this.description=`${this.activation}`,this.gpu&&(this.program=r.webgl2.compileProgram(i[this.activation]))}call(t){return"linear"===this.activation?(this.output=t,this.output):(this.gpu?this._callGPU(t):this._callCPU(t),this.output)}_callCPU(t){this.output=new e.default(new t.arrayType(t.tensor.data),t.tensor.shape),this.activationFunc(this.output)}_callGPU(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output||(this.output=new e.default([],t.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),t.is1D?this.output.is1D=t.is1D:(t.is2DReshaped||t.is2DSquareReshaped)&&(t.is2DReshaped?this.output.is2DReshaped=t.is2DReshaped:t.is2DSquareReshaped&&(this.output.is2DSquareReshaped=t.is2DSquareReshaped),this.output.originalShape=t.originalShape,this.output.indicesForReshaped=t.indicesForReshaped)),r.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:t,name:"x"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=o;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"../../activations":23,"../../activations/programSources":338}],86:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../../Layer"));function e(t){return t&&t.__esModule?t:{default:t}}class r extends t.default{constructor(t={}){super(t),this.layerClass="Dropout";const{rate:e=.5}=t;this.description=`${e}`,this.rate=Math.min(Math.max(0,e),1)}call(t){return this.output=t,this.output}}exports.default=r;
},{"../../Layer":57}],87:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../../Layer"));function e(t){return t&&t.__esModule?t:{default:t}}class s extends t.default{constructor(t={}){super(t),this.layerClass="SpatialDropout1D";const{p:e=.5}=t;this.description=`${e}`,this.p=Math.min(Math.max(0,e),1)}call(t){return this.output=t,this.output}}exports.default=s;
},{"../../Layer":57}],88:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../../Layer"));function e(t){return t&&t.__esModule?t:{default:t}}class a extends t.default{constructor(t={}){super(t),this.layerClass="SpatialDropout2D";const{rate:e=.5,data_format:a="channels_last"}=t;this.description=`${e}`,this.rate=Math.min(Math.max(0,e),1),this.dataFormat=a}call(t){return this.output=t,this.output}}exports.default=a;
},{"../../Layer":57}],89:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../../Layer"));function e(t){return t&&t.__esModule?t:{default:t}}class a extends t.default{constructor(t={}){super(t),this.layerClass="SpatialDropout3D";const{rate:e=.5,data_format:a="channels_last"}=t;this.description=`${e}`,this.rate=Math.min(Math.max(0,e),1),this.dataFormat=a}call(t){return this.output=t,this.output}}exports.default=a;
},{"../../Layer":57}],90:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../../Layer")),e=n(require("../../Tensor")),o=require("../../WebGL2");function n(t){return t&&t.__esModule?t:{default:t}}const u="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int outputSize;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(outputSize) * outTex.x);\n  int out_y = 0;\n\n  int i = int(floor(float(out_x) / float(inputCols)));\n  int j = int(mod(float(out_x), float(inputCols)));\n  outColor = vec4(texelFetch(x, ivec2(j, i), 0).r);\n}\n",r="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int outputSize;\nuniform int inputRows;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(outputSize) * outTex.x);\n  int out_y = 0;\n\n  int rowIndex = int(mod(floor(float(out_x) / float(inputCols)), float(inputRows)));\n  int colIndex = int(mod(float(out_x), float(inputCols)));\n  int fragmentIndex = int(floor(float(out_x) / (float(inputRows) * float(inputCols))));\n  colIndex += fragmentIndex * inputCols;\n  outColor = vec4(texelFetch(x, ivec2(colIndex, rowIndex), 0).r);\n}\n";class i extends t.default{constructor(t={}){super(t),this.layerClass="Flatten",this.gpu&&(this.flattenProgram=o.webgl2.compileProgram(u),this.flattenFragmentsProgram=o.webgl2.compileProgram(r))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){t.tensor.shape.length<=1?this.output=t:(this.output=new e.default([],[t.tensor.shape.reduce((t,e)=>t*e,1)]),this.output.replaceTensorData(t.tensor.data))}_callGPU(t){t.glTexture||t.glTextureFragments||(t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float"}):t.tensor.shape.length>2&&!t.is2DReshaped&&(t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float"}))),this.output||(this.output=new e.default([],[t.glTextureShape.reduce((t,e)=>t*e,1)]),this.output.createGLTexture({type:"2d",format:"float"})),t.glTextureFragments?(t.convert2DRowFragmentedGLTextureToColStack(),o.webgl2.runProgram({program:this.flattenFragmentsProgram,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.output.glTextureShape[1],type:"int",name:"outputSize"},{value:t.glTextureShape[0],type:"int",name:"inputRows"},{value:t.glTextureShape[1],type:"int",name:"inputCols"}],supportsTextureFragments:!0}),t.removeGLTextureFragmentsAsColStack()):o.webgl2.runProgram({program:this.flattenProgram,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.output.glTextureShape[1],type:"int",name:"outputSize"},{value:t.glTextureShape[1],type:"int",name:"inputCols"}],supportsTextureFragments:!0}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=i;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21}],343:[function(require,module,exports) {
function n(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}module.exports=n;
},{}],91:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("lodash/last")),e=s(require("../../Layer")),i=s(require("../../Tensor")),a=require("../../WebGL2"),n=s(require("ndarray-ops"));function s(t){return t&&t.__esModule?t:{default:t}}const r="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class p extends e.default{constructor(t={}){super(t),this.layerClass="Reshape";const{target_shape:e=[]}=t;this.targetShape=e,this.description=`target shape: ${JSON.stringify(this.targetShape)}`,this.gpu&&(this.mapInputProgram=a.webgl2.compileProgram(r))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){this.targetShape.reduce((t,e)=>t*e,1)!==t.tensor.size&&this.throwError("The total size of new array must be unchanged in reshape layer."),this.output=new i.default([],this.targetShape),this.output.replaceTensorData(t.tensor.data)}_createIndexMap(){if(this.indexMap)return;const e=new i.default([],this.inputShape,{type:Int32Array}),a=new i.default([],this.inputShape,{type:Int32Array}),s=new i.default([],this.inputShape,{type:Int32Array});if(2===this.inputShape.length)for(let t=0;t<this.inputShape[0];t++)n.default.assigns(a.tensor.pick(t,null),t);else if(3===this.inputShape.length)for(let t=0;t<this.inputShape[0];t++)for(let e=0;e<this.inputShape[1];e++)n.default.assigns(a.tensor.pick(t,e,null),t*this.inputShape[1]+e);else if(4===this.inputShape.length)for(let t=0;t<this.inputShape[0];t++)for(let e=0;e<this.inputShape[1];e++)for(let i=0;i<this.inputShape[2];i++)n.default.assigns(a.tensor.pick(t,e,i,null),t*this.inputShape[1]*this.inputShape[2]+e*this.inputShape[2]+i);for(let e=0;e<(0,t.default)(this.inputShape);e++)n.default.assigns(s.tensor.pick(...Array(this.inputShape.length-1).fill(null),e),e);n.default.muls(e.tensor,a.tensor,(0,t.default)(this.inputShape)),n.default.addeq(e.tensor,s.tensor),this.indexMap=new i.default([],this.targetShape,{type:Int32Array}),this.indexMap.replaceTensorData(new Int32Array(e.tensor.data)),this.targetShape.length>2&&this.indexMap.reshapeTo2D(),this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){t.glTexture?t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:this.inputShape=t.tensor.shape:(this.inputShape=t.tensor.shape,t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float"}):t.tensor.shape.length>2&&!t.is2DReshaped&&(t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float"}))),this._createIndexMap(),this.output||(this.output=new i.default([],this.targetShape),this.targetShape.length>2&&this.output.reshapeTo2D(),this.output.createGLTexture({type:"2d",format:"float"})),a.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=p;
},{"lodash/last":343,"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],92:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("lodash/last")),e=u(require("lodash/range")),i=u(require("lodash/isEqual")),s=u(require("../../Layer")),n=u(require("../../Tensor")),a=require("../../WebGL2"),p=u(require("ndarray-ops"));function u(t){return t&&t.__esModule?t:{default:t}}const r="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n";class o extends s.default{constructor(t={}){super(t),this.layerClass="Permute";const{dims:e=[]}=t;this.description=`${JSON.stringify(e)}`,this.dims=e.map(t=>t-1),this.gpu&&(this.mapInputProgram=a.webgl2.compileProgram(r))}call(t){return t.tensor.shape.length<=1||(0,i.default)((0,e.default)(t.tensor.shape.length),this.dims)?(this.output=t,this.output):(this.gpu?this._callGPU(t):this._callCPU(t),this.output)}_callCPU(t){this.dims.length!==t.tensor.shape.length&&this.throwError("The specified dims permutation must match the number of dimensions.");const e=this.dims.map(e=>t.tensor.shape[e]);this.output=new n.default([],e),p.default.assign(this.output.tensor,t.tensor.transpose(...this.dims))}_createIndexMap(){if(this.indexMap)return;const e=new n.default([],this.inputShape,{type:Int32Array}),i=new n.default([],this.inputShape,{type:Int32Array}),s=new n.default([],this.inputShape,{type:Int32Array});if(2===this.inputShape.length)for(let t=0;t<this.inputShape[0];t++)p.default.assigns(i.tensor.pick(t,null),t);else if(3===this.inputShape.length)for(let t=0;t<this.inputShape[0];t++)for(let e=0;e<this.inputShape[1];e++)p.default.assigns(i.tensor.pick(t,e,null),t*this.inputShape[1]+e);else if(4===this.inputShape.length)for(let t=0;t<this.inputShape[0];t++)for(let e=0;e<this.inputShape[1];e++)for(let s=0;s<this.inputShape[2];s++)p.default.assigns(i.tensor.pick(t,e,s,null),t*this.inputShape[1]*this.inputShape[2]+e*this.inputShape[2]+s);for(let e=0;e<(0,t.default)(this.inputShape);e++)p.default.assigns(s.tensor.pick(...Array(this.inputShape.length-1).fill(null),e),e);p.default.muls(e.tensor,i.tensor,(0,t.default)(this.inputShape)),p.default.addeq(e.tensor,s.tensor);const a=this.dims.map(t=>this.inputShape[t]);this.indexMap=new n.default([],a,{type:Int32Array}),p.default.assign(this.indexMap.tensor,e.tensor.transpose(...this.dims)),a.length>2&&this.indexMap.reshapeTo2D(),this.indexMap.createGLTexture({type:"2d",format:"int"})}_callGPU(t){if(t.glTexture?t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:this.inputShape=t.tensor.shape:(this.inputShape=t.tensor.shape,t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float"}):t.tensor.shape.length>2&&!t.is2DReshaped&&(t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float"}))),this._createIndexMap(),!this.output){const t=this.dims.map(t=>this.inputShape[t]);this.output=new n.default([],t),t.length>2&&this.output.reshapeTo2D(),this.output.createGLTexture({type:"2d",format:"float"})}a.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=o;
},{"lodash/last":343,"lodash/range":130,"lodash/isEqual":60,"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],660:[function(require,module,exports) {
"use strict";"use restrict";var r=32;function t(r){var t=32;return(r&=-r)&&t--,65535&r&&(t-=16),16711935&r&&(t-=8),252645135&r&&(t-=4),858993459&r&&(t-=2),1431655765&r&&(t-=1),t}exports.INT_BITS=r,exports.INT_MAX=2147483647,exports.INT_MIN=-1<<r-1,exports.sign=function(r){return(r>0)-(r<0)},exports.abs=function(t){var e=t>>r-1;return(t^e)-e},exports.min=function(r,t){return t^(r^t)&-(r<t)},exports.max=function(r,t){return r^(r^t)&-(r<t)},exports.isPow2=function(r){return!(r&r-1||!r)},exports.log2=function(r){var t,e;return t=(r>65535)<<4,t|=e=((r>>>=t)>255)<<3,t|=e=((r>>>=e)>15)<<2,(t|=e=((r>>>=e)>3)<<1)|(r>>>=e)>>1},exports.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},exports.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},exports.countTrailingZeros=t,exports.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)+1},exports.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},exports.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var e=new Array(256);!function(r){for(var t=0;t<256;++t){var e=t,n=t,o=7;for(e>>>=1;e;e>>>=1)n<<=1,n|=1&e,--o;r[t]=n<<o&255}}(e),exports.reverse=function(r){return e[255&r]<<24|e[r>>>8&255]<<16|e[r>>>16&255]<<8|e[r>>>24&255]},exports.interleave2=function(r,t){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},exports.deinterleave2=function(r,t){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>t&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},exports.interleave3=function(r,t,e){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},exports.deinterleave3=function(r,t){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>t&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},exports.nextCombination=function(r){var e=r|r-1;return e+1|(~e&-~e)-1>>>t(r)+1};
},{}],115:[function(require,module,exports) {
"use strict";function r(e,n,t){var u=0|e[t];if(u<=0)return[];var f,o=new Array(u);if(t===e.length-1)for(f=0;f<u;++f)o[f]=n;else for(f=0;f<u;++f)o[f]=r(e,n,t+1);return o}function e(r,e){var n,t;for(n=new Array(r),t=0;t<r;++t)n[t]=e;return n}function n(n,t){switch(void 0===t&&(t=0),typeof n){case"number":if(n>0)return e(0|n,t);break;case"object":if("number"==typeof n.length)return r(n,t,0)}return[]}module.exports=n;
},{}],690:[function(require,module,exports) {
"use strict";exports.byteLength=c,exports.toByteArray=u,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===r[t-2]?2:"="===r[t-1]?1:0}function c(r){return 3*r.length/4-h(r)}function u(r){var n,o,a,c,u,A=r.length;c=h(r),u=new e(3*A/4-c),o=c>0?A-4:A;var i=0;for(n=0;n<o;n+=4)a=t[r.charCodeAt(n)]<<18|t[r.charCodeAt(n+1)]<<12|t[r.charCodeAt(n+2)]<<6|t[r.charCodeAt(n+3)],u[i++]=a>>16&255,u[i++]=a>>8&255,u[i++]=255&a;return 2===c?(a=t[r.charCodeAt(n)]<<2|t[r.charCodeAt(n+1)]>>4,u[i++]=255&a):1===c&&(a=t[r.charCodeAt(n)]<<10|t[r.charCodeAt(n+1)]<<4|t[r.charCodeAt(n+2)]>>2,u[i++]=a>>8&255,u[i++]=255&a),u}function A(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function i(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(A(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a="",h=[],c=0,u=n-o;c<u;c+=16383)h.push(i(t,c,c+16383>u?u:c+16383));return 1===o?(e=t[n-1],a+=r[e>>2],a+=r[e<<4&63],a+="=="):2===o&&(e=(t[n-2]<<8)+t[n-1],a+=r[e>>10],a+=r[e>>4&63],a+=r[e<<2&63],a+="="),h.push(a),h.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],691:[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],689:[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],632:[function(require,module,exports) {

var global = (1,eval)("this");
var t=(0,eval)("this"),r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(r>>>=0,e>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var o=i-n,u=e-r,s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if(t=~~t,r=void 0===r?n:~~r,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),r<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":690,"ieee754":691,"isarray":689,"buffer":632}],592:[function(require,module,exports) {
var global = (1,eval)("this");
var Buffer = require("buffer").Buffer;
var e=(0,eval)("this"),r=require("buffer").Buffer,t=require("bit-twiddle"),n=require("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var o="undefined"!=typeof Uint8ClampedArray,a=e.__TYPEDARRAY_POOL;a.UINT8C||(a.UINT8C=n([32,0])),a.BUFFER||(a.BUFFER=n([32,0]));var l=a.DATA,u=a.BUFFER;function f(e){if(e){var r=e.length||e.byteLength,n=t.log2(r);l[n].push(e)}}function i(e){f(e.buffer)}function c(e){e=t.nextPow2(e);var r=t.log2(e),n=l[r];return n.length>0?n.pop():new ArrayBuffer(e)}function s(e){return new Uint8Array(c(e),0,e)}function p(e){return new Uint16Array(c(2*e),0,e)}function x(e){return new Uint32Array(c(4*e),0,e)}function U(e){return new Int8Array(c(e),0,e)}function g(e){return new Int16Array(c(2*e),0,e)}function h(e){return new Int32Array(c(4*e),0,e)}function A(e){return new Float32Array(c(4*e),0,e)}function I(e){return new Float64Array(c(8*e),0,e)}function T(e){return o?new Uint8ClampedArray(c(e),0,e):s(e)}function m(e){return new DataView(c(e),0,e)}function w(e){e=t.nextPow2(e);var n=t.log2(e),o=u[n];return o.length>0?o.pop():new r(e)}exports.free=function(e){if(r.isBuffer(e))u[t.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var n=e.length||e.byteLength,o=0|t.log2(n);l[o].push(e)}},exports.freeUint8=exports.freeUint16=exports.freeUint32=exports.freeInt8=exports.freeInt16=exports.freeInt32=exports.freeFloat32=exports.freeFloat=exports.freeFloat64=exports.freeDouble=exports.freeUint8Clamped=exports.freeDataView=i,exports.freeArrayBuffer=f,exports.freeBuffer=function(e){u[t.log2(e.length)].push(e)},exports.malloc=function(e,r){if(void 0===r||"arraybuffer"===r)return c(e);switch(r){case"uint8":return s(e);case"uint16":return p(e);case"uint32":return x(e);case"int8":return U(e);case"int16":return g(e);case"int32":return h(e);case"float":case"float32":return A(e);case"double":case"float64":return I(e);case"uint8_clamped":return T(e);case"buffer":return w(e);case"data":case"dataview":return m(e);default:return null}return null},exports.mallocArrayBuffer=c,exports.mallocUint8=s,exports.mallocUint16=p,exports.mallocUint32=x,exports.mallocInt8=U,exports.mallocInt16=g,exports.mallocInt32=h,exports.mallocFloat32=exports.mallocFloat=A,exports.mallocFloat64=exports.mallocDouble=I,exports.mallocUint8Clamped=T,exports.mallocDataView=m,exports.mallocBuffer=w,exports.clearCache=function(){for(var e=0;e<32;++e)a.UINT8[e].length=0,a.UINT16[e].length=0,a.UINT32[e].length=0,a.INT8[e].length=0,a.INT16[e].length=0,a.INT32[e].length=0,a.FLOAT[e].length=0,a.DOUBLE[e].length=0,a.UINT8C[e].length=0,l[e].length=0,u[e].length=0};
},{"bit-twiddle":660,"dup":115,"buffer":632}],507:[function(require,module,exports) {
"use strict";var r=require("ndarray"),e=require("ndarray-ops"),n=require("typedarray-pool");function o(o){var a=o.dtype;"generic"!==a&&"array"!==a||(a="double");var t=n.malloc(o.size,a),l=r(t,o.shape);return e.assign(l,o),l}function a(e,o){o||(o="double");for(var a=1,t=new Array(e.length),l=e.length-1;l>=0;--l)t[l]=a,a*=e[l];return r(n.malloc(a,o),e,t,0)}function t(r){"generic"!==r.dtype&&"array"!==r.dtype&&n.free(r.data)}function l(e,o){o||(o="double");for(var a=1,t=new Array(e.length),l=e.length-1;l>=0;--l)t[l]=a,a*=e[l];var u=n.malloc(a,o);for(l=0;l<a;++l)u[l]=0;return r(u,e,t,0)}function u(e,o){o||(o="double");for(var a=1,t=new Array(e.length),l=e.length-1;l>=0;--l)t[l]=a,a*=e[l];var u=n.malloc(a,o);for(l=0;l<a;++l)u[l]=1;return r(u,e,t,0)}function f(e,o){var a,t;o||(o="double");var l=1,u=new Array(e.length);for(a=e.length-1;a>=0;--a)u[a]=l,l*=e[a];var f=n.malloc(l,o);for(a=0;a<l;++a)f[a]=0;var c=1/0,i=0;for(a=e.length-1;a>=0;a--)i+=u[a],c=Math.min(c,e[a]);for(a=0,t=0;a<c;a++,t+=i)f[t]=1;return r(f,e,u,0)}exports.clone=o,exports.malloc=a,exports.free=t,exports.zeros=l,exports.ones=u,exports.eye=f;
},{"ndarray":17,"ndarray-ops":18,"typedarray-pool":592}],342:[function(require,module,exports) {
"use strict";var r=require("ndarray-scratch"),e=require("ndarray-ops");function a(){var a,n,o,t;if(2===arguments.length?(n=arguments[0],t=arguments[1]):3===arguments.length&&(o=arguments[0],n=arguments[1],t=arguments[2]),!Array.isArray(t))throw new Error("second argument of tile must be an array of repetition counts for each dimension");var i=n.shape.slice(0),s=i.slice(0),l=Math.max(s.length,t.length);for(a=0;a<l;a++)if(i[a]=void 0===i[a]?1:i[a],t[a]=void 0===t[a]?1:t[a],s[a]=(void 0===s[a]?1:s[a])*t[a],0===s[a])throw new Error("Number of tiles must be greater than zero");o||(o=r.zeros(s,n.dtype));var h=1;for(a=0;a<t.length;a++)h*=t[a];var f=new Array(t.length);for(a=0;a<t.length;a++)f[a]=0;var p=s.slice(0);for(u=0;u<s.length;u++)p[u]=u<n.dimension?null:0;for(a=0;a<h;a++){for(u=n.dimension;u<s.length;u++)p[u]=f[u];var g=o.pick.apply(o,p);if(g=(g=g.lo.apply(g,f)).hi.apply(g,n.shape),e.assign(g,n),a===h-1)break;for(var u=l-1;u>=0&&(f[u]+=i[u],f[u]===s[u]);)f[u]=0,u--}return o}module.exports=a;
},{"ndarray-scratch":507,"ndarray-ops":18}],93:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../../Layer")),e=s(require("../../Tensor")),r=require("../../WebGL2"),u=s(require("ndarray-unsqueeze")),o=s(require("ndarray-tile"));function s(t){return t&&t.__esModule?t:{default:t}}const n="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(x, vec2(outTex.x, 0));\n}\n";class i extends t.default{constructor(t={}){super(t),this.layerClass="RepeatVector";const{n:e=1}=t;this.n=e,this.description=`n = ${e}`,this.gpu&&(this.program=r.webgl2.compileProgram(n))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){1!==t.tensor.shape.length&&this.throwError("Only 1D tensor inputs allowed."),this.output=new e.default([],[this.n,t.tensor.shape[1]]),this.output.tensor=(0,o.default)((0,u.default)(t.tensor,0),[this.n,1])}_callGPU(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.output||(this.output=new e.default([],[this.n,t.glTextureShape[1]]),this.output.createGLTexture({type:"2d",format:"float"})),r.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:t,name:"x"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=i;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-unsqueeze":337,"ndarray-tile":342}],48:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Dense",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Activation",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Dropout",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"SpatialDropout1D",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"SpatialDropout2D",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"SpatialDropout3D",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Flatten",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Reshape",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Permute",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"RepeatVector",{enumerable:!0,get:function(){return f.default}});var e=l(require("./Dense")),t=l(require("./Activation")),r=l(require("./Dropout")),u=l(require("./SpatialDropout1D")),n=l(require("./SpatialDropout2D")),o=l(require("./SpatialDropout3D")),a=l(require("./Flatten")),i=l(require("./Reshape")),p=l(require("./Permute")),f=l(require("./RepeatVector"));function l(e){return e&&e.__esModule?e:{default:e}}
},{"./Dense":84,"./Activation":85,"./Dropout":86,"./SpatialDropout1D":87,"./SpatialDropout2D":88,"./SpatialDropout3D":89,"./Flatten":90,"./Reshape":91,"./Permute":92,"./RepeatVector":93}],94:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("../../Layer")),t=n(require("../../Tensor")),i=require("../../WebGL2"),s=n(require("ndarray-ops"));function n(e){return e&&e.__esModule?e:{default:e}}const u="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform sampler2D embeddings;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 x_size = textureSize(x, 0);\n  ivec2 embeddings_size = textureSize(embeddings, 0);\n  int out_x = int(float(embeddings_size[0]) * outTex.x);\n  int out_y = int(float(x_size[0]) * outTex.y);\n\n  int index = int(texelFetch(x, ivec2(out_y, 0), 0).r);\n  outColor = texelFetch(embeddings, ivec2(out_x, index), 0);\n}\n";class r extends e.default{constructor(e={}){super(e),this.layerClass="Embedding";const{input_dim:t=1,output_dim:s=1,input_length:n=0,mask_zero:r=!1}=e;this.description=`output dimensions: ${s}`,this.inputDim=t,this.outputDim=s,this.inputLength=n,this.maskZero=r,this.params=["embeddings"],this.gpu&&(this.program=i.webgl2.compileProgram(u))}call(e){return this.gpu?this._callGPU(e):this._callCPU(e),this.output}_callCPU(e){this.output=new t.default([],[e.tensor.shape[0],this.weights.embeddings.tensor.shape[1]]);for(let t=0,i=e.tensor.shape[0];t<i;t++)s.default.assign(this.output.tensor.pick(t,null),this.weights.embeddings.tensor.pick(e.tensor.get(t),null))}_callGPU(e){e.glTexture||e.createGLTexture({type:"2d",format:"float"}),this.output||(this.output=new t.default([],[e.glTextureShape[1],this.weights.embeddings.glTextureShape[1]]),this.output.createGLTexture({type:"2d",format:"float"})),i.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:e,name:"x"},{input:this.weights.embeddings,name:"embeddings"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=r;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],49:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Embedding",{enumerable:!0,get:function(){return e.default}});var e=r(require("./Embedding"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./Embedding":94}],344:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("lodash/range")),t=o(require("lodash/isEqual")),s=o(require("../../Layer")),i=o(require("../../Tensor")),r=require("../../WebGL2");function o(e){return e&&e.__esModule?e:{default:e}}class a extends s.default{constructor(e={}){super(e),this.layerClass="_Merge",this.isMergeLayer=!0}call(e){if(this.gpu)this._callGPU(e);else{this._validateInputs(e)||this.throwError("Invalid inputs to call method."),this._callCPU(e)}return this.output}_validateInputs(s){const i=s.map(e=>e.tensor.shape.slice());if(["sum","diff","mul","ave","max","min"].indexOf(this.mode)>-1&&(i.every(e=>(0,t.default)(e,i[0]))||this.throwError(`All input shapes must be the same for mode ${this.mode}.`)),"dot"===this.mode)2!==s.length&&this.throwError(`Exactly 2 inputs required for mode ${this.mode}.`),this.dotAxes[0]<0&&(this.dotAxes[0]=i[0].length+this.dotAxes[0]),this.dotAxes[1]<0&&(this.dotAxes[1]=i[1].length+this.dotAxes[1]),i[0][this.dotAxes[0]]!==i[1][this.dotAxes[1]]&&this.throwError("Dimensions incompatibility using dot mode.");else if("concat"===this.mode){let s=i.slice(),r=this.concatAxis<0?s[0].length+this.concatAxis:this.concatAxis;0===this.concatAxis&&(r=0),(0,e.default)(s.length).forEach(e=>{s[e].splice(r,1)}),s.every(e=>(0,t.default)(e,s[0]))||this.throwError("In concat mode, all shapes must be the same except along the concat axis.")}return!0}_callCPU(){}_callGPU(e){e.forEach(e=>{e.glTexture||e.glTextureFragments||e.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0})}),this.output||(this.output=new i.default([],e[0].glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),e[0].is1D?this.output.is1D=e[0].is1D:(e[0].is2DReshaped||e[0].is2DSquareReshaped)&&(e[0].is2DReshaped?this.output.is2DReshaped=e[0].is2DReshaped:e[0].is2DSquareReshaped&&(this.output.is2DSquareReshaped=e[0].is2DSquareReshaped),this.output.originalShape=e[0].originalShape.slice(),this.output.indicesForReshaped=e[0].indicesForReshaped)),r.webgl2.runProgram({program:this.mergeProgram,output:this.output,inputs:e.map((e,t)=>({input:e,name:`inputs[${t}]`})),supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=a;
},{"lodash/range":130,"lodash/isEqual":60,"../../Layer":57,"../../Tensor":20,"../../WebGL2":21}],96:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("./_Merge")),r=l(require("../../Tensor")),t=require("../../WebGL2"),s=l(require("../../webgl/dynamic/createGLSLProgram")),a=l(require("ndarray-ops"));function l(e){return e&&e.__esModule?e:{default:e}}class u extends e.default{constructor(e={}){super(e),this.layerClass="Add",this.mode="sum"}_callCPU(e){const t=e[0].tensor.shape.slice();this.output=new r.default([],t);for(let r=0;r<e.length;r++)a.default.addeq(this.output.tensor,e[r].tensor)}_callGPU(e){if(!this.mergeProgram){const r=e[0].glTextureFragments?e[0].glTextureFragmentShape:e[0].glTextureShape,a=(0,s.default)("add",e.length,r);this.mergeProgram=t.webgl2.compileProgram(a)}super._callGPU(e)}}exports.default=u;
},{"./_Merge":344,"../../Tensor":20,"../../WebGL2":21,"../../webgl/dynamic/createGLSLProgram":339,"ndarray-ops":18}],95:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./_Merge")),r=u(require("../../Tensor")),t=require("../../WebGL2"),s=u(require("../../webgl/dynamic/createGLSLProgram")),a=u(require("ndarray-ops"));function u(e){return e&&e.__esModule?e:{default:e}}class o extends e.default{constructor(e={}){super(e),this.layerClass="Subtract",this.mode="diff"}_callCPU(e){2!==e.length&&this.throwError("Inputs should be an array of 2 Tensors.");const t=e[0].tensor.shape.slice();this.output=new r.default([],t),a.default.sub(this.output.tensor,e[0].tensor,e[1].tensor)}_callGPU(e){if(!this.mergeProgram){const r=e[0].glTextureFragments?e[0].glTextureFragmentShape:e[0].glTextureShape,a=(0,s.default)("subtract",e.length,r);this.mergeProgram=t.webgl2.compileProgram(a)}super._callGPU(e)}}exports.default=o;
},{"./_Merge":344,"../../Tensor":20,"../../WebGL2":21,"../../webgl/dynamic/createGLSLProgram":339,"ndarray-ops":18}],97:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./_Merge")),t=u(require("../../Tensor")),r=require("../../WebGL2"),l=u(require("../../webgl/dynamic/createGLSLProgram")),s=u(require("ndarray-ops"));function u(e){return e&&e.__esModule?e:{default:e}}class a extends e.default{constructor(e={}){super(e),this.layerClass="Multiply",this.mode="mul"}_callCPU(e){const r=e[0].tensor.shape.slice();this.output=new t.default([],r),s.default.assigns(this.output.tensor,1);for(let t=0;t<e.length;t++)s.default.muleq(this.output.tensor,e[t].tensor)}_callGPU(e){if(!this.mergeProgram){const t=e[0].glTextureFragments?e[0].glTextureFragmentShape:e[0].glTextureShape,s=(0,l.default)("multiply",e.length,t);this.mergeProgram=r.webgl2.compileProgram(s)}super._callGPU(e)}}exports.default=a;
},{"./_Merge":344,"../../Tensor":20,"../../WebGL2":21,"../../webgl/dynamic/createGLSLProgram":339,"ndarray-ops":18}],98:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("./_Merge")),r=l(require("../../Tensor")),t=require("../../WebGL2"),a=l(require("../../webgl/dynamic/createGLSLProgram")),s=l(require("ndarray-ops"));function l(e){return e&&e.__esModule?e:{default:e}}class u extends e.default{constructor(e={}){super(e),this.layerClass="Average",this.mode="ave"}_callCPU(e){const t=e[0].tensor.shape.slice();this.output=new r.default([],t);for(let r=0;r<e.length;r++)s.default.addeq(this.output.tensor,e[r].tensor);s.default.divseq(this.output.tensor,e.length)}_callGPU(e){if(!this.mergeProgram){const r=e[0].glTextureFragments?e[0].glTextureFragmentShape:e[0].glTextureShape,s=(0,a.default)("average",e.length,r);this.mergeProgram=t.webgl2.compileProgram(s)}super._callGPU(e)}}exports.default=u;
},{"./_Merge":344,"../../Tensor":20,"../../WebGL2":21,"../../webgl/dynamic/createGLSLProgram":339,"ndarray-ops":18}],99:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./_Merge")),r=u(require("../../Tensor")),t=require("../../WebGL2"),s=u(require("../../webgl/dynamic/createGLSLProgram")),a=u(require("ndarray-ops"));function u(e){return e&&e.__esModule?e:{default:e}}class l extends e.default{constructor(e={}){super(e),this.layerClass="Maximum",this.mode="max"}_callCPU(e){const t=e[0].tensor.shape.slice();this.output=new r.default([],t),a.default.assign(this.output.tensor,e[0].tensor);for(let r=1;r<e.length;r++)a.default.maxeq(this.output.tensor,e[r].tensor)}_callGPU(e){if(!this.mergeProgram){const r=e[0].glTextureFragments?e[0].glTextureFragmentShape:e[0].glTextureShape,a=(0,s.default)("maximum",e.length,r);this.mergeProgram=t.webgl2.compileProgram(a)}super._callGPU(e)}}exports.default=l;
},{"./_Merge":344,"../../Tensor":20,"../../WebGL2":21,"../../webgl/dynamic/createGLSLProgram":339,"ndarray-ops":18}],100:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./_Merge")),r=a(require("../../Tensor")),t=require("../../WebGL2"),s=a(require("../../webgl/dynamic/createGLSLProgram")),u=a(require("ndarray-ops"));function a(e){return e&&e.__esModule?e:{default:e}}class l extends e.default{constructor(e={}){super(e),this.layerClass="Minimum",this.mode="min"}_callCPU(e){const t=e[0].tensor.shape.slice();this.output=new r.default([],t),u.default.assign(this.output.tensor,e[0].tensor);for(let r=1;r<e.length;r++)u.default.mineq(this.output.tensor,e[r].tensor)}_callGPU(e){if(!this.mergeProgram){const r=e[0].glTextureFragments?e[0].glTextureFragmentShape:e[0].glTextureShape,u=(0,s.default)("minimum",e.length,r);this.mergeProgram=t.webgl2.compileProgram(u)}super._callGPU(e)}}exports.default=l;
},{"./_Merge":344,"../../Tensor":20,"../../WebGL2":21,"../../webgl/dynamic/createGLSLProgram":339,"ndarray-ops":18}],508:[function(require,module,exports) {
function e(e,t){if(!t||"object"!=typeof t)return e;for(var r=Object.keys(t),o=r.length;o--;)e[r[o]]=t[r[o]];return e}module.exports=e;
},{}],349:[function(require,module,exports) {
"use strict";module.exports=n;var e=require("util-extend"),r=require("ndarray-ops"),t=require("ndarray-scratch"),a={dtype:"double"};function n(){var n,o,s,i,h,l,f,u,m,d;if(i=e({},a),0===arguments.length)throw new Error("Array of ndarrays to concatenate must not be empty");if(Array.isArray(arguments[0])?(s=arguments[0],e(i,arguments[1]||{})):2===arguments.length&&(s=arguments[1],n=arguments[0],e(i,arguments[2]||{})),0===s.length)throw new Error("Array of ndarrays to concatenate must not be empty");for(h=0;h<s.length;h++)if(f){if(s[h].dimension!==f.length)throw new Error("all arrays must have the same dimensionality");for(l=1;l<s[h].shape.length;l++)if(s[h].shape[l]!==f[l])throw new Error("last n-1 dimensions of concatenated rows must have the same size");f[0]+=s[h].shape[0]}else f=s[h].shape.slice(0);if(n){if(f[0]!==n.shape[0])throw new Error("first dimension of output array must match the total number of concatenated rows")}else n=t.zeros(f,i.dtype);for(l=0,u=0;l<s.length;l++)m=(o=s[l]).shape[0],d=n.lo(u).hi(m),r.assign(d,o),u+=m;return n}
},{"util-extend":508,"ndarray-ops":18,"ndarray-scratch":507}],101:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("lodash/sum")),e=n(require("./_Merge")),s=n(require("../../Tensor")),r=require("../../WebGL2"),i=n(require("../../webgl/dynamic/createGLSLProgram")),o=u(require("../../utils/tensorUtils")),a=n(require("ndarray-concat-rows"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,s):{};r.get||r.set?Object.defineProperty(e,s,r):e[s]=t[s]}return e.default=t,e}function n(t){return t&&t.__esModule?t:{default:t}}class p extends e.default{constructor(t={}){super(t),this.layerClass="Concatenate",this.mode="concat";const{axis:e=-1}=t;this.concatAxis=e<=0?e:e-1}_callCPU(t){const e=t[0].tensor.shape.slice(),r=this.concatAxis<0?e.length+this.concatAxis:this.concatAxis;if(t.slice(1,t.length).forEach(t=>{const s=t.tensor.shape.slice()[r];e[r]+=s}),this.output=new s.default([],e),0===r)(0,a.default)(this.output.tensor,t.map(t=>t.tensor));else{let e=[r];for(let s=0;s<t[0].tensor.shape.length;s++)s!==r&&e.push(s);(0,a.default)(this.output.tensor.transpose(...e),t.map(t=>t.tensor.transpose(...e)))}}_callGPU(e){e.forEach(t=>{t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0})});const a=e[0].glTextureShape.slice();let u=1;if(e[0].is2DReshaped?-1===this.concatAxis||this.concatAxis===e[0].originalShape.length-1?u=1:this.throwError("specified axis not supported for now."):-1===this.concatAxis||1===this.concatAxis?u=1:-2===this.concatAxis||0===this.concatAxis?u=0:this.throwError("specified axis not supported for now."),a[u]=(0,t.default)(e.map(t=>t.glTextureShape[u])),!this.output)if(this.output=new s.default([],a),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:1===u}),e[0].is1D)this.output.is1D=e[0].is1D;else if(e[0].is2DReshaped){this.output.is2DReshaped=e[0].is2DReshaped,this.output.originalShape=e[0].originalShape.slice();const s=this.concatAxis<0?this.output.originalShape.length+this.concatAxis:this.concatAxis;this.output.originalShape[s]=(0,t.default)(e.map(t=>t.originalShape[s])),this.output.indicesForReshaped=o.createIndicesFor2DReshaped(this.output.originalShape,!1,s)}if(!this.mergeProgram){const t=this.output.glTextureFragments?this.output.glTextureFragmentShape:this.output.glTextureShape,s=(0,i.default)("concatenate",e.length,e.map(t=>t.glTextureShape),t,u);this.mergeProgram=r.webgl2.compileProgram(s)}r.webgl2.runProgram({program:this.mergeProgram,output:this.output,inputs:e.map((t,e)=>({input:t,name:`inputs[${e}]`})),supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=p;
},{"lodash/sum":350,"./_Merge":344,"../../Tensor":20,"../../WebGL2":21,"../../webgl/dynamic/createGLSLProgram":339,"../../utils/tensorUtils":29,"ndarray-concat-rows":349}],102:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./_Merge")),e=s(require("../../Tensor")),o=require("../../WebGL2"),n=s(require("ndarray-gemm")),i=s(require("ndarray-ops"));function s(t){return t&&t.__esModule?t:{default:t}}const r="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D input1;\nuniform sampler2D input2;\nuniform int rows;\nuniform int cols;\nuniform int dotAxis1;\nuniform int dotAxis2;\nuniform int commonDim;\nuniform bool normalize;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(cols) * outTex.x);\n  int out_y = int(float(rows) * outTex.y);\n\n  float sum = 0.;\n  float a = 0.;\n  float b = 0.;\n  float norm1 = 0.;\n  float norm2 = 0.;\n\n  for (int i = 0; i < commonDim; ++i) {\n    if (dotAxis1 == 0 && dotAxis2 == 0) {\n      a = texelFetch(input1, ivec2(out_y, i), 0).r;\n      b = texelFetch(input2, ivec2(out_x, i), 0).r;\n    } else if (dotAxis1 == 1 && dotAxis2 == 1) {\n      a = texelFetch(input1, ivec2(i, out_y), 0).r;\n      b = texelFetch(input2, ivec2(i, out_x), 0).r;\n    }\n\n    sum += a * b;\n\n    if (normalize) {\n      norm1 += a * a;\n      norm2 += b * b;\n    }\n  }\n\n  if (normalize) {\n    sum /= sqrt(norm1) * sqrt(norm2);\n  }\n\n  outColor = vec4(sum);\n}\n";class u extends t.default{constructor(t={}){super(t),this.layerClass="Dot",this.mode="dot";const{axes:e=-1,normalize:n=!1}=t;Array.isArray(e)?this.dotAxes=[e[0]<=0?e[0]:e[0]-1,e[1]<=0?e[1]:e[1]-1]:this.dotAxes=[e<=0?e:e-1,e<=0?e:e-1],this.normalize=n,this.gpu&&(this.mergeProgram=o.webgl2.compileProgram(r))}_calcOutputShape(t){let e=t[0].slice(),o=t[1].slice();e.splice(this.dotAxes[0],1),o.splice(this.dotAxes[1],1),this.outputShape=e.concat(o),1===this.outputShape.length&&this.outputShape.push(1)}_callCPU(t){if(this._calcOutputShape([t[0].tensor.shape,t[1].tensor.shape]),this.output=new e.default([],this.outputShape),2===t[0].tensor.shape.length&&2===t[1].tensor.shape.length){if(0===this.dotAxes[0]&&0===this.dotAxes[1]){if(this.normalize){for(let e=0;e<t[0].tensor.shape[1];e++)i.default.divseq(t[0].tensor.pick(null,e),i.default.norm2(t[0].tensor.pick(null,e)));for(let e=0;e<t[1].tensor.shape[1];e++)i.default.divseq(t[1].tensor.pick(null,e),i.default.norm2(t[1].tensor.pick(null,e)))}(0,n.default)(this.output.tensor,t[0].tensor.transpose(1,0),t[1].tensor)}else if(1===this.dotAxes[0]&&1===this.dotAxes[1]){if(this.normalize){for(let e=0;e<t[0].tensor.shape[0];e++)i.default.divseq(t[0].tensor.pick(e,null),i.default.norm2(t[0].tensor.pick(e,null)));for(let e=0;e<t[1].tensor.shape[0];e++)i.default.divseq(t[1].tensor.pick(e,null),i.default.norm2(t[1].tensor.pick(e,null)))}(0,n.default)(this.output.tensor,t[0].tensor,t[1].tensor.transpose(1,0))}}else this.throwError("dot mode for 3+ dim tensors not yet implemented.")}_callGPU(t){t.forEach(t=>{t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float"})}),this._calcOutputShape([t[0].glTextureShape,t[1].glTextureShape]),this.output||(this.output=new e.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float"}));const n=t[0].glTextureShape[this.dotAxes[0]];o.webgl2.runProgram({program:this.mergeProgram,output:this.output,inputs:[{input:t[0],name:"input1"},{input:t[1],name:"input2"}],uniforms:[{value:this.output.glTextureShape[0],type:"int",name:"rows"},{value:this.output.glTextureShape[1],type:"int",name:"cols"},{value:this.dotAxes[0],type:"int",name:"dotAxis1"},{value:this.dotAxes[1],type:"int",name:"dotAxis2"},{value:n,type:"int",name:"commonDim"},{value:+this.normalize,type:"bool",name:"normalize"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=u;
},{"./_Merge":344,"../../Tensor":20,"../../WebGL2":21,"ndarray-gemm":340,"ndarray-ops":18}],50:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Add",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Subtract",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Multiply",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Average",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Maximum",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Minimum",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Concatenate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Dot",{enumerable:!0,get:function(){return a.default}});var e=f(require("./Add")),t=f(require("./Subtract")),r=f(require("./Multiply")),u=f(require("./Average")),n=f(require("./Maximum")),i=f(require("./Minimum")),o=f(require("./Concatenate")),a=f(require("./Dot"));function f(e){return e&&e.__esModule?e:{default:e}}
},{"./Add":96,"./Subtract":95,"./Multiply":97,"./Average":98,"./Maximum":99,"./Minimum":100,"./Concatenate":101,"./Dot":102}],103:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../../Layer"));function e(t){return t&&t.__esModule?t:{default:t}}class r extends t.default{constructor(t={}){super(t),this.layerClass="GaussianDropout";const{rate:e=.5}=t;this.rate=Math.min(Math.max(0,e),1)}call(t){return this.output=t,this.output}}exports.default=r;
},{"../../Layer":57}],104:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../../Layer"));function t(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{constructor(e={}){super(e),this.layerClass="GaussianNoise";const{stddev:t=0}=e;this.stddev=t}call(e){return this.output=e,this.output}}exports.default=s;
},{"../../Layer":57}],51:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"GaussianDropout",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"GaussianNoise",{enumerable:!0,get:function(){return r.default}});var e=t(require("./GaussianDropout")),r=t(require("./GaussianNoise"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./GaussianDropout":103,"./GaussianNoise":104}],114:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../../Layer")),t=i(require("../../Tensor")),s=require("../../WebGL2"),a=i(require("ndarray-ops"));function i(e){return e&&e.__esModule?e:{default:e}}const n="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D X;\nuniform isampler2D normAxisIndexMap;\nuniform sampler2D gamma;\nuniform sampler2D beta;\nuniform sampler2D mean;\nuniform sampler2D std;\nuniform float epsilon;\nuniform bool scale;\nuniform bool center;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(X, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\nint normAxisIndex = texelFetch(normAxisIndexMap, ivec2(out_x, out_y), 0).r;\n\n  float _x = texelFetch(X, ivec2(out_x, out_y), 0).r;\n  float _mean = texelFetch(mean, ivec2(normAxisIndex, 0), 0).r;\n  float _std = texelFetch(std, ivec2(normAxisIndex, 0), 0).r;\n\n  float _gamma = 1.0;\n  if (scale) {\n    _gamma = texelFetch(gamma, ivec2(normAxisIndex, 0), 0).r;\n  }\n\n  float _beta = 0.0;\n  if (center) {\n    _beta = texelFetch(beta, ivec2(normAxisIndex, 0), 0).r;\n  }\n\n  float sum = _beta + _gamma * (_x - _mean) / sqrt(_std + epsilon);\n\n  outColor = vec4(sum);\n}\n";class r extends e.default{constructor(e={}){super(e),this.layerClass="BatchNormalization";const{epsilon:t=.001,axis:a=-1,center:i=!0,scale:r=!0}=e;this.epsilon=t,this.center=i,this.scale=r,this.axis=a,this.axisNormalized=!1,this.params=[],this.scale&&this.params.push("gamma"),this.center&&this.params.push("beta"),this.params=this.params.concat(["moving_mean","moving_variance"]),this.gpu&&(this.program=s.webgl2.compileProgram(n))}call(e){return this.gpu?this._callGPU(e):this._callCPU(e),this.output}_callCPU(e){this.axisNormalized||(this.axis=this.axis<0?e.tensor.shape.length+this.axis:this.axis-1,this.axisNormalized=!0);let s=[];for(let t=0;t<e.tensor.shape.length;t++)t===this.axis?s.push(1):s.push(null);let i=new t.default([],e.tensor.shape),n=new t.default([],e.tensor.shape);for(let t=0;t<e.tensor.shape[this.axis];t++)s[this.axis]=t,this.scale&&a.default.assigns(i.tensor.pick(...s),this.weights.gamma.tensor.get(t)),this.center&&a.default.assigns(n.tensor.pick(...s),this.weights.beta.tensor.get(t));let r=new t.default([],e.tensor.shape),o=new t.default([],e.tensor.shape);for(let t=0;t<e.tensor.shape[this.axis];t++)s[this.axis]=t,a.default.assigns(r.tensor.pick(...s),this.weights.moving_mean.tensor.get(t)),a.default.assigns(o.tensor.pick(...s),this.weights.moving_variance.tensor.get(t)+this.epsilon);a.default.sqrteq(o.tensor),this.output=new t.default(e.tensor.data,e.tensor.shape),a.default.subeq(this.output.tensor,r.tensor),a.default.diveq(this.output.tensor,o.tensor),this.scale&&a.default.muleq(this.output.tensor,i.tensor),this.center&&a.default.addeq(this.output.tensor,n.tensor)}_createIndexMap(e,s){if(this.normAxisIndexMap)return;const i=new t.default([],this.inputShape,{type:Int32Array});this.normAxisIndexMap=new t.default([],e,{type:Int32Array});const n=Array(this.inputShape.length).fill(null);for(let e=0;e<this.inputShape[this.axis];e++)n[this.axis]=e,a.default.assigns(i.tensor.pick(...n),e);if(s)for(let e=0;e<s.data.length;e++)this.normAxisIndexMap.tensor.data[s.data[e]]=i.tensor.data[e];else this.normAxisIndexMap=i;this.normAxisIndexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}_callGPU(e){this.axisNormalized||(e.is2DReshaped||e.is2DSquareReshaped?this.inputShape=e.originalShape:this.inputShape=e.tensor.shape,this.axis=this.axis<0?this.inputShape.length+this.axis:this.axis-1,this.axisNormalized=!0),e.glTexture||e.glTextureFragments||(e.tensor.shape.length<=2?e.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}):e.tensor.shape.length>2&&!e.is2DReshaped&&(e.reshapeTo2DSquare(),e.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}))),this._createIndexMap(e.glTextureShape,e.indicesForReshaped),this.output||(this.output=new t.default([],e.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),e.is1D?this.output.is1D=e.is1D:(e.is2DReshaped||e.is2DSquareReshaped)&&(e.is2DReshaped?this.output.is2DReshaped=e.is2DReshaped:e.is2DSquareReshaped&&(this.output.is2DSquareReshaped=e.is2DSquareReshaped),this.output.originalShape=e.originalShape,this.output.indicesForReshaped=e.indicesForReshaped));const a=[{input:e,name:"X"},{input:this.normAxisIndexMap,name:"normAxisIndexMap"}];this.scale&&a.push({input:this.weights.gamma,name:"gamma"}),this.center&&a.push({input:this.weights.beta,name:"beta"}),a.push({input:this.weights.moving_mean,name:"mean"}),a.push({input:this.weights.moving_variance,name:"std"});const i=[{value:this.epsilon,type:"float",name:"epsilon"},{value:+this.scale,type:"bool",name:"scale"},{value:+this.center,type:"bool",name:"center"}];s.webgl2.runProgram({program:this.program,output:this.output,inputs:a,uniforms:i,supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=r;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],52:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BatchNormalization",{enumerable:!0,get:function(){return e.default}});var e=t(require("./BatchNormalization"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./BatchNormalization":114}],445:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../../Layer")),e=i(require("../../Tensor")),n=require("../../WebGL2"),o=i(require("ndarray-ops"));function i(t){return t&&t.__esModule?t:{default:t}}const s="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(textureSize(poolIndexMap, 0)[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    if (poolIndex != -1) {\n      float val2 = texelFetch(x, ivec2(out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n",a="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 inputSize = textureSize(x, 0);\n  ivec2 outputSize = textureSize(poolIndexMap, 0);\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(outputSize[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    int fragmentIndex = int(floor(float(poolIndex) / float(inputSize[1])));\n    if (poolIndex != -1) {\n      poolIndex = int(mod(float(poolIndex), float(inputSize[1])));\n      float val2 = texelFetch(x, ivec2(fragmentIndex * channels + out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n";class l extends t.default{constructor(t={}){super(t),this.layerClass="_Pooling1D";const{pool_size:e=2,strides:o=null,padding:i="valid"}=t;this.poolSize=e,this.strides=null===o?this.poolSize:o,this.padding=i,this.poolingFunc="max",this.description=`pool size ${this.poolSize}`,this.description+=this.strides>1?`, striding ${this.strides} striding`:"",this.description+="valid"===this.padding?", no border padding":", pad to same borders",this.gpu&&(this.poolingProgram=n.webgl2.compileProgram(s),this.poolingFragmentsProgram=n.webgl2.compileProgram(a))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){const n="valid"===this.padding?Math.floor((t.tensor.shape[0]-this.poolSize+this.strides)/this.strides):Math.floor((t.tensor.shape[0]+this.strides-1)/this.strides);this.output=new e.default([],[n,t.tensor.shape[1]]);const i=new e.default([],[t.tensor.shape[1]]);let s="valid"===this.padding?0:Math.min(0,Math.ceil((t.tensor.shape[0]-(n-1)*this.strides-this.poolSize)/2));for(let e=0;e<n;e++){let n=Math.max(0,s),a=this.poolSize+Math.min(0,s);o.default.assign(i.tensor,t.tensor.pick(n,null));let l=1;for(let e=1;e<a&&!(n+e>t.tensor.shape[0]-1);e++)"max"===this.poolingFunc?o.default.maxeq(i.tensor,t.tensor.pick(n+e,null)):"average"===this.poolingFunc&&o.default.addeq(i.tensor,t.tensor.pick(n+e,null)),l+=1;"average"===this.poolingFunc&&o.default.divseq(i.tensor,l),o.default.assign(this.output.tensor.pick(e,null),i.tensor),s+=this.strides}}_createIndexMap(){if(this.poolIndexMap)return;const t="valid"===this.padding?Math.floor((this.inputShape[0]-this.poolSize+this.strides)/this.strides):Math.floor((this.inputShape[0]+this.strides-1)/this.strides);this.outputShape=[t,this.inputShape[1]],this.poolIndexMap=new e.default([],[t,this.poolSize],{type:Int32Array}),o.default.assigns(this.poolIndexMap.tensor,-1);let n="valid"===this.padding?0:Math.min(0,Math.ceil((this.inputShape[0]-(t-1)*this.strides-this.poolSize)/2));for(let e=0;e<t;e++){let t=Math.max(0,n),o=this.poolSize+Math.min(0,n),i=t;this.poolIndexMap.tensor.set(e,0,i);for(let n=1;n<o&&(i=t+n)<=this.inputShape[0]-1;n++)this.poolIndexMap.tensor.set(e,n,i);n+=this.strides}this.poolIndexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}_callGPU(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.inputShape=t.tensor.shape,this._createIndexMap(),this.output||(this.output=new e.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}));const o="max"===this.poolingFunc,i=[{value:this.output.glTextureShape[1],type:"int",name:"channels"},{value:this.poolSize,type:"int",name:"poolSize"},{value:+o,type:"bool",name:"isMaxPooling"}];t.glTextureFragments?(t.convert2DRowFragmentedGLTextureToColStack(),n.webgl2.runProgram({program:this.poolingFragmentsProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:i,supportsTextureFragments:!0}),t.removeGLTextureFragmentsAsColStack()):n.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:i,supportsTextureFragments:!0}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=l;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],118:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./_Pooling1D"));function t(e){return e&&e.__esModule?e:{default:e}}class o extends e.default{constructor(e={}){super(e),this.layerClass="MaxPooling1D",this.poolingFunc="max"}}exports.default=o;
},{"./_Pooling1D":445}],359:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../Layer")),e=a(require("../../Tensor")),n=require("../../WebGL2"),o=s(require("../../utils/tensorUtils")),i=a(require("ndarray-ops"));function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};o.get||o.set?Object.defineProperty(e,n,o):e[n]=t[n]}return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}const r="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(textureSize(poolIndexMap, 0)[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    if (poolIndex != -1) {\n      float val2 = texelFetch(x, ivec2(out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n",l="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 inputSize = textureSize(x, 0);\n  ivec2 outputSize = textureSize(poolIndexMap, 0);\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(outputSize[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    int fragmentIndex = int(floor(float(poolIndex) / float(inputSize[1])));\n    if (poolIndex != -1) {\n      poolIndex = int(mod(float(poolIndex), float(inputSize[1])));\n      float val2 = texelFetch(x, ivec2(fragmentIndex * channels + out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n";class p extends t.default{constructor(t={}){super(t),this.layerClass="_Pooling2D";const{pool_size:e=[2,2],strides:o=null,padding:i="valid",data_format:s="channels_last"}=t;Array.isArray(e)?this.poolSize=e:this.poolSize=[e,e],Array.isArray(o)?this.strides=o:this.strides=null!==o?[o,o]:this.poolSize,this.padding=i,this.dataFormat=s,this.poolingFunc="max",this.description=`pool size ${this.poolSize.join("x")}`,this.description+=this.strides.some(t=>t>1)?`, ${this.strides.join("x")} striding`:"",this.description+="valid"===this.padding?", no border padding":", pad to same borders",this.gpu&&(this.poolingProgram=n.webgl2.compileProgram(r),this.poolingFragmentsProgram=n.webgl2.compileProgram(l))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_calcOutputShape(t){if(this.outputShape&&this.inputPadding)return;const[e,n,o]=t,[i,s]=this.poolSize,a="same"===this.padding?Math.floor((e+this.strides[0]-1)/this.strides[0]):Math.floor((e-i+this.strides[0])/this.strides[0]),r="same"===this.padding?Math.floor((n+this.strides[1]-1)/this.strides[1]):Math.floor((n-s+this.strides[1])/this.strides[1]),l="same"===this.padding?Math.max(0,Math.floor((a-1)*this.strides[0]+i-e)):0,p="same"===this.padding?Math.max(0,Math.floor((r-1)*this.strides[1]+s-n)):0,u=Math.floor(l/2),h=l-u,d=Math.floor(p/2),c=p-d;this.outputShape=[a,r,o],this.inputPadding=[u,h,d,c]}_padInput(t){if("same"===this.padding){const[n,o,s]=t.tensor.shape,[a,r,l,p]=this.inputPadding,u=n+a+r,h=o+l+p,d=new e.default([],[u,h,s]);return"max"===this.poolingFunc&&i.default.assigns(d.tensor,Number.NEGATIVE_INFINITY),i.default.assign(d.tensor.hi(n+a,o+l,s).lo(a,l,0),t.tensor),d}return t}_callCPU(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this._calcOutputShape(t.tensor.shape),t=this._padInput(t);const[n,o,s]=t.tensor.shape,[a,r]=this.poolSize;this.output=new e.default([],this.outputShape);const l=new e.default([],[a,r,s]),[p,u,h,d]=this.inputPadding;for(let e=0,c=0;e<=n-a;e+=this.strides[0],c++){let f=0;e<p?f=p-e:e+a>n-u&&(f=e+a-(n-u));for(let n=0,p=0;n<=o-r;n+=this.strides[1],p++){let u=0;n<h?u=h-n:n+r>o-d&&(u=n+r-(o-d));const x=(a-f)*(r-u);i.default.assign(l.tensor,t.tensor.hi(e+a,n+r,s).lo(e,n,0));for(let t=0;t<s;t++)"max"===this.poolingFunc?this.output.tensor.set(c,p,t,i.default.sup(l.tensor.pick(null,null,t))):"average"===this.poolingFunc&&this.output.tensor.set(c,p,t,i.default.sum(l.tensor.pick(null,null,t))/x)}}"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1))}_im2col(t){const[n,o,s]=t.tensor.shape;this.tiledInput||(this.tiledInput=new e.default([],[n*o,s]));const a=new e.default([],[n,o]),r=new e.default([],[n*o]);for(let e=0;e<s;e++)i.default.assign(a.tensor,t.tensor.pick(null,null,e)),r.replaceTensorData(a.tensor.data),i.default.assign(this.tiledInput.tensor.pick(null,e),r.tensor);return this.tiledInput}_createIndexMap(){if(this.poolIndexMap)return;let t=this.inputShape[0],n=this.inputShape[1];const o=new e.default([],[t,n]);let s=0;for(let e=0;e<t;e++)for(let t=0;t<n;t++)o.tensor.set(e,t,s),s+=1;if("same"===this.padding){const[s,a,r,l]=this.inputPadding;t=t+s+a,n=n+r+l;const p=new e.default([],[t,n]);i.default.assigns(p.tensor,-1),i.default.assign(p.tensor.hi(this.inputShape[0]+s,this.inputShape[1]+r).lo(s,r),o.tensor),o.tensor=p.tensor}const[a,r]=this.poolSize,l=this.outputShape[0],p=this.outputShape[1];this.poolIndexMap=new e.default([],[l*p,a*r],{type:Int32Array});const u=new e.default([],[a,r]);let h=0;for(let e=0,s=t-a;e<=s;e+=this.strides[0])for(let t=0,s=n-r;t<=s;t+=this.strides[1])i.default.assign(u.tensor,o.tensor.hi(e+a,t+r).lo(e,t)),this.poolIndexMap.tensor.data.set(u.tensor.data,h),h+=a*r;this.poolIndexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}_callGPU(t){if(t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:("channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this.inputShape=t.tensor.shape,this._im2col(t),this.tiledInput.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0})),this._calcOutputShape(this.inputShape),this._createIndexMap(),!this.output){const[t,n,i]=this.outputShape,s=[t*n,i];this.output=new e.default([],s),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this.outputShape,this.output.indicesForReshaped=o.createIndicesFor2DReshaped(this.outputShape,!1,-1)}const i=t.is2DReshaped||t.is2DSquareReshaped?t:this.tiledInput,s=this.poolSize[0]*this.poolSize[1],a="max"===this.poolingFunc,r=[{value:this.output.glTextureShape[1],type:"int",name:"channels"},{value:s,type:"int",name:"poolSize"},{value:+a,type:"bool",name:"isMaxPooling"}];i.glTextureFragments?(i.convert2DRowFragmentedGLTextureToColStack(),n.webgl2.runProgram({program:this.poolingFragmentsProgram,output:this.output,inputs:[{input:i,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:r,supportsTextureFragments:!0}),i.removeGLTextureFragmentsAsColStack()):n.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:i,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:r,supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1)))}}exports.default=p;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"../../utils/tensorUtils":29,"ndarray-ops":18}],119:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./_Pooling2D"));function t(e){return e&&e.__esModule?e:{default:e}}class o extends e.default{constructor(e={}){super(e),this.layerClass="MaxPooling2D",this.poolingFunc="max"}}exports.default=o;
},{"./_Pooling2D":359}],360:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../Layer")),e=a(require("../../Tensor")),n=require("../../WebGL2"),o=s(require("../../utils/tensorUtils")),i=a(require("ndarray-ops"));function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};o.get||o.set?Object.defineProperty(e,n,o):e[n]=t[n]}return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}const r="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(textureSize(poolIndexMap, 0)[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    if (poolIndex != -1) {\n      float val2 = texelFetch(x, ivec2(out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n",l="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 inputSize = textureSize(x, 0);\n  ivec2 outputSize = textureSize(poolIndexMap, 0);\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(outputSize[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    int fragmentIndex = int(floor(float(poolIndex) / float(inputSize[1])));\n    if (poolIndex != -1) {\n      poolIndex = int(mod(float(poolIndex), float(inputSize[1])));\n      float val2 = texelFetch(x, ivec2(fragmentIndex * channels + out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n";class p extends t.default{constructor(t={}){super(t),this.layerClass="_Pooling3D";const{pool_size:e=[2,2,2],strides:o=null,padding:i="valid",data_format:s="channels_last"}=t;Array.isArray(e)?this.poolSize=e:this.poolSize=[e,e,e],Array.isArray(o)?this.strides=o:this.strides=null!==o?[o,o,o]:this.poolSize,this.padding=i,this.dataFormat=s,this.poolingFunc="max",this.description=`pool size ${this.poolSize.join("x")}`,this.description+=this.strides.some(t=>t>1)?`, ${this.strides.join("x")} striding`:"",this.description+="valid"===this.padding?", no border padding":", pad to same borders",this.gpu&&(this.poolingProgram=n.webgl2.compileProgram(r),this.poolingFragmentsProgram=n.webgl2.compileProgram(l))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_calcOutputShape(t){if(this.outputShape&&this.inputPadding)return;const[e,n,o,i]=t,[s,a,r]=this.poolSize,l="same"===this.padding?Math.floor((e+this.strides[0]-1)/this.strides[0]):Math.floor((e-s+this.strides[0])/this.strides[0]),p="same"===this.padding?Math.floor((n+this.strides[1]-1)/this.strides[1]):Math.floor((n-a+this.strides[1])/this.strides[1]),u="same"===this.padding?Math.floor((o+this.strides[2]-1)/this.strides[2]):Math.floor((o-r+this.strides[2])/this.strides[2]),h="same"===this.padding?Math.max(0,Math.floor((l-1)*this.strides[0]+s-e)):0,d="same"===this.padding?Math.max(0,Math.floor((p-1)*this.strides[1]+a-n)):0,f="same"===this.padding?Math.max(0,Math.floor((u-1)*this.strides[2]+r-o)):0,c=Math.floor(h/2),x=h-c,g=Math.floor(d/2),m=d-g,v=Math.floor(f/2),S=f-v;this.outputShape=[l,p,u,i],this.inputPadding=[c,x,g,m,v,S]}_padInput(t){if("same"===this.padding){const[n,o,s,a]=t.tensor.shape,[r,l,p,u,h,d]=this.inputPadding,f=n+r+l,c=o+p+u,x=s+h+d,g=new e.default([],[f,c,x,a]);return"max"===this.poolingFunc&&i.default.assigns(g.tensor,Number.NEGATIVE_INFINITY),i.default.assign(g.tensor.hi(n+r,o+p,s+h,a).lo(r,p,h,0),t.tensor),g}return t}_callCPU(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this._calcOutputShape(t.tensor.shape),t=this._padInput(t);const[n,o,s,a]=t.tensor.shape,[r,l,p]=this.poolSize;this.output=new e.default([],this.outputShape);let u=new e.default([],[r,l,p,a]);const[h,d,f,c,x,g]=this.inputPadding;for(let e=0,m=0;e<=n-r;e+=this.strides[0],m++){let v=0;e<h?v=h-e:e+r>n-d&&(v=e+r-(n-d));for(let n=0,h=0;n<=o-l;n+=this.strides[1],h++){let d=0;n<f?d=f-n:n+l>o-c&&(d=n+l-(o-c));for(let o=0,f=0;o<=s-p;o+=this.strides[2],f++){let c=0;o<x?c=x-o:o+p>s-g&&(c=o+p-(s-g));const S=(r-v)*(l-d)*(p-c);i.default.assign(u.tensor,t.tensor.hi(e+r,n+l,o+p,a).lo(e,n,o,0));for(let t=0;t<a;t++)"max"===this.poolingFunc?this.output.tensor.set(m,h,f,t,i.default.sup(u.tensor.pick(null,null,null,t))):"average"===this.poolingFunc&&this.output.tensor.set(m,h,f,t,i.default.sum(u.tensor.pick(null,null,null,t))/S)}}}"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(3,0,1,2))}_vol2col(t){const[n,o,s,a]=t.tensor.shape;this.tiledInput||(this.tiledInput=new e.default([],[n*o*s,a]));const r=new e.default([],[n,o,s]),l=new e.default([],[n*o*s]);for(let e=0;e<a;e++)i.default.assign(r.tensor,t.tensor.pick(null,null,null,e)),l.replaceTensorData(r.tensor.data),i.default.assign(this.tiledInput.tensor.pick(null,e),l.tensor);return this.tiledInput}_createIndexMap(){if(this.poolIndexMap)return;let t=this.inputShape[0],n=this.inputShape[1],o=this.inputShape[2];const s=new e.default([],[t,n,o]);let a=0;for(let e=0;e<t;e++)for(let t=0;t<n;t++)for(let n=0;n<o;n++)s.tensor.set(e,t,n,a),a+=1;if("same"===this.padding){const[a,r,l,p,u,h]=this.inputPadding;t=t+a+r,n=n+l+p,o=o+u+h;const d=new e.default([],[t,n,o]);i.default.assigns(d.tensor,-1),i.default.assign(d.tensor.hi(this.inputShape[0]+a,this.inputShape[1]+l,this.inputShape[2]+u).lo(a,l,u),s.tensor),s.tensor=d.tensor}const[r,l,p]=this.poolSize,u=this.outputShape[0],h=this.outputShape[1],d=this.outputShape[2];this.poolIndexMap=new e.default([],[u*h*d,r*l*p],{type:Int32Array});const f=new e.default([],[r,l,p]);let c=0;for(let e=0,a=t-r;e<=a;e+=this.strides[0])for(let t=0,a=n-l;t<=a;t+=this.strides[1])for(let n=0,a=o-p;n<=a;n+=this.strides[2])i.default.assign(f.tensor,s.tensor.hi(e+r,t+l,n+p).lo(e,t,n)),this.poolIndexMap.tensor.data.set(f.tensor.data,c),c+=r*l*p;this.poolIndexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}_callGPU(t){if(t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:("channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this.inputShape=t.tensor.shape,this._vol2col(t),this.tiledInput.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0})),this._calcOutputShape(this.inputShape),this._createIndexMap(),!this.output){const[t,n,i,s]=this.outputShape,a=[t*n*i,s];this.output=new e.default([],a),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this.outputShape,this.output.indicesForReshaped=o.createIndicesFor2DReshaped(this.outputShape,!1,-1)}const i=t.is2DReshaped||t.is2DSquareReshaped?t:this.tiledInput,s=this.poolSize[0]*this.poolSize[1]*this.poolSize[2],a="max"===this.poolingFunc,r=[{value:this.output.glTextureShape[1],type:"int",name:"channels"},{value:s,type:"int",name:"poolSize"},{value:+a,type:"bool",name:"isMaxPooling"}];i.glTextureFragments?(i.convert2DRowFragmentedGLTextureToColStack(),n.webgl2.runProgram({program:this.poolingFragmentsProgram,output:this.output,inputs:[{input:i,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:r,supportsTextureFragments:!0}),i.removeGLTextureFragmentsAsColStack()):n.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:i,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:r}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(3,0,1,2)))}}exports.default=p;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"../../utils/tensorUtils":29,"ndarray-ops":18}],120:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./_Pooling3D"));function t(e){return e&&e.__esModule?e:{default:e}}class o extends e.default{constructor(e={}){super(e),this.layerClass="MaxPooling3D",this.poolingFunc="max"}}exports.default=o;
},{"./_Pooling3D":360}],121:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./_Pooling1D"));function t(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e={}){super(e),this.layerClass="AveragePooling1D",this.poolingFunc="average"}}exports.default=r;
},{"./_Pooling1D":445}],122:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./_Pooling2D"));function t(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e={}){super(e),this.layerClass="AveragePooling2D",this.poolingFunc="average"}}exports.default=r;
},{"./_Pooling2D":359}],123:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./_Pooling3D"));function t(e){return e&&e.__esModule?e:{default:e}}class r extends e.default{constructor(e={}){super(e),this.layerClass="AveragePooling3D",this.poolingFunc="average"}}exports.default=r;
},{"./_Pooling3D":360}],361:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../Layer")),e=a(require("../../Tensor")),o=require("../../WebGL2"),n=a(require("ndarray-ops"));function a(t){return t&&t.__esModule?t:{default:t}}const i="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int channelDataSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (isMaxPooling) {\n    // GlobalMaxPooling\n    float maxval = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      if (j == 0 || val > maxval) {\n        maxval = val;\n      }\n    }\n    outColor = vec4(maxval);\n  } else {\n    // GlobalAveragePooling\n    float sum = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      sum += val;\n    }\n    outColor = vec4(sum / float(channelDataSize));\n  }\n}\n";class l extends t.default{constructor(t={}){super(t),this.layerClass="_GlobalPooling1D";const{data_format:e="channels_last"}=t;this.dataFormat=e,this.poolingFunc="max",this.gpu&&(this.poolingProgram=o.webgl2.compileProgram(i))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){const[o,a]=t.tensor.shape;this.output=new e.default([],[a]);for(let e=0,i=a;e<i;e++)"max"===this.poolingFunc?this.output.tensor.set(e,n.default.sup(t.tensor.pick(null,e))):"average"===this.poolingFunc&&this.output.tensor.set(e,n.default.sum(t.tensor.pick(null,e))/o)}_callGPU(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.inputShape=t.tensor.shape,this.output||(this.output=new e.default([],[this.inputShape[1]]),this.output.createGLTexture({type:"2d",format:"float"}));const n="max"===this.poolingFunc;o.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.inputShape[0],type:"int",name:"channelDataSize"},{value:+n,type:"bool",name:"isMaxPooling"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=l;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],124:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./_GlobalPooling1D"));function o(e){return e&&e.__esModule?e:{default:e}}class t extends e.default{constructor(e={}){super(e),this.layerClass="GlobalMaxPooling1D",this.poolingFunc="max"}}exports.default=t;
},{"./_GlobalPooling1D":361}],363:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../Layer")),e=a(require("../../Tensor")),n=require("../../WebGL2"),o=a(require("ndarray-ops"));function a(t){return t&&t.__esModule?t:{default:t}}const i="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int channelDataSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (isMaxPooling) {\n    // GlobalMaxPooling\n    float maxval = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      if (j == 0 || val > maxval) {\n        maxval = val;\n      }\n    }\n    outColor = vec4(maxval);\n  } else {\n    // GlobalAveragePooling\n    float sum = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      sum += val;\n    }\n    outColor = vec4(sum / float(channelDataSize));\n  }\n}\n";class s extends t.default{constructor(t={}){super(t),this.layerClass="_GlobalPooling2D";const{data_format:e="channels_last"}=t;this.dataFormat=e,this.poolingFunc="max",this.gpu&&(this.poolingProgram=n.webgl2.compileProgram(i))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0));const[n,a,i]=t.tensor.shape;this.output=new e.default([],[i]);for(let e=0,s=i;e<s;e++)"max"===this.poolingFunc?this.output.tensor.set(e,o.default.sup(t.tensor.pick(null,null,e))):"average"===this.poolingFunc&&this.output.tensor.set(e,o.default.sum(t.tensor.pick(null,null,e))/(n*a))}_callGPU(t){t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:("channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this.inputShape=t.tensor.shape,t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float"})),this.output||(this.output=new e.default([],[this.inputShape[2]]),this.output.createGLTexture({type:"2d",format:"float"}));const o="max"===this.poolingFunc;n.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.inputShape[0]*this.inputShape[1],type:"int",name:"channelDataSize"},{value:+o,type:"bool",name:"isMaxPooling"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=s;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],125:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./_GlobalPooling2D"));function o(e){return e&&e.__esModule?e:{default:e}}class t extends e.default{constructor(e={}){super(e),this.layerClass="GlobalMaxPooling2D",this.poolingFunc="max"}}exports.default=t;
},{"./_GlobalPooling2D":363}],364:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../../Layer")),e=a(require("../../Tensor")),n=require("../../WebGL2"),o=a(require("ndarray-ops"));function a(t){return t&&t.__esModule?t:{default:t}}const i="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int channelDataSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (isMaxPooling) {\n    // GlobalMaxPooling\n    float maxval = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      if (j == 0 || val > maxval) {\n        maxval = val;\n      }\n    }\n    outColor = vec4(maxval);\n  } else {\n    // GlobalAveragePooling\n    float sum = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      sum += val;\n    }\n    outColor = vec4(sum / float(channelDataSize));\n  }\n}\n";class s extends t.default{constructor(t={}){super(t),this.layerClass="_GlobalPooling3D";const{data_format:e="channels_last"}=t;this.dataFormat=e,this.poolingFunc="max",this.gpu&&(this.poolingProgram=n.webgl2.compileProgram(i))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0));const[n,a,i,s]=t.tensor.shape;this.output=new e.default([],[s]);for(let e=0,l=s;e<l;e++)"max"===this.poolingFunc?this.output.tensor.set(e,o.default.sup(t.tensor.pick(null,null,null,e))):"average"===this.poolingFunc&&this.output.tensor.set(e,o.default.sum(t.tensor.pick(null,null,null,e))/(n*a*i))}_callGPU(t){t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:("channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this.inputShape=t.tensor.shape,t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float"})),this.output||(this.output=new e.default([],[this.inputShape[3]]),this.output.createGLTexture({type:"2d",format:"float"}));const o="max"===this.poolingFunc;n.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.inputShape[0]*this.inputShape[1]*this.inputShape[2],type:"int",name:"channelDataSize"},{value:+o,type:"bool",name:"isMaxPooling"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=s;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18}],126:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./_GlobalPooling3D"));function o(e){return e&&e.__esModule?e:{default:e}}class t extends e.default{constructor(e={}){super(e),this.layerClass="GlobalMaxPooling3D",this.poolingFunc="max"}}exports.default=t;
},{"./_GlobalPooling3D":364}],127:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./_GlobalPooling1D"));function o(e){return e&&e.__esModule?e:{default:e}}class t extends e.default{constructor(e={}){super(e),this.layerClass="GlobalAveragePooling1D",this.poolingFunc="average"}}exports.default=t;
},{"./_GlobalPooling1D":361}],128:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./_GlobalPooling2D"));function o(e){return e&&e.__esModule?e:{default:e}}class t extends e.default{constructor(e={}){super(e),this.layerClass="GlobalAveragePooling2D",this.poolingFunc="average"}}exports.default=t;
},{"./_GlobalPooling2D":363}],129:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./_GlobalPooling3D"));function o(e){return e&&e.__esModule?e:{default:e}}class t extends e.default{constructor(e={}){super(e),this.layerClass="GlobalAveragePooling3D",this.poolingFunc="average"}}exports.default=t;
},{"./_GlobalPooling3D":364}],53:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"MaxPooling1D",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"MaxPooling2D",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"MaxPooling3D",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"AveragePooling1D",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"AveragePooling2D",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"AveragePooling3D",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"GlobalMaxPooling1D",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"GlobalMaxPooling2D",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"GlobalMaxPooling3D",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"GlobalAveragePooling1D",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"GlobalAveragePooling2D",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"GlobalAveragePooling3D",{enumerable:!0,get:function(){return b.default}});var e=P(require("./MaxPooling1D")),r=P(require("./MaxPooling2D")),o=P(require("./MaxPooling3D")),t=P(require("./AveragePooling1D")),n=P(require("./AveragePooling2D")),l=P(require("./AveragePooling3D")),u=P(require("./GlobalMaxPooling1D")),a=P(require("./GlobalMaxPooling2D")),i=P(require("./GlobalMaxPooling3D")),g=P(require("./GlobalAveragePooling1D")),f=P(require("./GlobalAveragePooling2D")),b=P(require("./GlobalAveragePooling3D"));function P(e){return e&&e.__esModule?e:{default:e}}
},{"./MaxPooling1D":118,"./MaxPooling2D":119,"./MaxPooling3D":120,"./AveragePooling1D":121,"./AveragePooling2D":122,"./AveragePooling3D":123,"./GlobalMaxPooling1D":124,"./GlobalMaxPooling2D":125,"./GlobalMaxPooling3D":126,"./GlobalAveragePooling1D":127,"./GlobalAveragePooling2D":128,"./GlobalAveragePooling3D":129}],134:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("../../activations")),e=u(require("../../Tensor")),i=u(require("../../Layer")),n=require("../../WebGL2"),r=require("ndarray-blas-level2"),s=u(require("ndarray-ops")),a=u(require("cwise")),o=c(require("../../activations/programSources"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}return e.default=t,e}const h="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D source;\nout vec4 outColor;\n\nvoid main(void) {\n  outColor = texture(source, vec2(outTex.x, outTex.y));\n}\n",l="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D t1;\nuniform sampler2D t2;\nuniform sampler2D bias;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(bias, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float t1_val = texelFetch(t1, ivec2(out_x, out_y), 0).r;\n  float t2_val = texelFetch(t2, ivec2(out_x, out_y), 0).r;\n  float bias_val = texelFetch(bias, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(t1_val + t2_val + bias_val);\n}\n",p="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n\n  outColor = vec4(texelFetch(x, ivec2(out_x, index), 0).r);\n}\n",m="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform sampler2D y;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(y, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (out_y == index) {\n    outColor = vec4(texelFetch(x, ivec2(out_x, 0), 0).r);\n  } else {\n    outColor = vec4(texelFetch(y, ivec2(out_x, out_y), 0).r);\n  }\n}\n";class f extends i.default{constructor(e={}){super(e),Object.defineProperty(this,"_combine",{configurable:!0,enumerable:!0,writable:!0,value:(0,a.default)({args:["array","array","array","array"],body:function(t,e,i,n){e+i+n}})}),this.layerClass="SimpleRNN";const{units:i=1,activation:r="tanh",use_bias:s=!0,return_sequences:u=!1,go_backwards:c=!1,stateful:f=!1}=e;this.units=i,this.activation=r,this.activationFunc=t[r],this.use_bias=s,this.returnSequences=u,this.goBackwards=c,this.stateful=f,this.params=this.use_bias?["kernel","recurrent_kernel","bias"]:["kernel","recurrent_kernel"],this.description=`output dimensions: ${this.units}`,this.description+="linear"!==this.activation?`, ${this.activation} activation`:"",this.description+=this.returnSequences?", return sequences":"",this.description+=this.goBackwards?", backward direction":"",this.description+=this.stateful?", stateful":"",this.gpu&&(this.copyTextureProgram=n.webgl2.compileProgram(h),this.matMulProgram=n.webgl2.compileProgram(l),this.activationProgram=n.webgl2.compileProgram(o[this.activation]),this.gateSummationProgram=n.webgl2.compileProgram(d),this.timestepReadProgram=n.webgl2.compileProgram(p),this.timestepWriteProgram=n.webgl2.compileProgram(m))}setWeights(t){super.setWeights(t),this.use_bias||(this.weights.bias=new e.default([],[this.units]),this.gpu&&this.weights.bias.createGLTexture({type:"2d",format:"float"}))}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){const i=this.units,n=this.stateful&&this.currentHiddenState?this.currentHiddenState:new e.default([],[i]),a=new e.default([],[i]),o=new e.default([],[i]),u=new e.default([],[i]);this.hiddenStateSequence=new e.default([],[t.tensor.shape[0],i]);const c=new e.default([],[t.tensor.shape[1]]),h=()=>{s.default.assign(u.tensor,n.tensor),(0,r.gemv)(1,this.weights.kernel.tensor.transpose(1,0),c.tensor,1,a.tensor),(0,r.gemv)(1,this.weights.recurrent_kernel.tensor.transpose(1,0),u.tensor,1,o.tensor),this._combine(n.tensor,a.tensor,o.tensor,this.weights.bias.tensor),this.activationFunc(n)};for(let e=0,i=t.tensor.shape[0];e<i;e++){const r=this.goBackwards?i-e-1:e;s.default.assign(c.tensor,t.tensor.pick(r,null)),[a,o].forEach(t=>s.default.assigns(t.tensor,0)),h(),this.returnSequences&&s.default.assign(this.hiddenStateSequence.tensor.pick(e,null),n.tensor)}this.returnSequences?this.output=this.hiddenStateSequence:this.output=n,this.stateful&&(this.currentHiddenState=n)}_stepGPU(){n.webgl2.runProgram({program:this.copyTextureProgram,output:this.previousHiddenState,inputs:[{input:this.currentHiddenState,name:"source"}]}),n.webgl2.runProgram({program:this.matMulProgram,output:this.tempXH,inputs:[{input:this.currentX,name:"A"},{input:this.weights.kernel,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),n.webgl2.runProgram({program:this.matMulProgram,output:this.tempHH,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.recurrent_kernel,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),n.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentHiddenStatePreactiv,inputs:[{input:this.tempXH,name:"t1"},{input:this.tempHH,name:"t2"},{input:this.weights.bias,name:"bias"}]}),"linear"!==this.activation?n.webgl2.runProgram({program:this.activationProgram,output:this.currentHiddenState,inputs:[{input:this.currentHiddenStatePreactiv,name:"x"}]}):this.currentHiddenState=this.currentHiddenStatePreactiv}_callGPU(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"});const i=this.units;this.currentHiddenState&&this.stateful||(this.currentHiddenState=new e.default([],[i]),this.currentHiddenState.createGLTexture({type:"2d",format:"float"})),this.currentHiddenStatePreactiv||(this.currentHiddenStatePreactiv=new e.default([],[i]),this.currentHiddenStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXH||(this.tempXH=new e.default([],[i]),this.tempXH.createGLTexture({type:"2d",format:"float"})),this.tempHH||(this.tempHH=new e.default([],[i]),this.tempHH.createGLTexture({type:"2d",format:"float"})),this.previousHiddenState||(this.previousHiddenState=new e.default([],[i]),this.previousHiddenState.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequence||(this.hiddenStateSequence=new e.default([],[t.glTextureShape[0],i]),this.hiddenStateSequence.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequenceCopy||(this.hiddenStateSequenceCopy=new e.default([],[t.glTextureShape[0],i]),this.hiddenStateSequenceCopy.createGLTexture({type:"2d",format:"float"})),this.currentX||(this.currentX=new e.default([],[t.glTextureShape[1]]),this.currentX.createGLTexture({type:"2d",format:"float"}));for(let e=0,i=t.glTextureShape[0];e<i;e++){const r=this.goBackwards?i-e-1:e;n.webgl2.runProgram({program:this.timestepReadProgram,output:this.currentX,inputs:[{input:t,name:"x"}],uniforms:[{value:r,type:"int",name:"index"}]}),this._stepGPU(),this.returnSequences&&(n.webgl2.runProgram({program:this.copyTextureProgram,output:this.hiddenStateSequenceCopy,inputs:[{input:this.hiddenStateSequence,name:"source"}]}),n.webgl2.runProgram({program:this.timestepWriteProgram,output:this.hiddenStateSequence,inputs:[{input:this.currentHiddenState,name:"x"},{input:this.hiddenStateSequenceCopy,name:"y"}],uniforms:[{value:e,type:"int",name:"index"}]}))}this.returnSequences?this.output=this.hiddenStateSequence:this.output=this.currentHiddenState,0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=f;
},{"../../activations":23,"../../Tensor":20,"../../Layer":57,"../../WebGL2":21,"ndarray-blas-level2":356,"ndarray-ops":18,"cwise":61,"../../activations/programSources":338}],135:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../../activations")),e=o(require("../../Tensor")),i=o(require("../../Layer")),r=require("../../WebGL2"),n=require("ndarray-blas-level2"),s=o(require("ndarray-ops")),a=o(require("cwise")),u=h(require("../../activations/programSources"));function o(t){return t&&t.__esModule?t:{default:t}}function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};r.get||r.set?Object.defineProperty(e,i,r):e[i]=t[i]}return e.default=t,e}const c="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D source;\nout vec4 outColor;\n\nvoid main(void) {\n  outColor = texture(source, vec2(outTex.x, outTex.y));\n}\n",p="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",l="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D t1;\nuniform sampler2D t2;\nuniform sampler2D bias;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(bias, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float t1_val = texelFetch(t1, ivec2(out_x, out_y), 0).r;\n  float t2_val = texelFetch(t2, ivec2(out_x, out_y), 0).r;\n  float bias_val = texelFetch(bias, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(t1_val + t2_val + bias_val);\n}\n",m="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D t1;\nuniform sampler2D t2;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(t1, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float t1_val = texelFetch(t1, ivec2(out_x, out_y), 0).r;\n  float t2_val = texelFetch(t2, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(t1_val * t2_val);\n}\n",d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n\n  outColor = vec4(texelFetch(x, ivec2(out_x, index), 0).r);\n}\n",g="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform sampler2D y;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(y, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (out_y == index) {\n    outColor = vec4(texelFetch(x, ivec2(out_x, 0), 0).r);\n  } else {\n    outColor = vec4(texelFetch(y, ivec2(out_x, out_y), 0).r);\n  }\n}\n",f="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D c;\nuniform sampler2D ctm1;\nuniform sampler2D i;\nuniform sampler2D f;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(c, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float c_val = texelFetch(c, ivec2(out_x, out_y), 0).r;\n  float ctm1_val = texelFetch(ctm1, ivec2(out_x, out_y), 0).r;\n  float i_val = texelFetch(i, ivec2(out_x, out_y), 0).r;\n  float f_val = texelFetch(f, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(c_val * i_val + ctm1_val * f_val);\n}\n";class v extends i.default{constructor(e={}){super(e),Object.defineProperty(this,"_combine",{configurable:!0,enumerable:!0,writable:!0,value:(0,a.default)({args:["array","array","array","array"],body:function(t,e,i,r){e+i+r}})}),Object.defineProperty(this,"_update",{configurable:!0,enumerable:!0,writable:!0,value:(0,a.default)({args:["array","array","array","array"],body:function(t,e,i,r){t=t*i+e*r}})}),this.layerClass="LSTM";const{units:i=1,activation:n="tanh",use_bias:s=!0,recurrent_activation:o="hard_sigmoid",return_sequences:h=!1,go_backwards:v=!1,stateful:w=!1}=e;this.units=i,this.activation=n,this.recurrentActivation=o,this.activationFunc=t[n],this.recurrentActivationFunc=t[o],this.use_bias=s,this.returnSequences=h,this.goBackwards=v,this.stateful=w,this.params=this.use_bias?["kernel","recurrent_kernel","bias"]:["kernel","recurrent_kernel"],this.description=`output dimensions: ${this.units}`,this.description+="linear"!==this.activation?`, ${this.activation} activation`:"",this.description+="linear"!==this.recurrentActivation?`, ${this.recurrentActivation} recurrent activation`:"",this.description+=this.returnSequences?", return sequences":"",this.description+=this.goBackwards?", backward direction":"",this.description+=this.stateful?", stateful":"",this.gpu&&(this.copyTextureProgram=r.webgl2.compileProgram(c),this.matMulProgram=r.webgl2.compileProgram(p),this.activationProgram=r.webgl2.compileProgram(u[this.activation]),this.recurrentActivationProgram=r.webgl2.compileProgram(u[this.recurrentActivation]),this.gateSummationProgram=r.webgl2.compileProgram(l),this.gateProductProgram=r.webgl2.compileProgram(m),this.timestepReadProgram=r.webgl2.compileProgram(d),this.timestepWriteProgram=r.webgl2.compileProgram(g),this.updateProgram=r.webgl2.compileProgram(f))}setWeights(t){super.setWeights(t);const i=this.weights.kernel.tensor.shape;this.weights.W_i=new e.default([],[i[0],this.units]),this.weights.W_f=new e.default([],[i[0],this.units]),this.weights.W_c=new e.default([],[i[0],this.units]),this.weights.W_o=new e.default([],[i[0],this.units]),s.default.assign(this.weights.W_i.tensor,this.weights.kernel.tensor.hi(i[0],this.units).lo(0,0)),s.default.assign(this.weights.W_f.tensor,this.weights.kernel.tensor.hi(i[0],2*this.units).lo(0,this.units)),s.default.assign(this.weights.W_c.tensor,this.weights.kernel.tensor.hi(i[0],3*this.units).lo(0,2*this.units)),s.default.assign(this.weights.W_o.tensor,this.weights.kernel.tensor.hi(i[0],4*this.units).lo(0,3*this.units));const r=this.weights.recurrent_kernel.tensor.shape;if(this.weights.U_i=new e.default([],[r[0],this.units]),this.weights.U_f=new e.default([],[r[0],this.units]),this.weights.U_c=new e.default([],[r[0],this.units]),this.weights.U_o=new e.default([],[r[0],this.units]),s.default.assign(this.weights.U_i.tensor,this.weights.recurrent_kernel.tensor.hi(r[0],this.units).lo(0,0)),s.default.assign(this.weights.U_f.tensor,this.weights.recurrent_kernel.tensor.hi(r[0],2*this.units).lo(0,this.units)),s.default.assign(this.weights.U_c.tensor,this.weights.recurrent_kernel.tensor.hi(r[0],3*this.units).lo(0,2*this.units)),s.default.assign(this.weights.U_o.tensor,this.weights.recurrent_kernel.tensor.hi(r[0],4*this.units).lo(0,3*this.units)),this.weights.b_i=new e.default([],[this.units]),this.weights.b_f=new e.default([],[this.units]),this.weights.b_c=new e.default([],[this.units]),this.weights.b_o=new e.default([],[this.units]),this.use_bias&&(s.default.assign(this.weights.b_i.tensor,this.weights.bias.tensor.hi(this.units).lo(0)),s.default.assign(this.weights.b_f.tensor,this.weights.bias.tensor.hi(2*this.units).lo(this.units)),s.default.assign(this.weights.b_c.tensor,this.weights.bias.tensor.hi(3*this.units).lo(2*this.units)),s.default.assign(this.weights.b_o.tensor,this.weights.bias.tensor.hi(4*this.units).lo(3*this.units))),this.gpu){["W_i","W_f","W_c","W_o","U_i","U_f","U_c","U_o","b_i","b_f","b_c","b_o"].forEach(t=>{this.weights[t].createGLTexture({type:"2d",format:"float"})})}}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){const i=this.weights.b_i.tensor.shape[0],r=this.weights.b_c.tensor.shape[0],a=this.weights.b_f.tensor.shape[0],u=this.weights.b_o.tensor.shape[0],o=new e.default([],[i]),h=new e.default([],[i]),c=new e.default([],[i]),p=new e.default([],[a]),l=new e.default([],[a]),m=new e.default([],[a]),d=new e.default([],[u]),g=new e.default([],[u]),f=new e.default([],[u]),v=new e.default([],[r]),w=new e.default([],[r]),_=new e.default([],[r]),x=this.stateful&&this.previousCandidate?this.previousCandidate:new e.default([],[r]),b=this.stateful&&this.currentHiddenState?this.currentHiddenState:new e.default([],[r]),P=new e.default([],[r]);this.hiddenStateSequence=new e.default([],[t.tensor.shape[0],r]);const S=new e.default([],[t.tensor.shape[1]]),y=()=>{s.default.assign(P.tensor,b.tensor),(0,n.gemv)(1,this.weights.W_i.tensor.transpose(1,0),S.tensor,1,h.tensor),(0,n.gemv)(1,this.weights.U_i.tensor.transpose(1,0),P.tensor,1,c.tensor),this._combine(o.tensor,h.tensor,c.tensor,this.weights.b_i.tensor),this.recurrentActivationFunc(o),(0,n.gemv)(1,this.weights.W_f.tensor.transpose(1,0),S.tensor,1,l.tensor),(0,n.gemv)(1,this.weights.U_f.tensor.transpose(1,0),P.tensor,1,m.tensor),this._combine(p.tensor,l.tensor,m.tensor,this.weights.b_f.tensor),this.recurrentActivationFunc(p),(0,n.gemv)(1,this.weights.W_o.tensor.transpose(1,0),S.tensor,1,g.tensor),(0,n.gemv)(1,this.weights.U_o.tensor.transpose(1,0),P.tensor,1,f.tensor),this._combine(d.tensor,g.tensor,f.tensor,this.weights.b_o.tensor),this.recurrentActivationFunc(d),(0,n.gemv)(1,this.weights.W_c.tensor.transpose(1,0),S.tensor,1,w.tensor),(0,n.gemv)(1,this.weights.U_c.tensor.transpose(1,0),P.tensor,1,_.tensor),this._combine(v.tensor,w.tensor,_.tensor,this.weights.b_c.tensor),this.activationFunc(v),this._update(v.tensor,x.tensor,o.tensor,p.tensor),s.default.assign(x.tensor,v.tensor),this.activationFunc(v),s.default.mul(b.tensor,d.tensor,v.tensor)};for(let e=0,i=t.tensor.shape[0];e<i;e++){const r=this.goBackwards?i-e-1:e;s.default.assign(S.tensor,t.tensor.pick(r,null)),[h,c,l,m,g,f,w,_].forEach(t=>s.default.assigns(t.tensor,0)),y(),s.default.assign(this.hiddenStateSequence.tensor.pick(e,null),b.tensor)}this.returnSequences?this.output=this.hiddenStateSequence:this.output=b,this.stateful&&(this.previousCandidate=x,this.currentHiddenState=b)}_stepGPU(){r.webgl2.runProgram({program:this.copyTextureProgram,output:this.previousHiddenState,inputs:[{input:this.currentHiddenState,name:"source"}]}),r.webgl2.runProgram({program:this.matMulProgram,output:this.tempXI,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_i,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.matMulProgram,output:this.tempHI,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_i,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentInputGateStatePreactiv,inputs:[{input:this.tempXI,name:"t1"},{input:this.tempHI,name:"t2"},{input:this.weights.b_i,name:"bias"}]}),"linear"!==this.recurrentActivation?r.webgl2.runProgram({program:this.recurrentActivationProgram,output:this.currentInputGateState,inputs:[{input:this.currentInputGateStatePreactiv,name:"x"}]}):this.currentInputGateState=this.currentInputGateStatePreactiv,r.webgl2.runProgram({program:this.matMulProgram,output:this.tempXF,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_f,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.matMulProgram,output:this.tempHF,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_f,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentForgetGateStatePreactiv,inputs:[{input:this.tempXF,name:"t1"},{input:this.tempHF,name:"t2"},{input:this.weights.b_f,name:"bias"}]}),"linear"!==this.recurrentActivation?r.webgl2.runProgram({program:this.recurrentActivationProgram,output:this.currentForgetGateState,inputs:[{input:this.currentForgetGateStatePreactiv,name:"x"}]}):this.currentForgetGateState=this.currentForgetGateStatePreactiv,r.webgl2.runProgram({program:this.matMulProgram,output:this.tempXO,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_o,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.matMulProgram,output:this.tempHO,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_o,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentOutputGateStatePreactiv,inputs:[{input:this.tempXO,name:"t1"},{input:this.tempHO,name:"t2"},{input:this.weights.b_o,name:"bias"}]}),"linear"!==this.recurrentActivation?r.webgl2.runProgram({program:this.recurrentActivationProgram,output:this.currentOutputGateState,inputs:[{input:this.currentOutputGateStatePreactiv,name:"x"}]}):this.currentOutputGateState=this.currentOutputGateStatePreactiv,r.webgl2.runProgram({program:this.matMulProgram,output:this.tempXC,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_c,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.matMulProgram,output:this.tempHC,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_c,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentCandidatePreactiv,inputs:[{input:this.tempXC,name:"t1"},{input:this.tempHC,name:"t2"},{input:this.weights.b_c,name:"bias"}]}),"linear"!==this.activation?r.webgl2.runProgram({program:this.activationProgram,output:this.currentCandidate,inputs:[{input:this.currentCandidatePreactiv,name:"x"}]}):this.currentCandidate=this.currentCandidatePreactiv,r.webgl2.runProgram({program:this.copyTextureProgram,output:this.currentCandidateCopy,inputs:[{input:this.currentCandidate,name:"source"}]}),r.webgl2.runProgram({program:this.updateProgram,output:this.currentCandidate,inputs:[{input:this.currentCandidateCopy,name:"c"},{input:this.previousCandidate,name:"ctm1"},{input:this.currentInputGateState,name:"i"},{input:this.currentForgetGateState,name:"f"}]}),r.webgl2.runProgram({program:this.copyTextureProgram,output:this.previousCandidate,inputs:[{input:this.currentCandidate,name:"source"}]}),r.webgl2.runProgram({program:this.copyTextureProgram,output:this.currentCandidatePreactiv,inputs:[{input:this.currentCandidate,name:"source"}]}),"linear"!==this.activation?r.webgl2.runProgram({program:this.activationProgram,output:this.currentCandidate,inputs:[{input:this.currentCandidatePreactiv,name:"x"}]}):this.currentCandidate=this.currentCandidatePreactiv,r.webgl2.runProgram({program:this.gateProductProgram,output:this.currentHiddenState,inputs:[{input:this.currentOutputGateState,name:"t1"},{input:this.currentCandidate,name:"t2"}]})}_callGPU(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"});const i=this.weights.b_i.glTextureShape[1],n=this.weights.b_c.glTextureShape[1],s=this.weights.b_f.glTextureShape[1],a=this.weights.b_o.glTextureShape[1];this.currentInputGateState||(this.currentInputGateState=new e.default([],[i]),this.currentInputGateState.createGLTexture({type:"2d",format:"float"})),this.currentInputGateStatePreactiv||(this.currentInputGateStatePreactiv=new e.default([],[i]),this.currentInputGateStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXI||(this.tempXI=new e.default([],[i]),this.tempXI.createGLTexture({type:"2d",format:"float"})),this.tempHI||(this.tempHI=new e.default([],[i]),this.tempHI.createGLTexture({type:"2d",format:"float"})),this.currentForgetGateState||(this.currentForgetGateState=new e.default([],[s]),this.currentForgetGateState.createGLTexture({type:"2d",format:"float"})),this.currentForgetGateStatePreactiv||(this.currentForgetGateStatePreactiv=new e.default([],[s]),this.currentForgetGateStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXF||(this.tempXF=new e.default([],[s]),this.tempXF.createGLTexture({type:"2d",format:"float"})),this.tempHF||(this.tempHF=new e.default([],[s]),this.tempHF.createGLTexture({type:"2d",format:"float"})),this.currentOutputGateState||(this.currentOutputGateState=new e.default([],[a]),this.currentOutputGateState.createGLTexture({type:"2d",format:"float"})),this.currentOutputGateStatePreactiv||(this.currentOutputGateStatePreactiv=new e.default([],[a]),this.currentOutputGateStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXO||(this.tempXO=new e.default([],[a]),this.tempXO.createGLTexture({type:"2d",format:"float"})),this.tempHO||(this.tempHO=new e.default([],[a]),this.tempHO.createGLTexture({type:"2d",format:"float"})),this.currentCandidate||(this.currentCandidate=new e.default([],[n]),this.currentCandidate.createGLTexture({type:"2d",format:"float"})),this.currentCandidateCopy||(this.currentCandidateCopy=new e.default([],[n]),this.currentCandidateCopy.createGLTexture({type:"2d",format:"float"})),this.currentCandidatePreactiv||(this.currentCandidatePreactiv=new e.default([],[n]),this.currentCandidatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXC||(this.tempXC=new e.default([],[n]),this.tempXC.createGLTexture({type:"2d",format:"float"})),this.tempHC||(this.tempHC=new e.default([],[n]),this.tempHC.createGLTexture({type:"2d",format:"float"})),this.previousCandidate&&this.stateful||(this.previousCandidate=new e.default([],[n]),this.previousCandidate.createGLTexture({type:"2d",format:"float"})),this.currentHiddenState&&this.stateful||(this.currentHiddenState=new e.default([],[n]),this.currentHiddenState.createGLTexture({type:"2d",format:"float"})),this.previousHiddenState||(this.previousHiddenState=new e.default([],[n]),this.previousHiddenState.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequence||(this.hiddenStateSequence=new e.default([],[t.glTextureShape[0],n]),this.hiddenStateSequence.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequenceCopy||(this.hiddenStateSequenceCopy=new e.default([],[t.glTextureShape[0],n]),this.hiddenStateSequenceCopy.createGLTexture({type:"2d",format:"float"})),this.currentX||(this.currentX=new e.default([],[t.glTextureShape[1]]),this.currentX.createGLTexture({type:"2d",format:"float"}));for(let e=0,i=t.glTextureShape[0];e<i;e++){const n=this.goBackwards?i-e-1:e;r.webgl2.runProgram({program:this.timestepReadProgram,output:this.currentX,inputs:[{input:t,name:"x"}],uniforms:[{value:n,type:"int",name:"index"}]}),this._stepGPU(),this.returnSequences&&(r.webgl2.runProgram({program:this.copyTextureProgram,output:this.hiddenStateSequenceCopy,inputs:[{input:this.hiddenStateSequence,name:"source"}]}),r.webgl2.runProgram({program:this.timestepWriteProgram,output:this.hiddenStateSequence,inputs:[{input:this.currentHiddenState,name:"x"},{input:this.hiddenStateSequenceCopy,name:"y"}],uniforms:[{value:e,type:"int",name:"index"}]}))}this.returnSequences?this.output=this.hiddenStateSequence:this.output=this.currentHiddenState,0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=v;
},{"../../activations":23,"../../Tensor":20,"../../Layer":57,"../../WebGL2":21,"ndarray-blas-level2":356,"ndarray-ops":18,"cwise":61,"../../activations/programSources":338}],136:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../../activations")),e=u(require("../../Tensor")),i=u(require("../../Layer")),r=require("../../WebGL2"),n=require("ndarray-blas-level2"),s=u(require("ndarray-ops")),a=u(require("cwise")),o=h(require("../../activations/programSources"));function u(t){return t&&t.__esModule?t:{default:t}}function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};r.get||r.set?Object.defineProperty(e,i,r):e[i]=t[i]}return e.default=t,e}const c="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D source;\nout vec4 outColor;\n\nvoid main(void) {\n  outColor = texture(source, vec2(outTex.x, outTex.y));\n}\n",l="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",p="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D t1;\nuniform sampler2D t2;\nuniform sampler2D bias;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(bias, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float t1_val = texelFetch(t1, ivec2(out_x, out_y), 0).r;\n  float t2_val = texelFetch(t2, ivec2(out_x, out_y), 0).r;\n  float bias_val = texelFetch(bias, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(t1_val + t2_val + bias_val);\n}\n",m="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D t1;\nuniform sampler2D t2;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(t1, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float t1_val = texelFetch(t1, ivec2(out_x, out_y), 0).r;\n  float t2_val = texelFetch(t2, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(t1_val * t2_val);\n}\n",d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n\n  outColor = vec4(texelFetch(x, ivec2(out_x, index), 0).r);\n}\n",g="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform sampler2D y;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(y, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (out_y == index) {\n    outColor = vec4(texelFetch(x, ivec2(out_x, 0), 0).r);\n  } else {\n    outColor = vec4(texelFetch(y, ivec2(out_x, out_y), 0).r);\n  }\n}\n",f="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D h;\nuniform sampler2D htm1;\nuniform sampler2D z;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(h, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float h_val = texelFetch(h, ivec2(out_x, out_y), 0).r;\n  float htm1_val = texelFetch(htm1, ivec2(out_x, out_y), 0).r;\n  float z_val = texelFetch(z, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(h_val * (float(1.0) - z_val) + htm1_val * z_val);\n}\n";class v extends i.default{constructor(e={}){super(e),Object.defineProperty(this,"_combine",{configurable:!0,enumerable:!0,writable:!0,value:(0,a.default)({args:["array","array","array","array"],body:function(t,e,i,r){e+i+r}})}),Object.defineProperty(this,"_update",{configurable:!0,enumerable:!0,writable:!0,value:(0,a.default)({args:["array","array","array"],body:function(t,e,i){t=t*(1-i)+e*i}})}),this.layerClass="GRU";const{units:i=1,activation:n="tanh",use_bias:s=!0,recurrent_activation:u="hard_sigmoid",return_sequences:h=!1,go_backwards:v=!1,stateful:_=!1}=e;this.units=i,this.activation=n,this.recurrentActivation=u,this.activationFunc=t[n],this.recurrentActivationFunc=t[u],this.use_bias=s,this.returnSequences=h,this.goBackwards=v,this.stateful=_,this.params=this.use_bias?["kernel","recurrent_kernel","bias"]:["kernel","recurrent_kernel"],this.description=`output dimensions: ${this.units}`,this.description+="linear"!==this.activation?`, ${this.activation} activation`:"",this.description+="linear"!==this.recurrentActivation?`, ${this.recurrentActivation} recurrent activation`:"",this.description+=this.returnSequences?", return sequences":"",this.description+=this.goBackwards?", backward direction":"",this.description+=this.stateful?", stateful":"",this.gpu&&(this.copyTextureProgram=r.webgl2.compileProgram(c),this.matMulProgram=r.webgl2.compileProgram(l),this.activationProgram=r.webgl2.compileProgram(o[this.activation]),this.recurrentActivationProgram=r.webgl2.compileProgram(o[this.recurrentActivation]),this.gateSummationProgram=r.webgl2.compileProgram(p),this.gateProductProgram=r.webgl2.compileProgram(m),this.timestepReadProgram=r.webgl2.compileProgram(d),this.timestepWriteProgram=r.webgl2.compileProgram(g),this.updateProgram=r.webgl2.compileProgram(f))}setWeights(t){super.setWeights(t);const i=this.weights.kernel.tensor.shape;this.weights.W_z=new e.default([],[i[0],this.units]),this.weights.W_r=new e.default([],[i[0],this.units]),this.weights.W_h=new e.default([],[i[0],this.units]),s.default.assign(this.weights.W_z.tensor,this.weights.kernel.tensor.hi(i[0],this.units).lo(0,0)),s.default.assign(this.weights.W_r.tensor,this.weights.kernel.tensor.hi(i[0],2*this.units).lo(0,this.units)),s.default.assign(this.weights.W_h.tensor,this.weights.kernel.tensor.hi(i[0],3*this.units).lo(0,2*this.units));const r=this.weights.recurrent_kernel.tensor.shape;if(this.weights.U_z=new e.default([],[r[0],this.units]),this.weights.U_r=new e.default([],[r[0],this.units]),this.weights.U_h=new e.default([],[r[0],this.units]),s.default.assign(this.weights.U_z.tensor,this.weights.recurrent_kernel.tensor.hi(r[0],this.units).lo(0,0)),s.default.assign(this.weights.U_r.tensor,this.weights.recurrent_kernel.tensor.hi(r[0],2*this.units).lo(0,this.units)),s.default.assign(this.weights.U_h.tensor,this.weights.recurrent_kernel.tensor.hi(r[0],3*this.units).lo(0,2*this.units)),this.weights.b_z=new e.default([],[this.units]),this.weights.b_r=new e.default([],[this.units]),this.weights.b_h=new e.default([],[this.units]),this.use_bias&&(s.default.assign(this.weights.b_z.tensor,this.weights.bias.tensor.hi(this.units).lo(0)),s.default.assign(this.weights.b_r.tensor,this.weights.bias.tensor.hi(2*this.units).lo(this.units)),s.default.assign(this.weights.b_h.tensor,this.weights.bias.tensor.hi(3*this.units).lo(2*this.units))),this.gpu){["W_z","W_r","W_h","U_z","U_r","U_h","b_z","b_r","b_h"].forEach(t=>{this.weights[t].createGLTexture({type:"2d",format:"float"})})}}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){const i=this.weights.b_z.tensor.shape[0],r=this.weights.b_r.tensor.shape[0],a=this.weights.b_h.tensor.shape[0],o=new e.default([],[i]),u=new e.default([],[i]),h=new e.default([],[i]),c=new e.default([],[r]),l=new e.default([],[r]),p=new e.default([],[r]),m=this.stateful&&this.currentHiddenState?this.currentHiddenState:new e.default([],[a]),d=new e.default([],[a]),g=new e.default([],[a]),f=new e.default([],[a]);this.hiddenStateSequence=new e.default([],[t.tensor.shape[0],a]);const v=new e.default([],[t.tensor.shape[1]]),_=()=>{s.default.assign(f.tensor,m.tensor),(0,n.gemv)(1,this.weights.W_z.tensor.transpose(1,0),v.tensor,1,u.tensor),(0,n.gemv)(1,this.weights.U_z.tensor.transpose(1,0),f.tensor,1,h.tensor),this._combine(o.tensor,u.tensor,h.tensor,this.weights.b_z.tensor),this.recurrentActivationFunc(o),(0,n.gemv)(1,this.weights.W_r.tensor.transpose(1,0),v.tensor,1,l.tensor),(0,n.gemv)(1,this.weights.U_r.tensor.transpose(1,0),f.tensor,1,p.tensor),this._combine(c.tensor,l.tensor,p.tensor,this.weights.b_r.tensor),this.recurrentActivationFunc(c),s.default.muleq(c.tensor,f.tensor),(0,n.gemv)(1,this.weights.W_h.tensor.transpose(1,0),v.tensor,1,d.tensor),(0,n.gemv)(1,this.weights.U_h.tensor.transpose(1,0),c.tensor,1,g.tensor),this._combine(m.tensor,d.tensor,g.tensor,this.weights.b_h.tensor),this.activationFunc(m),this._update(m.tensor,f.tensor,o.tensor)};for(let e=0,i=t.tensor.shape[0];e<i;e++){const r=this.goBackwards?i-e-1:e;s.default.assign(v.tensor,t.tensor.pick(r,null)),[u,h,l,p,d,g].forEach(t=>s.default.assigns(t.tensor,0)),_(),this.returnSequences&&s.default.assign(this.hiddenStateSequence.tensor.pick(e,null),m.tensor)}this.returnSequences?this.output=this.hiddenStateSequence:this.output=m,this.stateful&&(this.currentHiddenState=m)}_stepGPU(){r.webgl2.runProgram({program:this.copyTextureProgram,output:this.previousHiddenState,inputs:[{input:this.currentHiddenState,name:"source"}]}),r.webgl2.runProgram({program:this.matMulProgram,output:this.tempXZ,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_z,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.matMulProgram,output:this.tempHZ,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_z,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentUpdateGateStatePreactiv,inputs:[{input:this.tempXZ,name:"t1"},{input:this.tempHZ,name:"t2"},{input:this.weights.b_z,name:"bias"}]}),"linear"!==this.recurrentActivation?r.webgl2.runProgram({program:this.recurrentActivationProgram,output:this.currentUpdateGateState,inputs:[{input:this.currentUpdateGateStatePreactiv,name:"x"}]}):this.currentUpdateGateState=this.currentUpdateGateStatePreactiv,r.webgl2.runProgram({program:this.matMulProgram,output:this.tempXR,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_r,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.matMulProgram,output:this.tempHR,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_r,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentResetGateStatePreactiv,inputs:[{input:this.tempXR,name:"t1"},{input:this.tempHR,name:"t2"},{input:this.weights.b_r,name:"bias"}]}),"linear"!==this.recurrentActivation?r.webgl2.runProgram({program:this.recurrentActivationProgram,output:this.currentResetGateState,inputs:[{input:this.currentResetGateStatePreactiv,name:"x"}]}):this.currentResetGateState=this.currentResetGateStatePreactiv,r.webgl2.runProgram({program:this.copyTextureProgram,output:this.currentResetGateStateCopy,inputs:[{input:this.currentResetGateState,name:"source"}]}),r.webgl2.runProgram({program:this.gateProductProgram,output:this.currentResetGateState,inputs:[{input:this.currentResetGateStateCopy,name:"t1"},{input:this.previousHiddenState,name:"t2"}]}),r.webgl2.runProgram({program:this.matMulProgram,output:this.tempXH,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_h,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.matMulProgram,output:this.tempHH,inputs:[{input:this.currentResetGateState,name:"A"},{input:this.weights.U_h,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),r.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentHiddenStatePreactiv,inputs:[{input:this.tempXH,name:"t1"},{input:this.tempHH,name:"t2"},{input:this.weights.b_h,name:"bias"}]}),"linear"!==this.activation?r.webgl2.runProgram({program:this.activationProgram,output:this.currentHiddenState,inputs:[{input:this.currentHiddenStatePreactiv,name:"x"}]}):this.currentHiddenState=this.currentHiddenStatePreactiv,r.webgl2.runProgram({program:this.copyTextureProgram,output:this.currentHiddenStateCopy,inputs:[{input:this.currentHiddenState,name:"source"}]}),r.webgl2.runProgram({program:this.updateProgram,output:this.currentHiddenState,inputs:[{input:this.currentHiddenStateCopy,name:"h"},{input:this.previousHiddenState,name:"htm1"},{input:this.currentUpdateGateState,name:"z"}]})}_callGPU(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"});const i=this.weights.b_z.glTextureShape[1],n=this.weights.b_r.glTextureShape[1],s=this.weights.b_h.glTextureShape[1];this.currentHiddenState&&this.stateful||(this.currentHiddenState=new e.default([],[s]),this.currentHiddenState.createGLTexture({type:"2d",format:"float"})),this.currentHiddenStateCopy||(this.currentHiddenStateCopy=new e.default([],[s]),this.currentHiddenStateCopy.createGLTexture({type:"2d",format:"float"})),this.currentHiddenStatePreactiv||(this.currentHiddenStatePreactiv=new e.default([],[s]),this.currentHiddenStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.currentUpdateGateState||(this.currentUpdateGateState=new e.default([],[i]),this.currentUpdateGateState.createGLTexture({type:"2d",format:"float"})),this.currentUpdateGateStatePreactiv||(this.currentUpdateGateStatePreactiv=new e.default([],[i]),this.currentUpdateGateStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXZ||(this.tempXZ=new e.default([],[i]),this.tempXZ.createGLTexture({type:"2d",format:"float"})),this.tempHZ||(this.tempHZ=new e.default([],[i]),this.tempHZ.createGLTexture({type:"2d",format:"float"})),this.currentResetGateState||(this.currentResetGateState=new e.default([],[n]),this.currentResetGateState.createGLTexture({type:"2d",format:"float"})),this.currentResetGateStateCopy||(this.currentResetGateStateCopy=new e.default([],[n]),this.currentResetGateStateCopy.createGLTexture({type:"2d",format:"float"})),this.currentResetGateStatePreactiv||(this.currentResetGateStatePreactiv=new e.default([],[n]),this.currentResetGateStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXR||(this.tempXR=new e.default([],[n]),this.tempXR.createGLTexture({type:"2d",format:"float"})),this.tempHR||(this.tempHR=new e.default([],[n]),this.tempHR.createGLTexture({type:"2d",format:"float"})),this.tempXH||(this.tempXH=new e.default([],[s]),this.tempXH.createGLTexture({type:"2d",format:"float"})),this.tempHH||(this.tempHH=new e.default([],[s]),this.tempHH.createGLTexture({type:"2d",format:"float"})),this.previousHiddenState||(this.previousHiddenState=new e.default([],[s]),this.previousHiddenState.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequence||(this.hiddenStateSequence=new e.default([],[t.glTextureShape[0],s]),this.hiddenStateSequence.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequenceCopy||(this.hiddenStateSequenceCopy=new e.default([],[t.glTextureShape[0],s]),this.hiddenStateSequenceCopy.createGLTexture({type:"2d",format:"float"})),this.currentX||(this.currentX=new e.default([],[t.glTextureShape[1]]),this.currentX.createGLTexture({type:"2d",format:"float"}));for(let e=0,i=t.glTextureShape[0];e<i;e++){const n=this.goBackwards?i-e-1:e;r.webgl2.runProgram({program:this.timestepReadProgram,output:this.currentX,inputs:[{input:t,name:"x"}],uniforms:[{value:n,type:"int",name:"index"}]}),this._stepGPU(),this.returnSequences&&(r.webgl2.runProgram({program:this.copyTextureProgram,output:this.hiddenStateSequenceCopy,inputs:[{input:this.hiddenStateSequence,name:"source"}]}),r.webgl2.runProgram({program:this.timestepWriteProgram,output:this.hiddenStateSequence,inputs:[{input:this.currentHiddenState,name:"x"},{input:this.hiddenStateSequenceCopy,name:"y"}],uniforms:[{value:e,type:"int",name:"index"}]}))}this.returnSequences?this.output=this.hiddenStateSequence:this.output=this.currentHiddenState,0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=v;
},{"../../activations":23,"../../Tensor":20,"../../Layer":57,"../../WebGL2":21,"ndarray-blas-level2":356,"ndarray-ops":18,"cwise":61,"../../activations/programSources":338}],55:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"SimpleRNN",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"LSTM",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"GRU",{enumerable:!0,get:function(){return t.default}});var e=u(require("./SimpleRNN")),r=u(require("./LSTM")),t=u(require("./GRU"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./SimpleRNN":134,"./LSTM":135,"./GRU":136}],132:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../../Layer")),e=r(require("../../Tensor")),i=require("../../WebGL2"),u=r(require("ndarray-ops")),n=o(require("../"));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};u.get||u.set?Object.defineProperty(e,i,u):e[i]=t[i]}return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}const p="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D source;\nout vec4 outColor;\n\nvoid main(void) {\n  outColor = texture(source, vec2(outTex.x, outTex.y));\n}\n",s="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",a="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int t;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n\n  outColor = vec4(texelFetch(x, ivec2(out_x, t), 0).r);\n}\n",l="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D outputCopy;\nuniform sampler2D sliceOutput;\nuniform int t;\nuniform int timesteps;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(sliceOutput, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(timesteps) * outTex.y);\n\n  if (t == out_y) {\n    outColor = vec4(texelFetch(sliceOutput, ivec2(out_x, 0), 0).r);\n  } else {\n    outColor = texelFetch(outputCopy, ivec2(out_x, out_y), 0);\n  }\n}\n",h="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D outputCopy;\nuniform sampler2D sliceOutput;\nuniform isampler2D indexMap;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(outputCopy, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(textureSize(sliceOutput, 0)[0])));\n    int colIndex = int(mod(float(index), float(textureSize(sliceOutput, 0)[0])));\n    float val = texelFetch(sliceOutput, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = texelFetch(outputCopy, ivec2(out_x, out_y), 0);\n  }\n}\n";class c extends t.default{constructor(t={}){super(t),this.layerClass="TimeDistributed";const{layer:e}=t;e||this.throwError("wrapped layer is undefined.");const u=Object.assign({},e.config,{gpu:t.gpu});this.wrappedLayer=new n[e.class_name](u),this.wrappedLayer.outbound=[null],this.gpu&&(this.copyTextureProgram=i.webgl2.compileProgram(p),this.mapInputProgram=i.webgl2.compileProgram(s),this.selectSliceProgram=i.webgl2.compileProgram(a),this.copySliceOutputProgram=i.webgl2.compileProgram(l),this.mapSliceOutputProgram=i.webgl2.compileProgram(h))}setWeights(t){this.wrappedLayer.setWeights(t)}call(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}_callCPU(t){const i=[...t.tensor.shape.slice(1)],n=new e.default([],i);u.default.assign(n.tensor,t.tensor.pick(0,...Array(i.length).fill(null)));let o=this.wrappedLayer.call(n);const r=o.tensor.shape.slice();this.output=new e.default([],[t.tensor.shape[0],...r]),u.default.assign(this.output.tensor.pick(0,...Array(r.length).fill(null)),o.tensor);for(let e=1,p=t.tensor.shape[0];e<p;e++)u.default.assign(n.tensor,t.tensor.pick(e,...Array(i.length).fill(null))),o=this.wrappedLayer.call(n),u.default.assign(this.output.tensor.pick(e,...Array(r.length).fill(null)),o.tensor)}_createIndexMap(t){if(this.indexMaps)return;const i=new e.default(t.data,t.shape,{type:Int32Array});this.indexMaps=[];const n=this.inputShape[0],o=this.inputShape.slice(1);for(let t=0;t<n;t++){const n=new e.default([],o,{type:Int32Array});u.default.assign(n.tensor,i.tensor.pick(t,...Array(o.length).fill(null))),n.reshapeTo2DSquare(),n.createGLTexture({type:"2d",format:"int"}),this.indexMaps.push(n)}}_createOutputIndexMap(t){if(this.outputIndexMaps)return;const i=new e.default(t.data,t.shape,{type:Int32Array});this.outputIndexMaps=[];const n=this.outputShape[0],o=this.outputShape.slice(1);for(let t=0;t<n;t++){const n=new e.default([],this.outputShape,{type:Int32Array});u.default.assigns(n.tensor,-1),u.default.assign(n.tensor.pick(t,...Array(o.length).fill(null)),i.tensor),n.reshapeTo2DSquare(),n.createGLTexture({type:"2d",format:"int"}),this.outputIndexMaps.push(n)}}_callGPU(t){t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:this.inputShape=t.tensor.shape,t.glTexture||(t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float"}):t.tensor.shape.length>2&&!t.is2DReshaped&&(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"}))),this.inputShape.length>2&&this._createIndexMap(t.indicesForReshaped);const u=this.inputShape[0],n=this.inputShape.slice(1);this.slice||(this.slice=new e.default([],n),n.length<=2?this.slice.createGLTexture({type:"2d",format:"float"}):(this.slice.reshapeTo2DSquare(),this.slice.createGLTexture({type:"2d",format:"float"}))),this.inputShape.length<=2?i.webgl2.runProgram({program:this.selectSliceProgram,output:this.slice,inputs:[{input:t,name:"x"}],uniforms:[{value:0,type:"int",name:"t"}]}):i.webgl2.runProgram({program:this.mapInputProgram,output:this.slice,inputs:[{input:t,name:"x"},{input:this.indexMaps[0],name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),this.wrappedLayer._callGPU(this.slice),this.sliceOutput=this.wrappedLayer.output,this.output||(this.inputShape.length<=2?(this.outputShape=[u,this.sliceOutput.glTextureShape[1]],this.output=new e.default([],this.outputShape),this.outputCopy=new e.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float"}),this.outputCopy.createGLTexture({type:"2d",format:"float"})):(this.outputShape=[u,...this.sliceOutput.originalShape],this.output=new e.default([],this.outputShape),this.outputCopy=new e.default([],this.outputShape),this.output.reshapeTo2DSquare(),this.outputCopy.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"}),this.outputCopy.createGLTexture({type:"2d",format:"float"}),this._createOutputIndexMap(this.sliceOutput.indicesForReshaped))),i.webgl2.runProgram({program:this.copyTextureProgram,output:this.outputCopy,inputs:[{input:this.output,name:"source"}]}),this.inputShape.length<=2?i.webgl2.runProgram({program:this.copySliceOutputProgram,output:this.output,inputs:[{input:this.outputCopy,name:"outputCopy"},{input:this.sliceOutput,name:"sliceOutput"}],uniforms:[{value:0,type:"int",name:"t"},{value:u,type:"int",name:"timesteps"}]}):i.webgl2.runProgram({program:this.mapSliceOutputProgram,output:this.output,inputs:[{input:this.outputCopy,name:"outputCopy"},{input:this.sliceOutput,name:"sliceOutput"},{input:this.outputIndexMaps[0],name:"indexMap"}]});for(let e=1;e<u;e++)this.inputShape.length<=2?i.webgl2.runProgram({program:this.selectSliceProgram,output:this.slice,inputs:[{input:t,name:"x"}],uniforms:[{value:e,type:"int",name:"t"}]}):i.webgl2.runProgram({program:this.mapInputProgram,output:this.slice,inputs:[{input:t,name:"x"},{input:this.indexMaps[e],name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),this.wrappedLayer._callGPU(this.slice),this.sliceOutput=this.wrappedLayer.output,i.webgl2.runProgram({program:this.copyTextureProgram,output:this.outputCopy,inputs:[{input:this.output,name:"source"}]}),this.inputShape.length<=2?i.webgl2.runProgram({program:this.copySliceOutputProgram,output:this.output,inputs:[{input:this.outputCopy,name:"outputCopy"},{input:this.sliceOutput,name:"sliceOutput"}],uniforms:[{value:e,type:"int",name:"t"},{value:u,type:"int",name:"timesteps"}]}):i.webgl2.runProgram({program:this.mapSliceOutputProgram,output:this.output,inputs:[{input:this.outputCopy,name:"outputCopy"},{input:this.sliceOutput,name:"sliceOutput"},{input:this.outputIndexMaps[e],name:"indexMap"}]});0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}exports.default=c;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18,"../":24}],133:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../../Layer")),t=s(require("../../Tensor")),r=require("../../WebGL2"),o=s(require("ndarray-ops")),n=a(require("../recurrent"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}const i="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D source;\nout vec4 outColor;\n\nvoid main(void) {\n  outColor = texture(source, vec2(outTex.x, outTex.y));\n}\n",u="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D forward;\nuniform sampler2D backward;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(forward, 0);\n  int out_x = int(float(size[0] * 2) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (out_x >= 0 && out_x < size[0]) {\n    outColor = vec4(texelFetch(forward, ivec2(out_x, out_y), 0).r);\n  } else {\n    outColor = vec4(texelFetch(backward, ivec2(out_x - size[0], size[1] - out_y - 1), 0).r);\n  }\n}\n",l="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D forward;\nuniform sampler2D backward;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(forward, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float forward_val = texelFetch(forward, ivec2(out_x, out_y), 0).r;\n  float backward_val = texelFetch(backward, ivec2(out_x, size[1] - out_y - 1), 0).r;\n\n  outColor = vec4(forward_val + backward_val);\n}\n",c="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D forward;\nuniform sampler2D backward;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(forward, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float forward_val = texelFetch(forward, ivec2(out_x, out_y), 0).r;\n  float backward_val = texelFetch(backward, ivec2(out_x, size[1] - out_y - 1), 0).r;\n\n  outColor = vec4(forward_val * backward_val);\n}\n",d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D forward;\nuniform sampler2D backward;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(forward, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float forward_val = texelFetch(forward, ivec2(out_x, out_y), 0).r;\n  float backward_val = texelFetch(backward, ivec2(out_x, size[1] - out_y - 1), 0).r;\n\n  outColor = vec4(0.5 * (forward_val + backward_val));\n}\n";class h extends e.default{constructor(e={}){super(e),this.layerClass="Bidirectional";const{layer:t,merge_mode:o="concat"}=e;t||this.throwError("wrapped layer is undefined."),["SimpleRNN","GRU","LSTM"].includes(t.class_name)||this.throwError(`cannot wrap ${t.class_name} layer.`),["concat","sum","mul","ave"].includes(o)||this.throwError(`merge_mode ${o} not supported.`);const a=Object.assign({},t.config,{gpu:e.gpu}),s=Object.assign({},t.config,{gpu:e.gpu});s.go_backwards=!s.go_backwards,this.forwardLayer=new n[t.class_name](a),this.backwardLayer=new n[t.class_name](s),this.forwardLayer.outbound=[null],this.backwardLayer.outbound=[null],this.mergeMode=o,this.returnSequences=t.config.return_sequences,this.gpu&&(this.copyTextureProgram=r.webgl2.compileProgram(i),"concat"===this.mergeMode?this.mergeProgram=r.webgl2.compileProgram(u):"sum"===this.mergeMode?this.mergeProgram=r.webgl2.compileProgram(l):"mul"===this.mergeMode?this.mergeProgram=r.webgl2.compileProgram(c):"ave"===this.mergeMode&&(this.mergeProgram=r.webgl2.compileProgram(d)))}setWeights(e){this.forwardLayer.setWeights(e.slice(0,e.length/2)),this.backwardLayer.setWeights(e.slice(e.length/2))}call(e){return this.gpu?this._callGPU(e):this._callCPU(e),this.output}_callCPU(e){this.forwardLayer._callCPU(new t.default(e.tensor.data,e.tensor.shape)),this.backwardLayer._callCPU(new t.default(e.tensor.data,e.tensor.shape));const r=this.forwardLayer.output,n=this.backwardLayer.output;this.returnSequences&&(n.tensor=n.tensor.step(-1));const a=r.tensor.shape.slice();"concat"===this.mergeMode&&(a[a.length-1]+=n.tensor.shape[a.length-1]),this.output=new t.default([],a),"concat"===this.mergeMode?this.returnSequences?(o.default.assign(this.output.tensor.hi(a[0],r.tensor.shape[1]).lo(0,0),r.tensor),o.default.assign(this.output.tensor.hi(a[0],a[1]).lo(0,r.tensor.shape[1]),n.tensor)):(o.default.assign(this.output.tensor.hi(r.tensor.shape[0]).lo(0),r.tensor),o.default.assign(this.output.tensor.hi(a[0]).lo(r.tensor.shape[0]),n.tensor)):"sum"===this.mergeMode?(o.default.addeq(this.output.tensor,r.tensor),o.default.addeq(this.output.tensor,n.tensor)):"mul"===this.mergeMode?(o.default.assigns(this.output.tensor,1),o.default.muleq(this.output.tensor,r.tensor),o.default.muleq(this.output.tensor,n.tensor)):"ave"===this.mergeMode&&(o.default.addeq(this.output.tensor,r.tensor),o.default.addeq(this.output.tensor,n.tensor),o.default.divseq(this.output.tensor,2))}_callGPU(e){e.glTexture||e.createGLTexture({type:"2d",format:"float"}),this.inputCopy||(this.inputCopy=new t.default([],e.glTextureShape),this.inputCopy.createGLTexture({type:"2d",format:"float"})),r.webgl2.runProgram({program:this.copyTextureProgram,output:this.inputCopy,inputs:[{input:e,name:"source"}]}),this.forwardLayer._callGPU(e),this.backwardLayer._callGPU(this.inputCopy);const o=this.forwardLayer.output,n=this.backwardLayer.output,a=o.glTextureShape.slice();"concat"===this.mergeMode&&(a[1]+=n.glTextureShape[1]),this.output||(this.output=new t.default([],a),this.output.createGLTexture({type:"2d",format:"float"}),this.returnSequences||(this.output.is1D=!0)),r.webgl2.runProgram({program:this.mergeProgram,output:this.output,inputs:[{input:o,name:"forward"},{input:n,name:"backward"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}exports.default=h;
},{"../../Layer":57,"../../Tensor":20,"../../WebGL2":21,"ndarray-ops":18,"../recurrent":55}],54:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"TimeDistributed",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Bidirectional",{enumerable:!0,get:function(){return t.default}});var e=r(require("./TimeDistributed")),t=r(require("./Bidirectional"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./TimeDistributed":132,"./Bidirectional":133}],24:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={InputLayer:!0};Object.defineProperty(exports,"InputLayer",{enumerable:!0,get:function(){return r.default}});var r=s(require("./InputLayer")),t=require("./advanced_activations");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var o=require("./convolutional");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var n=require("./core");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))});var u=require("./embeddings");Object.keys(u).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return u[r]}}))});var c=require("./merge");Object.keys(c).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return c[r]}}))});var a=require("./noise");Object.keys(a).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return a[r]}}))});var l=require("./normalization");Object.keys(l).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return l[r]}}))});var p=require("./pooling");Object.keys(p).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return p[r]}}))});var f=require("./recurrent");Object.keys(f).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return f[r]}}))});var i=require("./wrappers");function s(e){return e&&e.__esModule?e:{default:e}}Object.keys(i).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return i[r]}}))});
},{"./InputLayer":34,"./advanced_activations":46,"./convolutional":47,"./core":48,"./embeddings":49,"./merge":50,"./noise":51,"./normalization":52,"./pooling":53,"./recurrent":55,"./wrappers":54}],341:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("../Tensor")),e=require("../WebGL2"),s=u(require("ndarray-ops")),a=require("ndarray-blas-level2"),i=u(require("ndarray-gemm")),h=u(require("../webgl/dynamic/createGLSLProgram"));function u(t){return t&&t.__esModule?t:{default:t}}class r{constructor(t={}){if(this.modelLayersMap=t.modelLayersMap,this.gpu=t.gpu,!this.modelLayersMap)throw new Error("[CAM] modelLayersMap is required")}initialize(){if(this.modelLayersMap.forEach(t=>{"GlobalAveragePooling2D"===t.layerClass&&(this.enabled=!0,this.poolLayer=t)}),this.enabled&&!this.data){this.featureMaps=this.modelLayersMap.get(this.poolLayer.inbound[0]).output;let t=this.poolLayer;for(t.outbound.length||(this.weights=this.poolLayer.output);t.outbound.length;)(t=this.modelLayersMap.get(t.outbound[0])).weights.kernel?this.weights=t.weights.kernel:this.weights=this.poolLayer.output;if(this.featureMaps.is2DReshaped?this.inputShape=this.featureMaps.originalShape.slice(0,2):this.inputShape=this.featureMaps.tensor.shape.slice(0,2),1===this.weights.tensor.shape.length)this.shape=this.inputShape;else{const t=this.weights.tensor.shape[1];this.shape=[...this.inputShape,t]}this.data=new Float32Array(this.shape.reduce((t,e)=>t*e,1))}}update(){if(!this.enabled)return;this.featureMaps=this.modelLayersMap.get(this.poolLayer.inbound[0]).output,this.gpu?this._updateGPU():this._updateCPU();const t=s.default.inf(this.output.tensor),e=s.default.sup(this.output.tensor);s.default.divseq(s.default.subseq(this.output.tensor,t),e-t),this.data=this.output.tensor.data}_updateCPU(){if(this.featureMaps.is2DReshaped||this.featureMaps.reshapeTo2D(),1===this.weights.tensor.shape.length){this.output||(this.output=new t.default([],this.shape));const e=new t.default([],[this.shape[0]*this.shape[1]]);(0,a.gemv)(1,this.featureMaps.tensor,this.weights.tensor,1,e.tensor),this.output.replaceTensorData(e.tensor.data)}else this.output||(this.output=new t.default([],this.shape)),this.output.reshapeTo2D(),(0,i.default)(this.output.tensor,this.featureMaps.tensor,this.weights.tensor,1,1),this.output.reshapeFrom2D();s.default.maxseq(this.output.tensor,0),this.featureMaps.is2DReshaped&&this.featureMaps.reshapeFrom2D()}_updateGPU(){this.output||(this.output=new t.default([],this.shape));const s=this.weights.is1D;!this.output.glTexture&&s?this.output.createGLTexture({type:"2d",format:"float"}):(this.output.reshapeTo2D(),this.output.createGLTexture({type:"2d",format:"float"}));const a=s?this.weights.glTextureShape[1]:this.weights.glTextureShape[0];if(!this.program){const t=(0,h.default)("cam",this.output.glTextureShape,a,s);this.program=e.webgl2.compileProgram(t)}e.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:this.featureMaps,name:"featureMaps"},{input:this.weights,name:"weights"}]}),this.output.transferFromGLTexture(),this.output.is2DReshaped&&this.output.reshapeFrom2D()}}exports.default=r;
},{"../Tensor":20,"../WebGL2":21,"ndarray-ops":18,"ndarray-blas-level2":356,"ndarray-gemm":340,"../webgl/dynamic/createGLSLProgram":339}],83:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"CAM",{enumerable:!0,get:function(){return e.default}});var e=r(require("./CAM"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./CAM":341}],637:[function(require,module,exports) {
"use strict";function n(n,e){for(var r=new Array(arguments.length-1),t=0,l=2,o=!0;l<arguments.length;)r[t++]=arguments[l++];return new Promise(function(l,u){r[t]=function(n){if(o)if(o=!1,n)u(n);else{for(var e=new Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];l.apply(null,e)}};try{n.apply(e||null,r)}catch(n){o&&(o=!1,u(n))}})}module.exports=n;
},{}],642:[function(require,module,exports) {
"use strict";var r=exports;r.length=function(r){var e=r.length;if(!e)return 0;for(var a=0;--e%4>1&&"="===r.charAt(e);)++a;return Math.ceil(3*r.length)/4-a};for(var e=new Array(64),a=new Array(123),t=0;t<64;)a[e[t]=t<26?t+65:t<52?t+71:t<62?t-4:t-59|43]=t++;r.encode=function(r,a,t){for(var n,i=null,o=[],c=0,s=0;a<t;){var h=r[a++];switch(s){case 0:o[c++]=e[h>>2],n=(3&h)<<4,s=1;break;case 1:o[c++]=e[n|h>>4],n=(15&h)<<2,s=2;break;case 2:o[c++]=e[n|h>>6],o[c++]=e[63&h],s=0}c>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),c=0)}return s&&(o[c++]=e[n],o[c++]=61,1===s&&(o[c++]=61)),i?(c&&i.push(String.fromCharCode.apply(String,o.slice(0,c))),i.join("")):String.fromCharCode.apply(String,o.slice(0,c))};var n="invalid encoding";r.decode=function(r,e,t){for(var i,o=t,c=0,s=0;s<r.length;){var h=r.charCodeAt(s++);if(61===h&&c>1)break;if(void 0===(h=a[h]))throw Error(n);switch(c){case 0:i=h,c=1;break;case 1:e[t++]=i<<2|(48&h)>>4,i=h,c=2;break;case 2:e[t++]=(15&i)<<4|(60&h)>>2,i=h,c=3;break;case 3:e[t++]=(3&i)<<6|h,c=0}}if(1===c)throw Error(n);return t-o},r.test=function(r){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(r)};
},{}],643:[function(require,module,exports) {
"use strict";function t(){this._listeners={}}module.exports=t,t.prototype.on=function(t,s,e){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:s,ctx:e||this}),this},t.prototype.off=function(t,s){if(void 0===t)this._listeners={};else if(void 0===s)this._listeners[t]=[];else for(var e=this._listeners[t],i=0;i<e.length;)e[i].fn===s?e.splice(i,1):++i;return this},t.prototype.emit=function(t){var s=this._listeners[t];if(s){for(var e=[],i=1;i<arguments.length;)e.push(arguments[i++]);for(i=0;i<s.length;)s[i].fn.apply(s[i++].ctx,e)}return this};
},{}],638:[function(require,module,exports) {
"use strict";function n(n){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),r=128===t[3];function o(n,r,o){e[0]=n,r[o]=t[0],r[o+1]=t[1],r[o+2]=t[2],r[o+3]=t[3]}function u(n,r,o){e[0]=n,r[o]=t[3],r[o+1]=t[2],r[o+2]=t[1],r[o+3]=t[0]}function i(n,r){return t[0]=n[r],t[1]=n[r+1],t[2]=n[r+2],t[3]=n[r+3],e[0]}function a(n,r){return t[3]=n[r],t[2]=n[r+1],t[1]=n[r+2],t[0]=n[r+3],e[0]}n.writeFloatLE=r?o:u,n.writeFloatBE=r?u:o,n.readFloatLE=r?i:a,n.readFloatBE=r?a:i}():function(){function u(n,e,t,r){var o=e<0?1:0;if(o&&(e=-e),0===e)n(1/e>0?0:2147483648,t,r);else if(isNaN(e))n(2143289344,t,r);else if(e>3.4028234663852886e38)n((o<<31|2139095040)>>>0,t,r);else if(e<1.1754943508222875e-38)n((o<<31|Math.round(e/1.401298464324817e-45))>>>0,t,r);else{var u=Math.floor(Math.log(e)/Math.LN2);n((o<<31|u+127<<23|8388607&Math.round(e*Math.pow(2,-u)*8388608))>>>0,t,r)}}function i(n,e,t){var r=n(e,t),o=2*(r>>31)+1,u=r>>>23&255,i=8388607&r;return 255===u?i?NaN:o*(1/0):0===u?1.401298464324817e-45*o*i:o*Math.pow(2,u-150)*(i+8388608)}n.writeFloatLE=u.bind(null,e),n.writeFloatBE=u.bind(null,t),n.readFloatLE=i.bind(null,r),n.readFloatBE=i.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),r=128===t[7];function o(n,r,o){e[0]=n,r[o]=t[0],r[o+1]=t[1],r[o+2]=t[2],r[o+3]=t[3],r[o+4]=t[4],r[o+5]=t[5],r[o+6]=t[6],r[o+7]=t[7]}function u(n,r,o){e[0]=n,r[o]=t[7],r[o+1]=t[6],r[o+2]=t[5],r[o+3]=t[4],r[o+4]=t[3],r[o+5]=t[2],r[o+6]=t[1],r[o+7]=t[0]}function i(n,r){return t[0]=n[r],t[1]=n[r+1],t[2]=n[r+2],t[3]=n[r+3],t[4]=n[r+4],t[5]=n[r+5],t[6]=n[r+6],t[7]=n[r+7],e[0]}function a(n,r){return t[7]=n[r],t[6]=n[r+1],t[5]=n[r+2],t[4]=n[r+3],t[3]=n[r+4],t[2]=n[r+5],t[1]=n[r+6],t[0]=n[r+7],e[0]}n.writeDoubleLE=r?o:u,n.writeDoubleBE=r?u:o,n.readDoubleLE=r?i:a,n.readDoubleBE=r?a:i}():function(){function u(n,e,t,r,o,u){var i=r<0?1:0;if(i&&(r=-r),0===r)n(0,o,u+e),n(1/r>0?0:2147483648,o,u+t);else if(isNaN(r))n(0,o,u+e),n(2146959360,o,u+t);else if(r>1.7976931348623157e308)n(0,o,u+e),n((i<<31|2146435072)>>>0,o,u+t);else{var a;if(r<2.2250738585072014e-308)n((a=r/5e-324)>>>0,o,u+e),n((i<<31|a/4294967296)>>>0,o,u+t);else{var l=Math.floor(Math.log(r)/Math.LN2);1024===l&&(l=1023),n(4503599627370496*(a=r*Math.pow(2,-l))>>>0,o,u+e),n((i<<31|l+1023<<20|1048576*a&1048575)>>>0,o,u+t)}}}function i(n,e,t,r,o){var u=n(r,o+e),i=n(r,o+t),a=2*(i>>31)+1,l=i>>>20&2047,f=4294967296*(1048575&i)+u;return 2047===l?f?NaN:a*(1/0):0===l?5e-324*a*f:a*Math.pow(2,l-1075)*(f+4503599627370496)}n.writeDoubleLE=u.bind(null,e,0,4),n.writeDoubleBE=u.bind(null,t,4,0),n.readDoubleLE=i.bind(null,r,0,4),n.readDoubleBE=i.bind(null,o,4,0)}(),n}function e(n,e,t){e[t]=255&n,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}function t(n,e,t){e[t]=n>>>24,e[t+1]=n>>>16&255,e[t+2]=n>>>8&255,e[t+3]=255&n}function r(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0}function o(n,e){return(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}module.exports=n(n);
},{}],639:[function(require,module,exports) {
"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire;
},{}],641:[function(require,module,exports) {
"use strict";var r=exports;r.length=function(r){for(var t=0,n=0,e=0;e<r.length;++e)(n=r.charCodeAt(e))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&r.charCodeAt(e+1))?(++e,t+=4):t+=3;return t},r.read=function(r,t,n){if(n-t<1)return"";for(var e,o=null,a=[],i=0;t<n;)(e=r[t++])<128?a[i++]=e:e>191&&e<224?a[i++]=(31&e)<<6|63&r[t++]:e>239&&e<365?(e=((7&e)<<18|(63&r[t++])<<12|(63&r[t++])<<6|63&r[t++])-65536,a[i++]=55296+(e>>10),a[i++]=56320+(1023&e)):a[i++]=(15&e)<<12|(63&r[t++])<<6|63&r[t++],i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),i=0);return o?(i&&o.push(String.fromCharCode.apply(String,a.slice(0,i))),o.join("")):String.fromCharCode.apply(String,a.slice(0,i))},r.write=function(r,t,n){for(var e,o,a=n,i=0;i<r.length;++i)(e=r.charCodeAt(i))<128?t[n++]=e:e<2048?(t[n++]=e>>6|192,t[n++]=63&e|128):55296==(64512&e)&&56320==(64512&(o=r.charCodeAt(i+1)))?(e=65536+((1023&e)<<10)+(1023&o),++i,t[n++]=e>>18|240,t[n++]=e>>12&63|128,t[n++]=e>>6&63|128,t[n++]=63&e|128):(t[n++]=e>>12|224,t[n++]=e>>6&63|128,t[n++]=63&e|128);return n-a};
},{}],640:[function(require,module,exports) {
"use strict";function r(r,n,t){var u=t||8192,e=u>>>1,l=null,c=u;return function(t){if(t<1||t>e)return r(t);c+t>u&&(l=r(u),c=0);var i=n.call(l,c,c+=t);return 7&c&&(c=1+(7|c)),i}}module.exports=r;
},{}],633:[function(require,module,exports) {
"use strict";module.exports=i;var t=require("../util/minimal");function i(t,i){this.lo=t>>>0,this.hi=i>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var r=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return o;var r=t<0;r&&(t=-t);var h=t>>>0,n=(t-h)/4294967296>>>0;return r&&(n=~n>>>0,h=~h>>>0,++h>4294967295&&(h=0,++n>4294967295&&(n=0))),new i(h,n)},i.from=function(r){if("number"==typeof r)return i.fromNumber(r);if(t.isString(r)){if(!t.Long)return i.fromNumber(parseInt(r,10));r=t.Long.fromString(r)}return r.low||r.high?new i(r.low>>>0,r.high>>>0):o},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,o=~this.hi>>>0;return i||(o=o+1>>>0),-(i+4294967296*o)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(i){return t.Long?new t.Long(0|this.lo,0|this.hi,Boolean(i)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(i)}};var h=String.prototype.charCodeAt;i.fromHash=function(t){return t===r?o:new i((h.call(t,0)|h.call(t,1)<<8|h.call(t,2)<<16|h.call(t,3)<<24)>>>0,(h.call(t,4)|h.call(t,5)<<8|h.call(t,6)<<16|h.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return 0===o?0===i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:o<128?9:10};
},{"../util/minimal":575}],575:[function(require,module,exports) {
var global = (1,eval)("this");
var Buffer = require("buffer").Buffer;
var r=(0,eval)("this"),e=require("buffer").Buffer,t=exports;function n(r,e,t){for(var n=Object.keys(e),o=0;o<n.length;++o)void 0!==r[n[o]]&&t||(r[n[o]]=e[n[o]]);return r}function o(r){function e(r,t){if(!(this instanceof e))return new e(r,t);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),t&&n(this,t)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return r}}),e.prototype.toString=function(){return this.name+": "+this.message},e}t.asPromise=require("@protobufjs/aspromise"),t.base64=require("@protobufjs/base64"),t.EventEmitter=require("@protobufjs/eventemitter"),t.float=require("@protobufjs/float"),t.inquire=require("@protobufjs/inquire"),t.utf8=require("@protobufjs/utf8"),t.pool=require("@protobufjs/pool"),t.LongBits=require("./longbits"),t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isNode=Boolean(r.process&&r.process.versions&&r.process.versions.node),t.isInteger=Number.isInteger||function(r){return"number"==typeof r&&isFinite(r)&&Math.floor(r)===r},t.isString=function(r){return"string"==typeof r||r instanceof String},t.isObject=function(r){return r&&"object"==typeof r},t.isset=t.isSet=function(r,e){var t=r[e];return!(null==t||!r.hasOwnProperty(e))&&("object"!=typeof t||(Array.isArray(t)?t.length:Object.keys(t).length)>0)},t.Buffer=function(){try{var r=t.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch(r){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(r){return"number"==typeof r?t.Buffer?t._Buffer_allocUnsafe(r):new t.Array(r):t.Buffer?t._Buffer_from(r):"undefined"==typeof Uint8Array?r:new Uint8Array(r)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=r.dcodeIO&&r.dcodeIO.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(r){return r?t.LongBits.from(r).toHash():t.LongBits.zeroHash},t.longFromHash=function(r,e){var n=t.LongBits.fromHash(r);return t.Long?t.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},t.merge=n,t.lcFirst=function(r){return r.charAt(0).toLowerCase()+r.substring(1)},t.newError=o,t.ProtocolError=o("ProtocolError"),t.oneOfGetter=function(r){for(var e={},t=0;t<r.length;++t)e[r[t]]=1;return function(){for(var r=Object.keys(this),t=r.length-1;t>-1;--t)if(1===e[r[t]]&&void 0!==this[r[t]]&&null!==this[r[t]])return r[t]}},t.oneOfSetter=function(r){return function(e){for(var t=0;t<r.length;++t)r[t]!==e&&delete this[r[t]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var r=t.Buffer;r?(t._Buffer_from=r.from!==Uint8Array.from&&r.from||function(e,t){return new r(e,t)},t._Buffer_allocUnsafe=r.allocUnsafe||function(e){return new r(e)}):t._Buffer_from=t._Buffer_allocUnsafe=null};
},{"@protobufjs/aspromise":637,"@protobufjs/base64":642,"@protobufjs/eventemitter":643,"@protobufjs/float":638,"@protobufjs/inquire":639,"@protobufjs/utf8":641,"@protobufjs/pool":640,"./longbits":633,"buffer":632}],569:[function(require,module,exports) {
"use strict";module.exports=u;var t,i=require("./util/minimal"),n=i.LongBits,e=i.base64,o=i.utf8;function r(t,i,n){this.fn=t,this.len=i,this.next=void 0,this.val=n}function s(){}function h(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function u(){this.len=0,this.head=new r(s,0,0),this.tail=this.head,this.states=null}function l(t,i,n){i[n]=255&t}function p(t,i,n){for(;t>127;)i[n++]=127&t|128,t>>>=7;i[n]=t}function a(t,i){this.len=t,this.next=void 0,this.val=i}function f(t,i,n){for(;t.hi;)i[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[n++]=127&t.lo|128,t.lo=t.lo>>>7;i[n++]=t.lo}function c(t,i,n){i[n]=255&t,i[n+1]=t>>>8&255,i[n+2]=t>>>16&255,i[n+3]=t>>>24}u.create=i.Buffer?function(){return(u.create=function(){return new t})()}:function(){return new u},u.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(u.alloc=i.pool(u.alloc,i.Array.prototype.subarray)),u.prototype._push=function(t,i,n){return this.tail=this.tail.next=new r(t,i,n),this.len+=i,this},a.prototype=Object.create(r.prototype),a.prototype.fn=p,u.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new a((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},u.prototype.int32=function(t){return t<0?this._push(f,10,n.fromNumber(t)):this.uint32(t)},u.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},u.prototype.uint64=function(t){var i=n.from(t);return this._push(f,i.length(),i)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(t){var i=n.from(t).zzEncode();return this._push(f,i.length(),i)},u.prototype.bool=function(t){return this._push(l,1,t?1:0)},u.prototype.fixed32=function(t){return this._push(c,4,t>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(t){var i=n.from(t);return this._push(c,4,i.lo)._push(c,4,i.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},u.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var y=i.Array.prototype.set?function(t,i,n){i.set(t,n)}:function(t,i,n){for(var e=0;e<t.length;++e)i[n+e]=t[e]};u.prototype.bytes=function(t){var n=t.length>>>0;if(!n)return this._push(l,1,0);if(i.isString(t)){var o=u.alloc(n=e.length(t));e.decode(t,o,0),t=o}return this.uint32(n)._push(y,n,t)},u.prototype.string=function(t){var i=o.length(t);return i?this.uint32(i)._push(o.write,i,t):this._push(l,1,0)},u.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new r(s,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(s,0,0),this.len=0),this},u.prototype.ldelim=function(){var t=this.head,i=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=i,this.len+=n),this},u.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,i,n),n+=t.len,t=t.next;return i},u._configure=function(i){t=i};
},{"./util/minimal":575}],570:[function(require,module,exports) {

"use strict";module.exports=n;var t=require("./writer");(n.prototype=Object.create(t.prototype)).constructor=n;var e=require("./util/minimal"),r=e.Buffer;function n(){t.call(this)}n.alloc=function(t){return(n.alloc=e._Buffer_allocUnsafe)(t)};var i=r&&r.prototype instanceof Uint8Array&&"set"===r.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]};function o(t,r,n){t.length<40?e.utf8.write(t,r,n):r.utf8Write(t,n)}n.prototype.bytes=function(t){e.isString(t)&&(t=e._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(i,r,t),this},n.prototype.string=function(t){var e=r.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this};
},{"./writer":569,"./util/minimal":575}],571:[function(require,module,exports) {
"use strict";module.exports=h;var t,i=require("./util/minimal"),s=i.LongBits,r=i.utf8;function o(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function h(t){this.buf=t,this.pos=0,this.len=t.length}var n="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new h(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new h(t);throw Error("illegal buffer")};function e(){var t=new s(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw o(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw o(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function u(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw o(this,8);return new s(u(this.buf,this.pos+=4),u(this.buf,this.pos+=4))}h.create=i.Buffer?function(s){return(h.create=function(s){return i.Buffer.isBuffer(s)?new t(s):n(s)})(s)}:n,h.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,h.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return t}}(),h.prototype.int32=function(){return 0|this.uint32()},h.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},h.prototype.bool=function(){return 0!==this.uint32()},h.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return u(this.buf,this.pos+=4)},h.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|u(this.buf,this.pos+=4)},h.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},h.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},h.prototype.bytes=function(){var t=this.uint32(),i=this.pos,s=this.pos+t;if(s>this.len)throw o(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,s):i===s?new this.buf.constructor(0):this._slice.call(this.buf,i,s)},h.prototype.string=function(){var t=this.bytes();return r.read(t,0,t.length)},h.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw o(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},h.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;;){if(4==(t=7&this.uint32()))break;this.skipType(t)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},h._configure=function(s){t=s;var r=i.Long?"toLong":"toNumber";i.merge(h.prototype,{int64:function(){return e.call(this)[r](!1)},uint64:function(){return e.call(this)[r](!0)},sint64:function(){return e.call(this).zzDecode()[r](!1)},fixed64:function(){return f.call(this)[r](!0)},sfixed64:function(){return f.call(this)[r](!1)}})};
},{"./util/minimal":575}],572:[function(require,module,exports) {
"use strict";module.exports=r;var t=require("./reader");(r.prototype=Object.create(t.prototype)).constructor=r;var e=require("./util/minimal");function r(e){t.call(this,e)}e.Buffer&&(r.prototype._slice=e.Buffer.prototype.slice),r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))};
},{"./reader":571,"./util/minimal":575}],628:[function(require,module,exports) {
"use strict";module.exports=t;var e=require("../util/minimal");function t(t,r,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");e.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(r),this.responseDelimited=Boolean(i)}(t.prototype=Object.create(e.EventEmitter.prototype)).constructor=t,t.prototype.rpcCall=function t(r,i,n,o,l){if(!o)throw TypeError("request must be specified");var u=this;if(!l)return e.asPromise(t,u,r,i,n,o);if(u.rpcImpl)try{return u.rpcImpl(r,i[u.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,t){if(e)return u.emit("error",e,r),l(e);if(null!==t){if(!(t instanceof n))try{t=n[u.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return u.emit("error",e,r),l(e)}return u.emit("data",t,r),l(null,t)}u.end(!0)})}catch(e){return u.emit("error",e,r),void setTimeout(function(){l(e)},0)}else setTimeout(function(){l(Error("already ended"))},0)},t.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};
},{"../util/minimal":575}],573:[function(require,module,exports) {
"use strict";var e=exports;e.Service=require("./rpc/service");
},{"./rpc/service":628}],574:[function(require,module,exports) {
"use strict";module.exports={};
},{}],490:[function(require,module,exports) {
"use strict";var r=exports;function e(){r.Reader._configure(r.BufferReader),r.util._configure()}r.build="minimal",r.Writer=require("./writer"),r.BufferWriter=require("./writer_buffer"),r.Reader=require("./reader"),r.BufferReader=require("./reader_buffer"),r.util=require("./util/minimal"),r.rpc=require("./rpc"),r.roots=require("./roots"),r.configure=e,r.Writer._configure(r.BufferWriter),e();
},{"./writer":569,"./writer_buffer":570,"./reader":571,"./reader_buffer":572,"./util/minimal":575,"./rpc":573,"./roots":574}],335:[function(require,module,exports) {
"use strict";module.exports=require("./src/index-minimal");
},{"./src/index-minimal":490}],68:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Model=exports.Weights=void 0;var e=t(require("protobufjs/minimal"));function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}const n=e.Reader,r=e.Writer,a=e.util,i=e.roots.default||(e.roots.default={});exports.default=i;const o=i.Weights=(()=>{function t(e){if(this.shape=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return t.prototype.layerName="",t.prototype.weightName="",t.prototype.shape=a.emptyArray,t.prototype.type="",t.prototype.data=a.newBuffer([]),t.prototype.quantizeMin=0,t.prototype.quantizeMax=0,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.layerName&&e.hasOwnProperty("layerName")&&t.uint32(10).string(e.layerName),null!=e.weightName&&e.hasOwnProperty("weightName")&&t.uint32(18).string(e.weightName),null!=e.shape&&e.shape.length){t.uint32(26).fork();for(let n=0;n<e.shape.length;++n)t.uint32(e.shape[n]);t.ldelim()}return null!=e.type&&e.hasOwnProperty("type")&&t.uint32(34).string(e.type),null!=e.data&&e.hasOwnProperty("data")&&t.uint32(42).bytes(e.data),null!=e.quantizeMin&&e.hasOwnProperty("quantizeMin")&&t.uint32(53).float(e.quantizeMin),null!=e.quantizeMax&&e.hasOwnProperty("quantizeMax")&&t.uint32(61).float(e.quantizeMax),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,a=new i.Weights;for(;e.pos<r;){let t=e.uint32();switch(t>>>3){case 1:a.layerName=e.string();break;case 2:a.weightName=e.string();break;case 3:if(a.shape&&a.shape.length||(a.shape=[]),2==(7&t)){let t=e.uint32()+e.pos;for(;e.pos<t;)a.shape.push(e.uint32())}else a.shape.push(e.uint32());break;case 4:a.type=e.string();break;case 5:a.data=e.bytes();break;case 6:a.quantizeMin=e.float();break;case 7:a.quantizeMax=e.float();break;default:e.skipType(7&t)}}return a},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.layerName&&e.hasOwnProperty("layerName")&&!a.isString(e.layerName))return"layerName: string expected";if(null!=e.weightName&&e.hasOwnProperty("weightName")&&!a.isString(e.weightName))return"weightName: string expected";if(null!=e.shape&&e.hasOwnProperty("shape")){if(!Array.isArray(e.shape))return"shape: array expected";for(let t=0;t<e.shape.length;++t)if(!a.isInteger(e.shape[t]))return"shape: integer[] expected"}return null!=e.type&&e.hasOwnProperty("type")&&!a.isString(e.type)?"type: string expected":null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||a.isString(e.data))?"data: buffer expected":null!=e.quantizeMin&&e.hasOwnProperty("quantizeMin")&&"number"!=typeof e.quantizeMin?"quantizeMin: number expected":null!=e.quantizeMax&&e.hasOwnProperty("quantizeMax")&&"number"!=typeof e.quantizeMax?"quantizeMax: number expected":null},t.fromObject=function(e){if(e instanceof i.Weights)return e;let t=new i.Weights;if(null!=e.layerName&&(t.layerName=String(e.layerName)),null!=e.weightName&&(t.weightName=String(e.weightName)),e.shape){if(!Array.isArray(e.shape))throw TypeError(".Weights.shape: array expected");t.shape=[];for(let n=0;n<e.shape.length;++n)t.shape[n]=e.shape[n]>>>0}return null!=e.type&&(t.type=String(e.type)),null!=e.data&&("string"==typeof e.data?a.base64.decode(e.data,t.data=a.newBuffer(a.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.quantizeMin&&(t.quantizeMin=Number(e.quantizeMin)),null!=e.quantizeMax&&(t.quantizeMax=Number(e.quantizeMax)),t},t.toObject=function(e,t){t||(t={});let n={};if((t.arrays||t.defaults)&&(n.shape=[]),t.defaults&&(n.layerName="",n.weightName="",n.type="",n.data=t.bytes===String?"":[],n.quantizeMin=0,n.quantizeMax=0),null!=e.layerName&&e.hasOwnProperty("layerName")&&(n.layerName=e.layerName),null!=e.weightName&&e.hasOwnProperty("weightName")&&(n.weightName=e.weightName),e.shape&&e.shape.length){n.shape=[];for(let t=0;t<e.shape.length;++t)n.shape[t]=e.shape[t]}return null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?a.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),null!=e.quantizeMin&&e.hasOwnProperty("quantizeMin")&&(n.quantizeMin=t.json&&!isFinite(e.quantizeMin)?String(e.quantizeMin):e.quantizeMin),null!=e.quantizeMax&&e.hasOwnProperty("quantizeMax")&&(n.quantizeMax=t.json&&!isFinite(e.quantizeMax)?String(e.quantizeMax):e.quantizeMax),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t})();exports.Weights=o;const s=i.Model=(()=>{function t(e){if(this.modelWeights=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return t.prototype.id="",t.prototype.name="",t.prototype.kerasVersion="",t.prototype.backend="",t.prototype.modelConfig="",t.prototype.modelWeights=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.id&&e.hasOwnProperty("id")&&t.uint32(10).string(e.id),null!=e.name&&e.hasOwnProperty("name")&&t.uint32(18).string(e.name),null!=e.kerasVersion&&e.hasOwnProperty("kerasVersion")&&t.uint32(26).string(e.kerasVersion),null!=e.backend&&e.hasOwnProperty("backend")&&t.uint32(34).string(e.backend),null!=e.modelConfig&&e.hasOwnProperty("modelConfig")&&t.uint32(42).string(e.modelConfig),null!=e.modelWeights&&e.modelWeights.length)for(let n=0;n<e.modelWeights.length;++n)i.Weights.encode(e.modelWeights[n],t.uint32(50).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,a=new i.Model;for(;e.pos<r;){let t=e.uint32();switch(t>>>3){case 1:a.id=e.string();break;case 2:a.name=e.string();break;case 3:a.kerasVersion=e.string();break;case 4:a.backend=e.string();break;case 5:a.modelConfig=e.string();break;case 6:a.modelWeights&&a.modelWeights.length||(a.modelWeights=[]),a.modelWeights.push(i.Weights.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return a},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.id&&e.hasOwnProperty("id")&&!a.isString(e.id))return"id: string expected";if(null!=e.name&&e.hasOwnProperty("name")&&!a.isString(e.name))return"name: string expected";if(null!=e.kerasVersion&&e.hasOwnProperty("kerasVersion")&&!a.isString(e.kerasVersion))return"kerasVersion: string expected";if(null!=e.backend&&e.hasOwnProperty("backend")&&!a.isString(e.backend))return"backend: string expected";if(null!=e.modelConfig&&e.hasOwnProperty("modelConfig")&&!a.isString(e.modelConfig))return"modelConfig: string expected";if(null!=e.modelWeights&&e.hasOwnProperty("modelWeights")){if(!Array.isArray(e.modelWeights))return"modelWeights: array expected";for(let t=0;t<e.modelWeights.length;++t){let n=i.Weights.verify(e.modelWeights[t]);if(n)return"modelWeights."+n}}return null},t.fromObject=function(e){if(e instanceof i.Model)return e;let t=new i.Model;if(null!=e.id&&(t.id=String(e.id)),null!=e.name&&(t.name=String(e.name)),null!=e.kerasVersion&&(t.kerasVersion=String(e.kerasVersion)),null!=e.backend&&(t.backend=String(e.backend)),null!=e.modelConfig&&(t.modelConfig=String(e.modelConfig)),e.modelWeights){if(!Array.isArray(e.modelWeights))throw TypeError(".Model.modelWeights: array expected");t.modelWeights=[];for(let n=0;n<e.modelWeights.length;++n){if("object"!=typeof e.modelWeights[n])throw TypeError(".Model.modelWeights: object expected");t.modelWeights[n]=i.Weights.fromObject(e.modelWeights[n])}}return t},t.toObject=function(e,t){t||(t={});let n={};if((t.arrays||t.defaults)&&(n.modelWeights=[]),t.defaults&&(n.id="",n.name="",n.kerasVersion="",n.backend="",n.modelConfig=""),null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.kerasVersion&&e.hasOwnProperty("kerasVersion")&&(n.kerasVersion=e.kerasVersion),null!=e.backend&&e.hasOwnProperty("backend")&&(n.backend=e.backend),null!=e.modelConfig&&e.hasOwnProperty("modelConfig")&&(n.modelConfig=e.modelConfig),e.modelWeights&&e.modelWeights.length){n.modelWeights=[];for(let r=0;r<e.modelWeights.length;++r)n.modelWeights[r]=i.Weights.toObject(e.modelWeights[r],t)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t})();exports.Model=s;
},{"protobufjs/minimal":335}],67:[function(require,module,exports) {

},{}],19:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("lodash/keys")),t=y(require("lodash/isEqual")),s=y(require("lodash/map")),a=y(require("lodash/every")),i=y(require("lodash/find")),r=y(require("lodash/pick")),n=y(require("bluebird")),o=y(require("axios")),u=y(require("performance-now")),l=require("eventemitter3"),h=m(require("./layers")),d=m(require("./visualizations")),p=y(require("./Tensor")),f=require("./WebGL2"),c=y(require("./proto"));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,s):{};a.get||a.set?Object.defineProperty(t,s,a):t[s]=e[s]}return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}const g=o.default.CancelToken.source();class L{constructor(e={}){const{filepath:t=null,headers:s={},filesystem:a=!1,gpu:i=!1,transferLayerOutputs:r=!1,pauseAfterLayerCalls:n=!1,visualizations:o=[]}=e;if(!t)throw new Error("[Model] path to protobuf-serialized model definition file is missing.");this.filepath=t,this.headers=s,this.filesystem="undefined"==typeof window&&a,this.events=new l.EventEmitter,this.id=null,this.name=null,this.kerasVersion=null,this.backend=null,this.modelConfig={},this.modelWeights=[],this.gpu=!("undefined"==typeof window||!f.webgl2.isSupported)&&i,this.transferLayerOutputs=r,this.pauseAfterLayerCalls=n,this.modelLayersInfo=[],this.modelLayersMap=new Map,this.inputTensorsMap=new Map,this.inputLayerNames=[],this.outputLayerNames=[],this.finishedLayerNames=[],this.isRunning=!1,this.runningProgress=0,this.predictStats={},this.visMap=new Map,o.forEach(e=>{if(e in d){const t=new d[e]({modelLayersMap:this.modelLayersMap,gpu:this.gpu});this.visMap.set(e,t)}}),this._ready=this._initialize()}checkGPUSupport(){return f.webgl2.isSupported}ready(){return this._ready}_interrupt(){g.cancel()}async _initialize(){this.events.emit("loadingProgress",0);try{const e=this.filesystem?this._dataRequestFS():this._dataRequestHTTP(this.headers);await e}catch(e){console.log(e),this._interrupt()}this.events.emit("loadingProgress",100),this._buildDAG(),this.inputLayerNames.forEach(e=>{const t=this.modelLayersMap.get(e);t.call(this.inputTensorsMap.get(e)),t.hasOutput=!0,t.visited=!0});const e=this.pauseAfterLayerCalls;return this.pauseAfterLayerCalls=!0,this.runningProgress=0,this.events.emit("initProgress",0),await this._traverseDAG(this.inputLayerNames,"initProgress"),this.pauseAfterLayerCalls=e,this.finishedLayerNames=[],this.modelLayersMap.forEach(e=>{e.hasOutput=!1,e.visited=!1}),this.visMap.forEach(e=>{e.initialize()}),this.events.emit("initProgress",100),!0}async _dataRequestHTTP(e={}){try{const t=await o.default.get(this.filepath,{responseType:"arraybuffer",headers:e,onDownloadProgress:e=>{if(e.lengthComputable){const t=Math.round(100*e.loaded/e.total);this.events.emit("loadingProgress",t)}},cancelToken:g.token});this._decodeProtobuf(new Uint8Array(t.data))}catch(e){if(!o.default.isCancel(e))throw e;console.log("[Model] Data request canceled",e.message)}}async _dataRequestFS(){const e=n.default.promisify(require("fs").readFile);try{const t=await e(this.filepath);this._decodeProtobuf(t)}catch(e){throw e}}_decodeProtobuf(e){if(c.default.Model.verify(e))throw new Error("[Model] Invalid model - check protobuf serialization: {err}");const t=c.default.Model.decode(e);this.id=t.id,this.name=t.name,this.kerasVersion=t.kerasVersion,this.backend=t.backend,this.modelConfig=JSON.parse(t.modelConfig),this.modelWeights=t.modelWeights}toggleGPU(e){this.gpu=void 0===e?!this.gpu:e,this.modelLayersMap.forEach(e=>{e.toggleGPU(this.gpu)}),this.visMap.forEach(e=>{e.gpu=this.gpu}),this.resetInputTensors()}resetInputTensors(){this.inputLayerNames.forEach(e=>{const t=this.modelLayersMap.get(e);this.inputTensorsMap.set(e,new p.default([],t.shape))})}_buildDAG(){const e=this.modelConfig.class_name;let t=[];if("Sequential"===e?t=this.modelConfig.config:"Model"===e&&(t=this.modelConfig.config.layers),!Array.isArray(t)||!t.length)throw new Error("[Model] Model configuration does not contain any layers.");t.forEach((s,a)=>{const i=s.class_name,r=s.config;if("Model"===e&&"Sequential"===i)r.forEach((e,t)=>{const a=e.class_name,i=e.config,n=0===t?s.inbound_nodes[0].map(e=>e[0]):[r[t-1].config.name];this._createLayer(a,i,n)});else{if(!(i in h))throw new Error(`[Model] Layer ${i} specified in model configuration is not implemented!`);{if("Sequential"===e&&0===a){const e="input",t=r.batch_input_shape.slice(1),s=new h.InputLayer({name:e,shape:t,gpu:this.gpu});this.modelLayersMap.set(e,s),this.inputTensorsMap.set(e,new p.default([],t)),this.inputLayerNames.push(e)}else if("Model"===e&&"InputLayer"===i){const e=r.batch_input_shape.slice(1);this.inputTensorsMap.set(r.name,new p.default([],e)),this.inputLayerNames.push(r.name)}let n=[];if("Sequential"===e)n=0===a?["input"]:[t[a-1].config.name];else if("Model"===e){const e=s.inbound_nodes;e&&e.length&&(n=e[0].map(e=>e[0]))}this._createLayer(i,r,n)}}}),this.modelLayersMap.forEach(e=>{this.modelLayersInfo.push((0,r.default)(e,["name","description","layerClass","inbound","outbound"])),0===e.outbound.length&&this.outputLayerNames.push(e.name)}),this.inputLayerNames.sort(),this.outputLayerNames.sort()}_createLayer(e,t,s){const a=new h[e](Object.assign({},t,{gpu:this.gpu}));let r=[];if("Bidirectional"===e){const e=a.forwardLayer.params.map(e=>`${t.name}/forward_${t.layer.config.name}/${e}`),s=a.backwardLayer.params.map(e=>`${t.name}/backward_${t.layer.config.name}/${e}`);r=e.concat(s)}else r="TimeDistributed"===e?a.layer.params.map(e=>`${t.name}/${e}`):a.params.map(e=>`${t.name}/${e}`);if(r&&r.length){const e=r.map(e=>{const t=(0,i.default)(this.modelWeights,t=>{return new RegExp(`^.*${e}`).test(t.weightName)});if(!t)throw new Error("[Model] error loading weights.");const{data:s,shape:a,type:r}=t,n=new ArrayBuffer(s.byteLength),o=new Uint8Array(n);if(o.set(new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),"uint8"===r){const{quantizeMin:e,quantizeMax:s}=t,i=new Float32Array(o);for(let t=0,a=i.length;t<a;t++)i[t]*=(s-e)/255,i[t]+=e;return new p.default(i,a)}return new p.default(new Float32Array(n),a)});a.setWeights(e)}this.modelLayersMap.set(t.name,a),s.forEach(e=>{this.modelLayersMap.get(t.name).inbound.push(e),this.modelLayersMap.get(e).outbound.push(t.name)})}async _traverseDAG(e,t){if(0===e.length)return this.runningProgress=100,this.events.emit(t,100),!0;if(1===e.length){const i=e[0],r=this.modelLayersMap.get(i);if("InputLayer"===r.layerClass)this.finishedLayerNames.push(this.modelLayersMap.get(i).name);else{const e=this.modelLayersMap.get(i);if(e.visited)return!1;const t=e.inbound.map(e=>this.modelLayersMap.get(e));if(!(0,a.default)((0,s.default)(t,"hasOutput")))return!1;e.isMergeLayer?e.call((0,s.default)(t,"output")):e.call(t[0].output),e.hasOutput=!0,e.visited=!0,this.finishedLayerNames.push(e.name),this.pauseAfterLayerCalls&&await n.default.delay(0)}this.runningProgress+=100/this.modelLayersMap.size,this.events.emit(t,this.runningProgress),await this._traverseDAG(r.outbound,t)}else await n.default.all(e.map(e=>this._traverseDAG([e],t)))}_maybeTransferIntermediateOutputs(){this.gpu&&this.transferLayerOutputs&&this.modelLayersMap.forEach(e=>{e.output&&e.output.glTexture&&(f.webgl2.bindOutputTexture(e.output.glTexture,e.output.glTextureShape),e.output.transferFromGLTexture(),e.output.is2DReshaped&&e.output.reshapeFrom2D())})}loadData(e){this.inputLayerNames.forEach(t=>{const s=this.modelLayersMap.get(t);this.inputTensorsMap.get(t).replaceTensorData(e[t]),s.call(this.inputTensorsMap.get(t)),s.hasOutput=!0,s.visited=!0})}async predict(s){if(this.isRunning=!0,this.runningProgress=0,this.events.emit("predictProgress",0),!(0,t.default)((0,e.default)(s).sort(),this.inputLayerNames))throw this.isRunning=!1,new Error("[Model] predict() must take an object where the keys are the named inputs of the model: "+JSON.stringify(this.inputLayerNames));if(!(0,a.default)(this.inputLayerNames,e=>s[e]instanceof Float32Array))throw this.isRunning=!1,new Error("[Model] predict() must take an object where the values are the flattened data as Float32Array.");this.finishedLayerNames=[],this.modelLayersMap.forEach(e=>{e.hasOutput=!1,e.visited=!1});let i=(0,u.default)();this.loadData(s),this.predictStats.loadData=(0,u.default)()-i,i=(0,u.default)(),await this._traverseDAG(this.inputLayerNames,"predictProgress"),this.predictStats.forwardPass=(0,u.default)()-i,this._maybeTransferIntermediateOutputs();const r=this.modelConfig.class_name,n={};if("Sequential"===r){const e=this.modelLayersMap.get(this.outputLayerNames[0]);n.output=e.output.tensor.data}else"Model"===r&&this.outputLayerNames.forEach(e=>{const t=this.modelLayersMap.get(e);n[e]=t.output.tensor.data});return i=(0,u.default)(),this.visMap.forEach(e=>{e.update()}),this.predictStats.visualizations=(0,u.default)()-i,this.isRunning=!1,this.events.emit("predictProgress",100),n}layerCall(e,t){if(!this.modelLayersMap.has(e))return;let s;return s=t instanceof p.default?t:new p.default(t.data,t.shape),this.modelLayersMap.get(e).call(s)}cleanup(){f.webgl2.clearRefs(),this.modelLayersMap.clear(),this.inputTensorsMap.clear(),this.visMap.clear(),delete this.modelWeights}}exports.default=L;
},{"lodash/keys":109,"lodash/isEqual":60,"lodash/map":110,"lodash/every":112,"lodash/find":111,"lodash/pick":113,"bluebird":107,"axios":106,"performance-now":108,"eventemitter3":105,"./layers":24,"./visualizations":83,"./Tensor":20,"./WebGL2":21,"./proto":68,"fs":67}],32:[function(require,module,exports) {
var e=require("./_root"),r=e.isFinite;function o(e){return"number"==typeof e&&r(e)}module.exports=o;
},{"./_root":56}],33:[function(require,module,exports) {
var e=require("./_baseFlatten"),n=1/0;function r(r){return(null==r?0:r.length)?e(r,n):[]}module.exports=r;
},{"./_baseFlatten":117}],31:[function(require,module,exports) {
"use strict";var r=require("dup"),e=require("cwise"),a=e({args:["array","scalar","index"],body:function(r,e,a){var n,t=e;for(n=0;n<a.length-1;++n)t=t[a[n]];t[a[a.length-1]]=r}});module.exports=function(e){var n=r(e.shape);return a(e,n),n};
},{"dup":115,"cwise":61}],22:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.approxEquals=n;var e=u(require("lodash/isFinite")),r=u(require("lodash/flattenDeep")),t=u(require("ndarray-unpack"));function u(e){return e&&e.__esModule?e:{default:e}}function n(u,n,l=1e-4){const a=(0,r.default)((0,t.default)(u)),i=n;if(a.length!==i.length)return!1;for(let r=0;r<a.length;r++){if(!(0,e.default)(a[r]))return!1;if(a[r]<i[r]-l||a[r]>i[r]+l)return!1}return!0}
},{"lodash/isFinite":32,"lodash/flattenDeep":33,"ndarray-unpack":31}],13:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Model",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Tensor",{enumerable:!0,get:function(){return t.default}}),exports.testUtils=exports.layers=exports.activations=exports.default=exports.GPU_SUPPORT=void 0,require("@babel/polyfill");var e=n(require("./Model")),t=n(require("./Tensor")),r=require("./WebGL2"),o=l(require("./activations"));exports.activations=o;var s=l(require("./layers"));exports.layers=s;var i=l(require("./utils/testUtils"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}exports.testUtils=i;const u=r.webgl2.isSupported;exports.GPU_SUPPORT=u;const a={Model:e.default,Tensor:t.default,GPU_SUPPORT:u,activations:o,layers:s,testUtils:i};exports.default=a;
},{"@babel/polyfill":25,"./Model":19,"./Tensor":20,"./WebGL2":21,"./activations":23,"./layers":24,"./utils/testUtils":22}],6:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("tslib"),n=require("./keras"),r=require("./detectFaces"),i=t.__importDefault(require("keras-js"));!function(e){e[e.TODO=0]="TODO",e[e.PROCESSING=1]="PROCESSING",e[e.DONE=2]="DONE"}(e||(e={})),function(){t.__awaiter(this,void 0,void 0,function(){var a,o,s,c,d,l,u,f,h,g,v,m,b,p;return t.__generator(this,function(O){switch(O.label){case 0:if(a=document.querySelector("canvas"),o=a.getContext("2d"),s=document.querySelector(".message"),c=document.querySelector(".progress"),d=document.querySelector(".flip-camera"),!("FaceDetector"in window))return[3,5];O.label=1;case 1:return O.trys.push([1,3,,4]),l="/konomi/"===location.pathname?"/konomi/final.fine_tuned.bin":"/dist/final.fine_tuned.bin",(u=new i.default.Model({filepath:l,gpu:i.default.GPU_SUPPORT})).events.on("loadingProgress",function(e){return c.textContent="Loading "+e+"%"}),u.events.on("initProgress",function(e){return e>=100?s.classList.add("hidden")||a.classList.remove("hidden"):c.textContent="Initializing "+Math.floor(e)+"%"}),f=new n.KerasModelWrapper(u),[4,Promise.all([navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),f.ready()])];case 2:return h=O.sent()[0],(g=document.createElement("video")).srcObject=h,g.autoplay=!0,g.onloadedmetadata=function(){a.width=g.videoWidth,a.height=g.videoHeight},v=e.TODO,m=[],b=[],document.body.addEventListener("click",function(){g.paused?v===e.DONE&&g.play():(g.pause(),v=e.TODO)}),h.constraint&&(d.classList.remove("hidden"),d.addEventListener("click",function(){return"environment"===h.constraint.video.facingMode?h.constraint.video.facingMode="user":h.constraint.video.facingMode="environment"})),function i(){return t.__awaiter(this,void 0,void 0,function(){var s,c,d,l,u,h,p,O,y,S,_,D;return t.__generator(this,function(t){switch(t.label){case 0:if(requestAnimationFrame(i),!g.paused)return[3,6];if(v!==e.TODO)return[3,5];v=e.PROCESSING,s=0,c=b,t.label=1;case 1:return s<c.length?(d=c[s],l=d.boundingBox,u=d.imageData,[4,f.predict(n.preprocess(u))]):[3,4];case 2:h=t.sent(),p=l.x,O=l.y,y=l.width,S=l.height,_=1===(_=Math.floor(256*(1-h)).toString(16)).length?"0"+_:_,D="#ff"+_+"00",o.strokeStyle=D,o.fillStyle=D,o.font="16px Mononoki",o.lineWidth=5,o.beginPath(),o.rect(p,O,y,S),o.stroke(),o.fillText((100*h).toFixed(2)+" / 100",p+5,O+21),t.label=3;case 3:return s++,[3,1];case 4:v=e.DONE,t.label=5;case 5:return[3,8];case 6:return o.clearRect(0,0,a.width,a.height),o.drawImage(g,0,0,g.videoWidth,g.videoHeight),m.forEach(function(e){var t=e.boundingBox,n=t.x,r=t.y,i=t.width,a=t.height;o.strokeStyle="#ffeb3b",o.fillStyle="#ffeb3b",o.lineWidth=5,o.beginPath(),o.rect(n,r,i,a),o.stroke()}),b=m,[4,r.detectFacesImageData(g).catch(function(e){return console.error(e)||[]})];case 7:m=t.sent(),t.label=8;case 8:return[2]}})})}(),[2];case 3:return p=O.sent(),console.error(p),s.classList.add("error"),s.classList.remove("hidden"),a.classList.add("hidden"),[3,4];case 4:return[3,6];case 5:s.classList.add("error"),O.label=6;case 6:return[2]}})})}();
},{"tslib":14,"./keras":9,"./detectFaces":10,"keras-js":13}]},{},[6])